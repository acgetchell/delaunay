# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/)
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

Generated by [`git-cliff`](https://github.com/orhun/git-cliff).

## [Unreleased](https://github.com/acgetchell/delaunay/compare/v0.7.1...HEAD)

### ⚠️ Breaking Changes

- **\*\*Non-deterministic tie-breaking\*\*: The sort compared only quantized values without** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **Sorting by (quantized\_values, original\_index) for stable tie-breaking** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **Deterministic: order\_vertices\_lexicographic provides stable tie-breaking** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

### Merged Pull Requests

- refactor(topology): introduce GlobalTopology behavior model adapter [`#221`](https://github.com/acgetchell/delaunay/pull/221)

- feat(tds): enforce coherent orientation as a first-class invariant [`#219`](https://github.com/acgetchell/delaunay/pull/219)

- perf: use bulk Hilbert API in order_vertices_hilbert [`#218`](https://github.com/acgetchell/delaunay/pull/218)

- perf: improve Hilbert curve correctness and add bulk API (#207) [`#216`](https://github.com/acgetchell/delaunay/pull/216)

- docs: update docs for DelaunayTriangulationBuilder and toroidal topology [`#215`](https://github.com/acgetchell/delaunay/pull/215)

- Feat/210 toroidalspace periodic [`#213`](https://github.com/acgetchell/delaunay/pull/213)

### Added

- **docs: add comprehensive tests and documentation for topology model infrastructure** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)
  - API
    - Add module-level overview explaining trait abstraction and concrete implementations
  - Tests
    - Fix nitpick: add NaN coordinate test for canonicalize\_point\_in\_place
    - Fix nitpick: add finiteness validation to lift\_for\_orientation with test
    - Add 25 new tests for global\_topology\_model.rs (53 total):
    - Add 15 new tests for builder.rs (28 total):
    - Added: Comprehensive error handling tests for topology-aware operations
  - Other
    - add internal \`GlobalTopologyModel\` abstraction and concrete models
    - add \`GlobalTopologyModelAdapter\` and \`GlobalTopology::model()\` bridge to keep
    - Add comprehensive doc comments for validate\_topology\_model
    - Add comprehensive doc comments for canonicalize\_vertices

- **add orientation coverage in \`tests/tds\_orientation.rs\`, document the invariant, and update related docs/doctest examples**
  [`350f614`](https://github.com/acgetchell/delaunay/commit/350f614)
  - Behavior
    - Adds debug assertions and robust validation steps in critical mutation paths,
  - Tests
    - Added: Add property-based tests for coherent orientation invariants
    - Added: Nextest CI timeout override for delaunay builder test
  - Other
    - add Level 2 coherent-orientation validation via \`is\_coherently\_oriented()\` and \`OrientationViolation\` diagnostics

- **perf: improve Hilbert curve correctness and add bulk API (#207)** [`2d198e7`](https://github.com/acgetchell/delaunay/commit/2d198e7)
  - API
    - Add HilbertError enum with InvalidBitsParameter, IndexOverflow, and
  - Behavior
    - Add debug\_assert guards in hilbert\_index\_from\_quantized for parameter
  - Tests
    - Add 4D continuity test verifying Hilbert curve property on 256-point
    - Add quantization rounding distribution test validating fair cell
    - Add 5 comprehensive tests for prequantized API covering success cases,
    - Added: Configure nextest for JUnit test reporting in CI
  - Other
    - Implement hilbert\_indices\_prequantized() returning Result<Vec<u128>,
    - Added: Explicitly handle zero-dimensional inputs in Hilbert index calculation

- **docs/workflows.md: Add new section for toroidal/periodic triangulations** [`a90526c`](https://github.com/acgetchell/delaunay/commit/a90526c)

  with practical examples and construction modes

- **README.md: Add toroidal feature to Builder API section with example** [`a90526c`](https://github.com/acgetchell/delaunay/commit/a90526c)

  Code updates:

- **src/core/delaunay\_triangulation.rs: Add "Advanced Configuration"** [`a90526c`](https://github.com/acgetchell/delaunay/commit/a90526c)

  section to ::new() documentation mentioning Builder for toroidal
  and custom options; fix redundant rustdoc link

- **Adds \`coverage\_count\` as a primary metric for selecting quotient cells** [`c172796`](https://github.com/acgetchell/delaunay/commit/c172796)
  - Tests
    - Added: Toroidal periodic 2D smoke test and robust insphere error type
  - Other
    - Added: DelaunayTriangulationBuilder for flexible construction
    - Added: Phase 2 periodic triangulation builder
    - Added: Implements periodic Delaunay triangulation construction
    - Introduces a third local refinement pass in quotient selection to find
    - Added: Introduce runtime global topology tracking for triangulations

### Changed

- **migrate triangulation orientation lifting to model-based behavior calls** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **migrate builder toroidal validation/canonicalization to model-based calls** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **update topology/code-organization docs for metadata-vs-behavior split** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **Changed: Improve global topology model validation and consistency** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

  Enhances periodic cell offset validation by leveraging `supports_periodic_facet_signatures`.
  Introduces robust checks for non-finite coordinates during point canonicalization
  in toroidal models, preventing invalid states.
  Refactors the `GlobalTopologyModelAdapter` to consistently delegate all trait
  method calls to specific underlying topology model implementations,
  improving maintainability.
  Updates error messages for clarity during topology validation.
  Optimizes `periodic_domain` to return a reference, avoiding data copies.
  Adjusts internal module visibility and re-exports `ToroidalConstructionMode` to prelude.

- **Enhance trait method documentation for periodic\_domain() and supports\_periodic\_facet\_signatures()**
  [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **Document public methods: ToroidalModel::new(), GlobalTopology::model(), GlobalTopologyModelAdapter::from\_global\_topology()**
  [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

  Test coverage (41 tests added):

- **EuclideanModel: comprehensive trait method coverage** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **SphericalModel and HyperbolicModel: scaffolded model behavior** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **GlobalTopologyModelAdapter: delegation verification for all trait methods** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **Edge cases: large coordinates, exact periods, zero/large offsets, f32 scalars, 5D** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

  Code quality improvements:

- **Apply cargo fmt formatting** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **Changed: Optimize facet vertex processing and improve periodic facet key determinism** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

  Moves the facet vertex buffer initialization to only execute on the non-periodic path,
  avoiding unnecessary work for periodic cells and improving efficiency.

  Enhances the `periodic_facet_key_from_lifted_vertices` function to ensure
  deterministic sorting by considering both the vertex key value and its periodic
  offset. This prevents inconsistencies when multiple lifted vertices share the same
  base key.

  Refs: #220

- **ToroidalModel edge cases (small periods, boundary coords, multi-wrap)** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **Error message quality verification (axis numbers, values, context)** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **Trait bounds validation (f32/f64 scalar type support)** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **validate\_topology\_model error mapping tests** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **canonicalize\_vertices UUID/data preservation tests** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **Error propagation and diagnostics tests** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

  Documentation improvements:

- **Update docs/topology.md with architecture section** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **Update docs/code\_organization.md for new modules** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **Very small/large period handling** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **Boundary coordinate edge cases** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **Mixed positive/negative wrapping** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **Non-finite coordinate rejection (NaN, infinity)** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **Error message content validation** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **Multiple scalar type support (f32, f64)** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **Changed: Add construction mode to \`ToroidalModel\`** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

  Introduces a `ToroidalConstructionMode` field to `ToroidalModel` to explicitly
  define its behavior. The `supports_periodic_facet_signatures` method now
  respects this mode, allowing for different toroidal implementations.
  Existing instantiations are updated to use `Canonicalized` mode,
  preserving current behavior. This is an internal refactoring.

  Refs: #220

- **Changed: Enhance periodic model capabilities and strengthen validation** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

  Introduce a distinct `supports_periodic_orientation_offsets` capability
  flag within `GlobalTopologyModel` traits. This refinement allows for more
  granular control and validation when handling periodic geometry,
  specifically for orientation predicates, separating it from facet
  signature support.

  Updates triangulation validation to leverage this new capability,
  ensuring consistency with how periodic offsets are expected to be
  supported by the global topology.

  Strengthens the `periodic_facet_key_from_lifted_vertices` function
  with explicit input validation for lifted cell arity, preventing
  potential panics or incorrect behavior from malformed input. Also
  adds a defensive validation step to the `build_periodic` method
  in the builder, ensuring the topology model is valid upfront.

  Refs: #220

- **Changed: Refine periodic cell validation, test precision, and CI reporting** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

  Refactor checks for periodic cell offsets to improve clarity and ensure that
  validation of offset count and topology support only occurs when offsets are
  actually present.

  Enhance the `ToroidalModel` canonicalization test to use `rem_euclid` and
  approximate floating-point comparisons, making it more robust and accurate
  for large coordinate values.

  Update the Codecov GitHub workflow to parse and report detailed Cobertura
  metrics (lines covered, lines valid, line rate) in CI logs, providing more
  meaningful coverage information.

- **Changed: Make ToroidalModel::lift\_for\_orientation respect construction mode** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

  The `lift_for_orientation` method in `ToroidalModel` now explicitly checks
  if the model's construction mode supports periodic orientation offsets.
  If a model is not configured to handle periodic offsets, the method will
  ignore any provided offset and return the original coordinates.

  This clarifies the intended behavior and prevents unintended offset
  application for models like those in `Canonicalized` mode. Existing tests
  for offset application were updated to use `PeriodicImagePoint` mode, and
  a new test validates the behavior when offsets are unsupported.

  Refs: #220

- **Validate \`GlobalTopologyModel\` configuration and point canonicalization failures.** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **Confirm periodic triangulation construction fails when a periodic domain is missing.** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **Verify geometric orientation validation handles periodic offset count mismatches** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

  and coordinate lifting errors.

- **Test periodic facet key derivation for out-of-range relative offsets.** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

  Also, simplify the dispatch implementation for `GlobalTopologyModelAdapter` by removing
  redundant explicit trait qualifications for clarity (internal change).

  Refs: #220

- **Changed: Refactor ToroidalModel coordinate canonicalization for robustness** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

  Improves error handling in `ToroidalModel::canonicalized_coordinates`
  by explicitly checking for non-finite coordinates, including cases
  where coordinate conversion to `f64` might fail.

  Adds a new test to verify `periodic_facet_key` derivation exhibits
  translation invariance and distinctness for different relative vertex
  configurations, ensuring the key's integrity.

  Refs: #220

- **Changed: Refactor periodic facet key derivation and error handling** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

  Introduces a helper to centralize periodic facet key derivation, ensuring
  consistent error mapping to `GeometricDegeneracy` for derivation failures.

  Adds explicit validation for `GlobalTopologyModel` support of periodic facet
  signatures during image-point construction.

  Refines `ToroidalModel` error reporting for non-finite coordinates, using
  `ScalarConversion` and providing the specific problematic value.

  Clarifies documentation for `ValidationPolicy` configuration timing and scope.

  Refs: #220

- **feat(tds): enforce coherent orientation as a first-class invariant** [`350f614`](https://github.com/acgetchell/delaunay/commit/350f614)

- **preserve/normalize orientation across flips, cavity/neighbor rebuild paths, periodic quotient reconstruction, and vertex-removal retriangulation**
  [`350f614`](https://github.com/acgetchell/delaunay/commit/350f614)

- **Changed: Refine coherent orientation handling and validation** [`350f614`](https://github.com/acgetchell/delaunay/commit/350f614)

  The flip algorithms now explicitly manage the local orientation of newly created cells, canonicalizing their vertex order to a positive orientation before
  insertion. This ensures consistent orientation within individual cells as they are added.

  Introduced `facet_vertex_identities_in_cell_order` to `TriangulationDataStructure` which derives canonical facet identities (vertex keys and relative periodic
  offsets). This improves the robustness of `normalize_coherent_orientation` and `is_coherently_oriented` by ensuring consistent comparisons across facets,
  especially in periodic domains.

  Added `resolve_facet_handle_for_key` and `resolve_ridge_handle_for_key` to `flips.rs` to allow robust re-resolution of facet/ridge handles. This is necessary
  because vertex reordering within cells (e.g., during canonicalization) can invalidate direct facet/ridge indices.

  Updates documentation to reflect the new explicit orientation management strategy during flips, where post-flip normalization and validation are now standard
  practice.

  Improved error handling by boxing `source` errors in `InsertionError`, `DelaunayTriangulationConstructionErrorWithStatistics`, and
  `TriangulationConstructionError`, reducing struct size and preventing excessive stack usage.

  Enhanced robustness of `Cell::swap_vertex_slots` with additional bounds checks and `Triangulation::build_initial_simplex` to handle cases with insufficient
  vertices more gracefully.

  Added `bump_generation` in `normalize_coherent_orientation` to correctly increment the TDS generation counter when cell orientations are modified.

  Expanded TDS orientation tests to include serialization, manual tampering of cell vertex order, and verification that `is_coherently_oriented` correctly
  detects the violation.

- **Changed: Refactor coherent orientation logic and add validation tests** [`350f614`](https://github.com/acgetchell/delaunay/commit/350f614)

  Refactors internal logic for deriving facet permutation parity into a new helper
  function, centralizing the definition of coherent boundary orientation.

  Enhances `normalize_coherent_orientation` and `validate_coherent_orientation`
  methods to leverage this consolidated helper, improving robustness and clarity.

  Adds comprehensive unit tests for facet permutation parity across various
  dimensions and scenarios. Integrates a new property test suite,
  `proptest_orientation.rs`, to rigorously validate coherent orientation upon
  construction, detect tampering, and ensure consistency during incremental
  insertions.

  Updates project documentation, including `README.md` and property testing
  summaries, to reflect the new capabilities for coherent orientation validation
  and the addition of new related tests.

- **Enforces positive geometric orientation for all cells during initial** [`350f614`](https://github.com/acgetchell/delaunay/commit/350f614)

  construction, incremental insertion, and Delaunay repair processes.

- **Extends orientation logic to correctly handle periodic cells by validating** [`350f614`](https://github.com/acgetchell/delaunay/commit/350f614)

  their geometric orientation in lifted coordinates.

- **Refines TDS-level coherent orientation checks to correctly exclude periodic** [`350f614`](https://github.com/acgetchell/delaunay/commit/350f614)

  adjacencies, where combinatorial orientation is not uniquely canonical.

- **Changed: Update CI benchmark policy and stabilize flaky test** [`350f614`](https://github.com/acgetchell/delaunay/commit/350f614)

  The CI benchmark workflow now treats performance regressions as warnings rather than hard failures. The `Run performance regression test` step uses
  `continue-on-error`, and a subsequent classification step determines the outcome. If regressions are detected, a `::warning::` is issued and a summary posted,
  allowing the workflow to pass while still highlighting performance issues. This enhances CI stability against expected performance variations.

  Additionally, the `test_builder_toroidal_periodic_3d_success` test is stabilized by reducing its input size. This change addresses flakiness caused by its
  exponential growth in complexity, ensuring it functions as a fast and reliable smoke test. Its `nextest` configuration is also updated, increasing the
  `slow-timeout` and explicitly setting `retries = 0` to provide a clearer failure signal without re-runs.

- **Changed: Refactor and harden geometric orientation logic** [`350f614`](https://github.com/acgetchell/delaunay/commit/350f614)

  Consolidates redundant code for evaluating cell orientations, including periodic
  domain handling and point collection.
  Enhances error mapping and reporting for orientation failures during Delaunay
  repair.
  Integrates post-retriangulation geometric orientation validation for improved
  robustness.
  Clarifies when combinatorial orientation checks are skipped for periodic cells
  in the triangulation data structure.
  Updates debugging instructions and references in the known issues documentation.

- **Changed: Improve validation for cell orientation convergence** [`350f614`](https://github.com/acgetchell/delaunay/commit/350f614)

  Enhances topology validation by adding a post-condition check for
  positive orientation normalization after bounded promotion passes.
  This prevents the data structure from remaining inconsistent if
  orientation convergence fails silently.

  Refactors geometric degeneracy error handling for improved code
  readability and maintainability. Updates documentation for 4D bulk
  construction tests to include `N=200` debug commands and clarifies
  internal comments.

- **Changed: Unbox error and statistics in construction error type** [`350f614`](https://github.com/acgetchell/delaunay/commit/350f614)

  Reduces heap allocations for construction error objects by storing error and
  statistics data directly instead of in `Box`. Updates all call sites and
  adds `clippy::result_large_err` expects to public and internal APIs to
  reflect the intentional by-value return for compatibility.

  Refines coherent orientation validation by introducing a non-mutating helper
  function to check post-conditions, improving robustness without introducing
  partial state changes during validation.

- **Changed: Make vertex removal transactional with rollback** [`350f614`](https://github.com/acgetchell/delaunay/commit/350f614)

  Wraps the `remove_vertex` operation in a transactional flow. Snapshots the Triangulation Data Structure (TDS) before destructive edits. If any subsequent
  step, such as orientation canonicalization, neighbor wiring, facet repair, or geometric validation, fails, the TDS is rolled back to its initial state. This
  ensures data consistency and prevents the TDS from being left in a partially modified or invalid state upon error.

- **Changed: Refactor conditional geometric orientation validation** [`350f614`](https://github.com/acgetchell/delaunay/commit/350f614)

  Centralizes the decision for when geometric cell orientation
  is validated within `validate_all_invariants`. This ensures the
  orientation check is only performed when a manifold topology
  guarantee is active, improving internal consistency and potentially
  performance by avoiding redundant validations.

  Also clarifies the documentation for `promote_cells_to_positive_orientation`
  to explicitly mention periodic-lifted cells. This is an internal change.

- **perf: use bulk Hilbert API in order\_vertices\_hilbert** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

  Refactored `order_vertices_hilbert` to use the bulk `hilbert_indices_prequantized` API
  instead of calling `hilbert_index` individually for each vertex. This eliminates
  redundant parameter validation (N validations → 1 validation for N vertices).

  Changes:

- **Updated imports: replaced \`hilbert\_index\` with \`hilbert\_quantize\` and** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

  `hilbert_indices_prequantized`

- **Refactored to three-phase approach:** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **Quantize all coordinates using \`hilbert\_quantize\` (Phase 1)** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **Compute all indices in bulk via \`hilbert\_indices\_prequantized\` (Phase 2)** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **Pair indices with vertices and sort (Phase 3)** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **Preserved existing behavior: error fallbacks, sort tie-breaks, and edge cases** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

  remain unchanged

- **Quantization errors now fall back to input\_index-based ordering per vertex** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **Bulk index computation errors fall back to lexicographic ordering of quantized** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

  values instead of returning all zeros

- **This maintains meaningful ordering even when Hilbert computation fails** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

  Both changes preserve deterministic, stable ordering behavior while avoiding pathological
  cases where errors would collapse ordering into meaningless values.

- **Vertices \[2, 0, 1\] sorted lexicographically → order \[1, 2, 0\]** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **Buggy: returns \[1, 2, 0\] (forward permutation)** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **Vertices \[2, 0, 1\] sorted lexicographically → order \[1, 2, 0\]** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **Buggy: returns \[1, 2, 0\] (forward permutation)** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **Iterating through sorted positions and writing \`output\[original\_index\] = rank\`** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **Phase 1: Collect quantization results into Result<Vec<\[u32; D\]>, ()>** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **If any quantization fails, immediately return order\_vertices\_lexicographic(vertices)** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **Phase 2: If bulk index computation fails, immediately return order\_vertices\_lexicographic(vertices)**
  [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **Synthetic permutation computation in hilbert\_indices\_prequantized error path** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **Complex inverse permutation logic that was only needed for synthetic fallbacks** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

  Benefits:

- **Bulk API avoids redundant quantization computation, significantly** [`2d198e7`](https://github.com/acgetchell/delaunay/commit/2d198e7)

  improving performance for large insertion batches

  #### Testing

- **All 17 Hilbert-specific tests pass (11 existing + 6 new)** [`2d198e7`](https://github.com/acgetchell/delaunay/commit/2d198e7)

  #### Known Issue

  Temporarily ignore repair_fallback_produces_valid_triangulation test as
  the rounding change affects insertion order, exposing a latent geometric
  degeneracy issue in triangulation construction. This is properly
  documented and tracked under issue #204 for investigation.

- **Changed: Improve Hilbert curve utilities error handling** [`2d198e7`](https://github.com/acgetchell/delaunay/commit/2d198e7)

  Refactors Hilbert curve quantization and indexing functions to return `Result` instead of panicking on invalid input parameters or index overflow. This
  enhances robustness and allows callers to handle errors gracefully.

  Introduces an internal `hilbert_quantize_unchecked` for performance-critical paths, ensuring validated inputs bypass `Result` overhead.

  The Delaunay triangulation vertex sorting now includes a fallback to lexicographic ordering if Hilbert index calculation encounters an error.

  Refs: #207

- **Changed: Ignore flaky boundary analysis performance test** [`2d198e7`](https://github.com/acgetchell/delaunay/commit/2d198e7)

  Temporarily ignores a performance test in boundary analysis due to its
  occasional flakiness. The test's fixed point configuration can lead to
  geometric degeneracies during triangulation, causing failures. This allows
  other related work to progress while the root cause is investigated.

  Updates the Codecov test results GitHub Action to v1.2.1 for internal CI/CD
  maintenance.

  Refs: #204

- **Changed: Explicitly generate JUnit XML in CI for Codecov** [`2d198e7`](https://github.com/acgetchell/delaunay/commit/2d198e7)

  The previous CI setup relied on `nextest.toml` for JUnit XML output,
  which was not consistently generating the file. This update ensures
  reliable creation of the JUnit XML file by explicitly specifying
  the output path for `cargo nextest run`, crucial for Codecov Test
  Analytics.

  Refs: #207

- **Changed: Update Codecov workflow for nextest JUnit output path** [`2d198e7`](https://github.com/acgetchell/delaunay/commit/2d198e7)

  Adjusts the Codecov GitHub Actions workflow to no longer explicitly specify the
  JUnit output path for `cargo nextest run`. The path is now managed via the
  `.config/nextest.toml` configuration file, centralizing nextest settings.

  This updates all subsequent steps to check for the JUnit XML file in the
  new default location (`target/nextest/ci/test-results/junit.xml`), improving
  consistency and simplifying the test execution command.

- **docs: update docs for DelaunayTriangulationBuilder and toroidal topology** [`a90526c`](https://github.com/acgetchell/delaunay/commit/a90526c)

  Update all documentation to reflect that toroidal topology is fully
  implemented and accessible via DelaunayTriangulationBuilder.

  Documentation updates:

- **docs/topology.md: Replace "future plumbing" language with current** [`a90526c`](https://github.com/acgetchell/delaunay/commit/a90526c)

  implementation status; add complete toroidal triangulation examples

- **docs/api\_design.md: Split Builder API section into simple (::new())** [`a90526c`](https://github.com/acgetchell/delaunay/commit/a90526c)

  vs advanced (Builder) construction with toroidal examples

- **docs/code\_organization.md: Update file tree with missing files** [`a90526c`](https://github.com/acgetchell/delaunay/commit/a90526c)

  (invariants.md, workflows.md, tests, geometry/util/ subdirectory)

- **src/lib.rs: Export TopologyKind and GlobalTopology from** [`a90526c`](https://github.com/acgetchell/delaunay/commit/a90526c)

  prelude::triangulation for ergonomic imports

- **examples/topology\_editing\_2d\_3d.rs: Migrate to DelaunayTriangulationBuilder** [`a90526c`](https://github.com/acgetchell/delaunay/commit/a90526c)

- **benches/profiling\_suite.rs: Migrate to DelaunayTriangulationBuilder** [`a90526c`](https://github.com/acgetchell/delaunay/commit/a90526c)

- **Changed: Adopt DelaunayTriangulationBuilder and update related documentation** [`a90526c`](https://github.com/acgetchell/delaunay/commit/a90526c)

  Migrates benchmark and example code to consistently use the
  DelaunayTriangulationBuilder for creating triangulations.
  This reflects the full implementation and accessibility of toroidal
  topology via the builder, and updates documentation across various
  sections (API design, workflows, topology) to guide users on its
  proper and advanced configuration. Includes internal exports for
  ergonomic usage.

- **Changed: Relocate DelaunayTriangulationBuilder to prelude** [`a90526c`](https://github.com/acgetchell/delaunay/commit/a90526c)

  Moves `DelaunayTriangulationBuilder` from `core::builder` to
  `prelude::triangulation` to streamline the public API and
  improve module organization. This internal change updates existing
  usage within the benchmark suite.

  Also increases the CI benchmark job timeout from 90 minutes to two
  hours to provide sufficient time for longer comparison runs.

- **Changed: Extend CI macOS benchmark job timeout** [`a90526c`](https://github.com/acgetchell/delaunay/commit/a90526c)

  The `performance-regression` job's timeout on `macos-15` is increased
  from 105 minutes to 135 minutes. This internal CI/CD change helps
  accommodate longer-running benchmarks and prevent spurious failures.

- **A new quotienting algorithm that selects a topologically valid set of cells from the full image triangulation. For 2D, this uses a specialized depth-first**

  **search for a closed selection, and for higher dimensions, a greedy selection heuristic.**

- **Core data structure enhancements, including \`periodic\_vertex\_offsets\` in \`Cell\` to track lattice shifts.**
  [`c172796`](https://github.com/acgetchell/delaunay/commit/c172796)

- **Updates to \`Tds\` functions for facet key generation, duplicate cell detection, and neighbor assignment to correctly interpret periodic topology using**

  **the new offsets.**

- **Changed: Improve 3D periodic construction and predicate robustness** [`c172796`](https://github.com/acgetchell/delaunay/commit/c172796)

  Refines numerical predicates (insphere_distance) with magnitude-scaled
  tolerance for improved robustness in degenerate or large-coordinate cases,
  particularly for periodic triangulations.

  Enhances error reporting for insphere consistency checks, providing
  detailed InsphereConsistencyError when determinant and distance methods
  contradict. Introduces an opt-in DELAUNAY_STRICT_INSPHERE_CONSISTENCY
  environment variable to hard-fail on predicate inconsistencies, aiding
  in debugging and identifying numerical stability issues.

  Removes implicit fallback to canonical construction for 3D periodic
  expanded Delaunay triangulation failures, returning explicit
  GeometricDegeneracy errors with detailed context for better diagnostics.

  Strengthens TDS invariants by explicitly disallowing non-periodic cells
  from having self-neighbors, ensuring correct topology in periodic contexts.

  Encapsulates predicate failure increment logic into a saturating method
  for RepairDiagnostics and streamlines vertex creation and periodic offset
  handling.

  Refs: #210

- **Changed: Strengthen periodic DT construction and error reporting** [`c172796`](https://github.com/acgetchell/delaunay/commit/c172796)

  Refines the periodic Delaunay triangulation builder to improve robustness
  and provide richer diagnostic information on failure.

  Modifications include:

- **Improved retry logic for D>2, ensuring canonical points are prioritized** [`c172796`](https://github.com/acgetchell/delaunay/commit/c172796)

  and image points are shuffled.

- **Tracks \`InsertionOutcome\` during retries to differentiate skipped** [`c172796`](https://github.com/acgetchell/delaunay/commit/c172796)

  insertions from hard errors, enhancing fallback diagnostics.

- **Enforces an explicit error if the selected quotient does not cover all** [`c172796`](https://github.com/acgetchell/delaunay/commit/c172796)

  canonical vertices.

- **Centralizes logic for building periodic cell signatures in the TDS for** [`c172796`](https://github.com/acgetchell/delaunay/commit/c172796)

  consistency and stricter offset validation.

### Deprecated

- **Updated codecov workflow: migrated from deprecated \`test-results-action@v1.2.1\`** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

  to `codecov-action@v5.5.2` with `report_type: test_results` parameter

  Performance improvement: eliminates O(N) parameter validation overhead during
  bulk triangulation construction.

  Closes #217

### Fixed

- **Error handling: zero/negative/infinite/NaN periods, non-finite coordinates** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **Fix nitpick: delegate kind() and allows\_boundary() in GlobalTopologyModelAdapter** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **Fix clippy warnings (float\_cmp, suboptimal\_flops)** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

- **Fix bare URL in README.md (rustdoc compliance)** [`e56265b`](https://github.com/acgetchell/delaunay/commit/e56265b)

  Test coverage now includes:

- **Fixed: Coherent orientation validation allows periodic self-neighbors** [`350f614`](https://github.com/acgetchell/delaunay/commit/350f614)

  Previously, coherent orientation validation unconditionally ignored or processed
  self-neighbors. This could lead to incorrect errors for valid periodic
  triangulations where a cell can be its own neighbor.

  The validation now explicitly checks if a cell `allows_periodic_self_neighbor`
  before allowing a self-neighbor to pass orientation checks, ensuring
  correctness for periodic data structures. Adds dedicated tests to confirm
  this behavior.

  Includes minor internal CI update to improve coverage report parsing.

- **Fixed: 4D bulk construction orientation issues** [`350f614`](https://github.com/acgetchell/delaunay/commit/350f614)

  Addresses the previously identified root cause of 4D bulk construction failures
  related to missing orientation enforcement, as documented in `KNOWN_ISSUES_4D.md`.

  Introduces explicit validation and normalization of both combinatorial and
  geometric cell orientation across the triangulation data structure, ensuring
  cells maintain a canonical positive geometric orientation.

- **fix: improve error handling in order\_vertices\_hilbert** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

  Fixed two issues in the bulk Hilbert API refactoring:

- **Fixed u32 truncation in fallback path: Changed fallback from narrowing input\_index** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

  to u32 (which could cause collisions for >4B vertices) to using input_index directly
  as u128, preserving unique ordering for large vertex counts.

- **Improved error handling to use proper fallback ordering instead of zeros:** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **fix: correct lexicographic fallback to return inverse permutation** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

  Fixed critical bug in the lexicographic fallback path where the code returned sorted
  original indices instead of an inverse permutation (rank lookup).

  The bug: When `hilbert_indices_prequantized` fails, the fallback must return a vector
  where `indices[original_index] = rank_in_sorted_order`. The buggy code returned the
  original indices in sorted order, which is the forward permutation, not the inverse.

  Example:

- **Fixed: returns \[2, 0, 1\] (inverse: vertex 0 → rank 2, vertex 1 → rank 0, vertex 2 → rank 1)**
  [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

  The fix builds the correct inverse permutation by iterating through sorted positions
  and writing `output[original_index] = rank`.

- **fix: correct lexicographic fallback to return inverse permutation** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

  Fixed two critical bugs in the lexicographic fallback path:

- **\*\*Inverse permutation bug\*\*: The code returned sorted original indices instead of** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

  an inverse permutation (rank lookup). When `hilbert_indices_prequantized` fails,
  the fallback must return a vector where `indices[original_index] = rank_in_sorted_order`.

  Example:

- **Fixed: returns \[2, 0, 1\] (inverse: vertex 0 → rank 2, vertex 1 → rank 0, vertex 2 → rank 1)**
  [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **fix: use true lexicographic fallback in order\_vertices\_hilbert** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

  Fixed semantic correctness issue where Hilbert computation errors fell back to
  synthetic quantization instead of true lexicographic ordering of original coordinates.

  The bug: When hilbert_quantize or hilbert_indices_prequantized failed, the code
  created synthetic quantized values (e.g., [input_index; D]) and sorted those,
  which does not produce lexicographic ordering of the actual vertex coordinates.

  Academic correctness requires: When space-filling curve ordering fails, fall back
  to sorting vertices by their actual coordinate values in lexicographic order, not
  by synthetic placeholder values.

  The fix:

- **This ensures fallback path sorts by real coordinates using the same ordering as** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

  other ordering strategies (Morton, Input, Lexicographic)

  Removed:

- **Synthetic fallback values in hilbert\_quantize error path (\[input\_index; D\])** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **Semantically correct: fallback ordering matches actual coordinate values** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **Simpler code: early return instead of complex error handling** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **Consistent: all ordering strategies now use order\_vertices\_lexicographic as fallback** [`4782905`](https://github.com/acgetchell/delaunay/commit/4782905)

- **Fix quantization truncation bias by changing from NumCast::from(scaled)** [`2d198e7`](https://github.com/acgetchell/delaunay/commit/2d198e7)

  to scaled.round().to_u32() for fairer spatial distribution across grid
  cells, improving point ordering quality

  #### API Design

- **An expanded image-point method with coordinate jitter to improve numerical stability during point insertion.**
  [`c172796`](https://github.com/acgetchell/delaunay/commit/c172796)

- **Robustness checks for toroidal domain periods, ensuring they are finite and positive.** [`c172796`](https://github.com/acgetchell/delaunay/commit/c172796)

- **Un-ignores previously unstable periodic triangulation tests, indicating improved stability.**
  [`c172796`](https://github.com/acgetchell/delaunay/commit/c172796)

  Refs: #210

- **Enhances error messages for construction and selection failures with** [`c172796`](https://github.com/acgetchell/delaunay/commit/c172796)

  detailed state and statistics.

- **Fixed: Stabilize periodic triangulation construction in D >= 3** [`c172796`](https://github.com/acgetchell/delaunay/commit/c172796)

  Addresses geometric degeneracies in the toroidal periodic triangulation builder,
  especially for dimensions three and higher. Deduplicates selected quotient
  cells that map to identical canonical simplices, prioritizing in-domain
  representatives. Adds validation to prevent distinct quotient cells from
  sharing all canonical vertices across a common facet.

  Enhances CI benchmark robustness by searching for a stable input seed when
  generating points for performance suites. This avoids test failures caused by
  pathological deterministic inputs that lead to immediate construction errors.

  Refs: #210

## [v0.7.1](https://github.com/acgetchell/delaunay/compare/v0.7.0...v0.7.1) - 2026-02-08

### ⚠️ Breaking Changes

- **Changed: Updates MSRV to 1.93.0 and project dependencies** [`e3bd4bf`](https://github.com/acgetchell/delaunay/commit/e3bd4bf)

### Merged Pull Requests

- Fixed: Prevents timeout in 4D bulk construction [`#203`](https://github.com/acgetchell/delaunay/pull/203)

- Feat/ball pointgen and debug harness [`#200`](https://github.com/acgetchell/delaunay/pull/200)

- Ci/perf baselines by tag [`#199`](https://github.com/acgetchell/delaunay/pull/199)

- Refactors changelog generation to use git-cliff [`#198`](https://github.com/acgetchell/delaunay/pull/198)

- Changed: Improves flip algorithm with topology index [`#194`](https://github.com/acgetchell/delaunay/pull/194)

- Changed: Removes `CoordinateScalar` bound from `Cell`, `Tds`, `Vertex` [`#193`](https://github.com/acgetchell/delaunay/pull/193)

- Changed: Moves `TopologyEdit` to `triangulation::flips` [`#192`](https://github.com/acgetchell/delaunay/pull/192)

- Fixed: Correctly wires neighbors after K2 flips [`#191`](https://github.com/acgetchell/delaunay/pull/191)

- Changed: Use borrowed APIs in utility functions [`#190`](https://github.com/acgetchell/delaunay/pull/190)

- feat(geometry): add ScalarSummable/ScalarAccumulative supertraits [`#189`](https://github.com/acgetchell/delaunay/pull/189)

- Changed: Refactors point access for efficiency (internal) [`#187`](https://github.com/acgetchell/delaunay/pull/187)

- Fixed: Corrects kernel parameter passing in triangulation [`#186`](https://github.com/acgetchell/delaunay/pull/186)

- Added: Examples to error and struct definitions [`#185`](https://github.com/acgetchell/delaunay/pull/185)

- Fixed: Validates random triangulations for Euler consistency [`#184`](https://github.com/acgetchell/delaunay/pull/184)

- Fixed: Validates ridge links locally after Delaunay repair [`#183`](https://github.com/acgetchell/delaunay/pull/183)

- Fixed: Stabilizes Delaunay property tests with bistellar flips [`#180`](https://github.com/acgetchell/delaunay/pull/180)

- Feature/bistellar flips [`#172`](https://github.com/acgetchell/delaunay/pull/172)

### Added

- **chore: add CI fixes and document known 4D bulk construction issues** [`b071fb7`](https://github.com/acgetchell/delaunay/commit/b071fb7)
  - Tests
    - Implementing per-insertion local Delaunay repair in debug/test
    - Adding a wall-clock timeout to tests, aborting if exceeded to
    - Add \`gen\_is\_connected\` proptest (2D/3D normal, 4D/5D \`#\[ignore\]\`) asserting
  - Other
    - Re-enable per-insertion local Delaunay repair for D≥4 in
    - Add \`if D >= 4 { continue; }\` guard in both inverse postcondition checks to
    - Add \`both\_positive\_artifact\` filter in \`is\_delaunay\_property\_only\` for D≥4:
    - Add \`Tds::is\_connected()\` BFS over neighbor pointers and
    - Add docs/KNOWN\_ISSUES\_4D.md documenting large-scale limitations

- **Added: Debug harness and uniform ball point generation** [`79bf0e9`](https://github.com/acgetchell/delaunay/commit/79bf0e9)

  Adds a large-scale triangulation debug harness for manual testing of
  various dimensions and point counts, including deterministic point
  generation and insertion order shuffling.

  Also introduces uniform point generation within a D-dimensional ball,
  using rejection sampling for even distribution. This provides more
  realistic point distributions for higher-dimensional tests.

- **Added: Large-scale debug harness for Delaunay repairs** [`79bf0e9`](https://github.com/acgetchell/delaunay/commit/79bf0e9)

  Adds a large-scale debugging harness for the Delaunay
  triangulation repair algorithm, enabling more robust
  testing and diagnostics, including incremental bisect.

  Includes recipes for running debug harnesses with 3D/4D
  point clouds with controllable point counts.

  Sets up tracing and diagnostics, exposing new env vars for
  controlling logging, max flips, and debug output verbosity.

  The harness is meant to be ignored by default and only run
  manually.

- **Added: Tag-based performance baselines via GitHub Actions** [`0c94dec`](https://github.com/acgetchell/delaunay/commit/0c94dec)

  Implements automated performance baselines generated on version tags
  (`vX.Y.Z`) as GitHub Actions artifacts, replacing local baselines.
  Adds `generate-baseline.yml` to create baselines on tag push/workflow
  dispatch.
  The benchmark workflow compares against the latest semver tag artifact.

  Includes `benchmark-utils compare-tags` to compare any two tags,
  and `fetch-baseline` to get specific tag baselines.

- **Add a defensive debug log when commit bodies contain an unclosed \`\`\` fence.** [`63553fa`](https://github.com/acgetchell/delaunay/commit/63553fa)

- **Add regression tests for equals-in-prose, assignment lines, and unclosed-fence logging.** [`63553fa`](https://github.com/acgetchell/delaunay/commit/63553fa)

- **Added: K=3 flip rewiring test** [`5ab686c`](https://github.com/acgetchell/delaunay/commit/5ab686c)

  Adds a test to verify correct rewiring of external neighbors
  after a k=3 flip. This validates the boundary handling and
  neighbor update logic in the bistellar flip implementation.

  This test constructs an explicit k=3 ridge-flip fixture and
  checks neighbor rewiring.

- **feat(geometry): add ScalarSummable/ScalarAccumulative supertraits** [`abdeeb2`](https://github.com/acgetchell/delaunay/commit/abdeeb2)

- **Add ScalarSummable (CoordinateScalar + Sum) and ScalarAccumulative (CoordinateScalar + AddAssign + SubAssign + Sum)**
  [`abdeeb2`](https://github.com/acgetchell/delaunay/commit/abdeeb2)

- **Added: Examples to topology editing functions** [`8020065`](https://github.com/acgetchell/delaunay/commit/8020065)

  Adds example usages to the `flip_k1_insert`, `flip_k1_remove`,
  and `flip_k2` functions to demonstrate their use and expected
  behavior. Also adds an example for the `flip_k3` function.
  These examples enhance understanding and usability.

- **Added: Examples to error and struct definitions** [`a1bce55`](https://github.com/acgetchell/delaunay/commit/a1bce55)

  Adds code examples to various error enums and struct definitions
  to improve documentation and provide usage guidance.

  This change enhances the discoverability and understanding of
  various components, such as `AdjacencyIndexBuildError`,
  `BistellarFlipKind`, `FlipDirection`, `FlipError`, `FlipInfo`,
  `TriangleHandle`, `RidgeHandle`, `DelaunayRepairStats`,
  `RepairQueueOrder`, `DelaunayRepairDiagnostics`,
  `DelaunayRepairError`, `HullExtensionReason`, `InsertionError`,
  `LocateResult`, `LocateError`, `ConflictError`, `LocateFallbackReason`,
  `LocateFallback`, `LocateStats`, `CellValidationError`, `EdgeKey`,
  `FacetError`, `TopologicalOperation`, `RepairDecision`,
  `InsertionResult`, `InsertionStatistics`,
  `TriangulationConstructionState`, `TdsConstructionError`,
  `DelaunayValidationError`, `DelaunayRepairPolicy`,
  `DelaunayRepairHeuristicConfig`, `DelaunayRepairHeuristicSeeds`,
  `DelaunayRepairOutcome`, `DelaunayCheckPolicy`,
  `UuidValidationError`, `VertexValidationError`,
  `ConvexHullValidationError`, `ConvexHullConstructionError`,
  `MatrixError`, `InSphere`, `Orientation`, `QualityError`,
  `ConsistencyResult`, `CoordinateConversionError`,
  `CoordinateValidationError`, `CircumcenterError`,
  `SurfaceMeasureError`, `RandomPointGenerationError` and
  `ValueConversionError` to make the crate easier to use.

- **Adds tests for Delaunay validation and handles empty triangulations correctly.** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)
  - API
    - Added: Two-track API design documentation and example
  - Behavior
    - Adding more debugging information.
    - Adds more detailed error messages for debugging failures
    - Adds a bench-logging feature to conditionally enable additional error logging
  - Other
    - Added: Bistellar flips and repair for Delaunay
    - Adds: Bistellar flip algorithms for triangulation
    - Added: Bistellar flips for Delaunay repair and editing
    - Added: Implements bistellar flips for Delaunay repair
    - Added: Insertion order strategies for bulk construction
    - Adding cycle detection during flips to prevent infinite loops.
    - Introducing robust kernel usage as a fallback.

- **Added: Document geometric and topological invariants** [`0283bf0`](https://github.com/acgetchell/delaunay/commit/0283bf0)

  Adds `invariants.md` to document the theoretical background and
  rationale for the topological and geometric invariants enforced by
  the `delaunay` crate. This includes simplicial complexes,
  PL-manifolds, link-based validation, insertion strategies, and
  convergence considerations. Updates `README.md` and `lib.rs` to
  reference the new document. Also adds a `examples/README.md` file.

- **docs: refresh docs and add workflows guide** [`695e9a0`](https://github.com/acgetchell/delaunay/commit/695e9a0)

  - Add a new workflows guide covering Builder/Edit API usage, topology guarantees, and repair
  - Wire README into doctests and refresh crate-level docs/examples (simplify type annotations, link to workflows)
  - Update README Features + references (kernels, insertion ordering, construction options, validation/repair)
  - Reorganize docs index and archive historical/roadmap material; refresh topology/robustness/validation guides
  - Replace debug `eprintln!` with `tracing` in Hilbert utilities/tests
  - Tweak spell-check + release docs (typos-cli, rename handling, release steps) and update CHANGELOG

### Changed

- **Adjusting the flip budget multiplier and minimum for** [`b071fb7`](https://github.com/acgetchell/delaunay/commit/b071fb7)

  per-insertion repair based on dimension, balancing repair quality
  and construction speed.

- **Modifying cavity boundary resolution to avoid immediate star-split** [`b071fb7`](https://github.com/acgetchell/delaunay/commit/b071fb7)

  fallbacks, retrying with perturbed vertices instead.

- **\`finalize\_bulk\_construction\` called \`repair\_delaunay\_with\_flips\_k2\_k3\`** [`b071fb7`](https://github.com/acgetchell/delaunay/commit/b071fb7)

  seeded from all cells (O(cells × queues/cell)) — prohibitively slow in
  debug/test mode with robust predicates at scale.

- **\`verify\_postcondition\_inverse\_k2\_edges\` / \`\_inverse\_k3\_triangles\` treated** [`b071fb7`](https://github.com/acgetchell/delaunay/commit/b071fb7)

  the `both_positive_artifact`-suppressed `violates = false` case as a
  genuine inverse-flip hit, causing repair passes to abort with false
  postcondition failures.

  Changes:

- **Replace \`repair\_delaunay\_single\_pass\_local\` (cfg(test/debug)-only, no** [`b071fb7`](https://github.com/acgetchell/delaunay/commit/b071fb7)

  snapshot, single attempt) with `repair_delaunay_local_single_pass`
  (unconditional, three FIFO→LIFO→FIFO attempts with TDS snapshot per
  attempt, `max_flips` parameter). Seeded from the star of the inserted
  vertex; O(seed_cells) cost regardless of triangulation size.

- **Change \`finalize\_bulk\_construction\` to use \`repair\_delaunay\_local\_single\_pass\`**
  [`b071fb7`](https://github.com/acgetchell/delaunay/commit/b071fb7)

  seeded from accumulated `soft_fail_seeds` instead of a `None`-seeded global
  repair. An empty seed slice (no soft-fails during insertion) exits with an
  empty queue in O(1). Passing seeds as `&[CellKey]` avoids the full cell-scan.

- **Move connectedness check first in \`Triangulation::is\_valid()\` (O(N·D) BFS** [`b071fb7`](https://github.com/acgetchell/delaunay/commit/b071fb7)

  is cheaper than building the facet map); simplify `validate_global_connectedness`
  to delegate to `Tds::is_connected()`. Update tests that expected other errors
  before connectivity for disconnected configurations.

- **Deduplicate \`extra\_cells\` in \`ConflictError::RidgeFan\`: multiple extra facets** [`b071fb7`](https://github.com/acgetchell/delaunay/commit/b071fb7)

  can come from the same cell; downstream cavity code expects unique keys.

- **Switch \`large\_scale\_debug\` D=4 case from \`FastKernel\` to \`RobustKernel\`.** [`b071fb7`](https://github.com/acgetchell/delaunay/commit/b071fb7)

  Add `DELAUNAY_LARGE_DEBUG_ALLOW_SKIPS=1` to `debug-large-scale-4d-100`.

- **Document workarounds and future architectural work needed** [`b071fb7`](https://github.com/acgetchell/delaunay/commit/b071fb7)

- **Changed: Updates 4D bulk construction known issues doc** [`b071fb7`](https://github.com/acgetchell/delaunay/commit/b071fb7)

  Updates the known issues document for 4D bulk construction to improve
  clarity and formatting, specifically regarding Delaunay validation
  failures and repair convergence issues. Also, reformats a code block
  into a bash code block.

- **Changed: Improves cycle detection in flip repair** [`79bf0e9`](https://github.com/acgetchell/delaunay/commit/79bf0e9)

  Refactors flip cycle detection to include more context for
  debugging. It now incorporates the k-move, flip direction, and
  vertex details in debug tracing. Adds a debug-only test for
  inspecting predicate violations. This change enhances the
  diagnostics capabilities during the flip repair process, aiding in
  the identification and resolution of non-convergent scenarios.
  (Internal change.)

- **Changed: Updates examples to use 100 points instead of 20** [`79bf0e9`](https://github.com/acgetchell/delaunay/commit/79bf0e9)

  Updates the convex hull and triangulation 3D examples to use
  100 randomly generated points instead of 20. This provides a
  more substantial demonstration of the algorithms and their
  performance. Also updates documentation and README to reflect
  these changes.

- **Changed: Adds debug tracing and validation to triangulation** [`79bf0e9`](https://github.com/acgetchell/delaunay/commit/79bf0e9)

  Adds extensive debug tracing to the triangulation construction
  process, including timing and tracing points insertion.

  Improves validation reporting with wall time measurements,
  helping to identify and debug performance bottlenecks
  during large-scale triangulation.

- **Changed: Use bench-target directory for baseline generation** [`0c94dec`](https://github.com/acgetchell/delaunay/commit/0c94dec)

  Updates the baseline generation workflow to use the `bench-target`
  directory instead of `target` for checking out and processing the
  baseline benchmarks. This isolates the baseline generation process
  and avoids potential conflicts with other build processes.

- **Changed: Documents invariants and their rationale** [`0c94dec`](https://github.com/acgetchell/delaunay/commit/0c94dec)

  Adds references to `invariants.md` throughout the documentation
  to provide a centralized location for the theoretical
  background, rationale, and implementation pointers for the
  library's invariants. Also refactors text wrapping in a workflow
  file.

- **Revert changes to flips** [`0c94dec`](https://github.com/acgetchell/delaunay/commit/0c94dec)

- **Changed: Adds cwd=None to mock run\_safe calls** [`0c94dec`](https://github.com/acgetchell/delaunay/commit/0c94dec)

  Adds cwd=None to the mock run_safe calls in the test_hardware_utils.py
  file.

  This change ensures that the mock calls accurately reflect the
  expected behavior of the run_safe_command function, which now
  explicitly sets the cwd to None.

- **Refactors changelog generation to use git-cliff** [`63553fa`](https://github.com/acgetchell/delaunay/commit/63553fa)

  Migrates the changelog generation process from auto-changelog
  to git-cliff for improved maintainability and control over the
  output format. Updates the build process and documentation to
  reflect the change.

- **Raise ChangelogError from \_run\_git\_cliff (preserve stderr logging) so callers can handle failures/cleanup.**
  [`63553fa`](https://github.com/acgetchell/delaunay/commit/63553fa)

- **Tighten indented-block heuristics: avoid treating prose with '=' as code; still recognize assignment-style lines.**
  [`63553fa`](https://github.com/acgetchell/delaunay/commit/63553fa)

- **Docs: update legacy template README to note the git-cliff migration.** [`63553fa`](https://github.com/acgetchell/delaunay/commit/63553fa)

- **Changed: Improves flip algorithm with topology index** [`c4e37ed`](https://github.com/acgetchell/delaunay/commit/c4e37ed)

  Improves flip algorithm by introducing a topology index to
  efficiently check for duplicate cells and non-manifold facets.
  This avoids redundant scans of the triangulation data
  structure, especially during repair operations, by pre-computing
  and storing facet and cell signatures. This change is internal.

- **Changed: Use \`SmallBuffer\` for flip topology index maps** [`c4e37ed`](https://github.com/acgetchell/delaunay/commit/c4e37ed)

  Refactors the flip topology index to use `SmallBuffer` instead of
  `FastHashMap` for storing candidate cell signatures and facet info.

  This change optimizes memory usage and improves performance by
  leveraging the stack allocation and reduced overhead of `SmallBuffer`
  for small datasets, which are common in this context. Removes the
  'internal' flag from the `CandidateFacetInfo` struct as boundary facets
  are no longer tracked.

- **Changed: Optimizes flip algorithm for improved performance** [`c4e37ed`](https://github.com/acgetchell/delaunay/commit/c4e37ed)

  Refactors the flip algorithm to use more efficient data structures
  (SmallBuffer instead of FastHashMap/Vec) and hashing techniques
  (hash-only dedup) to improve performance. Also refactors benchmark
  seed search to avoid `std::process::exit`. These changes significantly
  reduce the time spent in the flip algorithm, leading to faster
  triangulation construction. (internal)

- **Changed: Removes \`CoordinateScalar\` bound from \`Cell\`, \`Tds\`, \`Vertex\`** [`e69f3d1`](https://github.com/acgetchell/delaunay/commit/e69f3d1)

  Relaxes trait bounds on `Cell`, `Tds`, and `Vertex` structs by
  removing the `CoordinateScalar` requirement.

  This change prepares the triangulation data structure for combinatorial
  operations independent of geometry. The `validate` method in `Tds`
  now requires `CoordinateScalar` to perform coordinate validation,
  where applicable. (Internal change).

- **Changed: Clarifies \`Vertex\` constraints and moves \`point\`** [`e69f3d1`](https://github.com/acgetchell/delaunay/commit/e69f3d1)

  Clarifies the `Vertex` struct's constraints, emphasizing
  `CoordinateScalar` requirement for geometric operations and
  serialization but allowing combinatorial use without it.

  Moves the `point` method definition to ensure consistent API
  presentation. (Internal refactoring, no functional change).

- **Changed: Moves \`TopologyEdit\` to \`triangulation::flips\`** [`c491bb9`](https://github.com/acgetchell/delaunay/commit/c491bb9)

  Moves the `TopologyEdit` trait to `triangulation::flips` and renames it to `BistellarFlips`.

  This change involves updating imports and references throughout the codebase and documentation to reflect the new location and name of the trait.

- **Changed: Refactors prelude modules for clarity (internal)** [`c491bb9`](https://github.com/acgetchell/delaunay/commit/c491bb9)

  Streamlines the prelude modules to provide clearer and more
  focused exports for common triangulation tasks. This change
  affects import statements in documentation and examples,
  requiring more specific paths for certain types.

- **Changed: Use borrowed APIs in utility functions** [`bee065b`](https://github.com/acgetchell/delaunay/commit/bee065b)

  Updates `into_hashmap`, `dedup_vertices_exact`,
  `dedup_vertices_epsilon`, and `filter_vertices_excluding`
  functions to accept slices instead of vectors, improving
  performance by avoiding unnecessary cloning.

  This aligns with the Rust agent's preference for borrowed
  APIs, taking references as arguments and returning borrowed
  views when possible, and only taking ownership when required.

- **Changed: Improves Cell::into\_hashmap and Vertex::into\_hashmap** [`bee065b`](https://github.com/acgetchell/delaunay/commit/bee065b)

  Refactors `into_hashmap` functions for `Cell` and `Vertex` to accept
  iterators instead of vectors. This improves flexibility by allowing
  any iterable collection to be converted into a hashmap, and reduces
  unnecessary allocations by avoiding intermediate vector copies.

- **Refactor repeated scalar bounds across geometry/core modules to use the new supertraits** [`abdeeb2`](https://github.com/acgetchell/delaunay/commit/abdeeb2)

- **Allow “supertrait(s)” in cspell** [`abdeeb2`](https://github.com/acgetchell/delaunay/commit/abdeeb2)

  Tests: just ci

- **Changed: Refactors geometry traits for scalar operations** [`abdeeb2`](https://github.com/acgetchell/delaunay/commit/abdeeb2)

  Refactors the geometry traits by introducing a new trait
  `ScalarAccumulative` to encompass common scalar operations,
  enhancing code clarity and maintainability by removing
  redundant trait bounds. This is an internal refactoring with
  no direct impact on external API.

- **Changed: Updates dependencies, internal refactoring** [`abdeeb2`](https://github.com/acgetchell/delaunay/commit/abdeeb2)

  Updates `anyhow`, `criterion`, `proptest`, and `sysinfo`
  dependencies to their latest versions.

  Removes unnecessary `#![allow(missing_docs)]` directives
  from benchmark files, streamlining code.

  Reorders imports in `topology_guarantee_construction.rs`
  for consistency, internal change.

- **Changed: Refactors point access for efficiency (internal)** [`8020065`](https://github.com/acgetchell/delaunay/commit/8020065)

  Simplifies vertex coordinate access using `.coords()` instead of `.into()`,
  improving code clarity and potentially performance. This change is
  internal, affecting predicate calculations and geometric algorithms.
  Also, moves the issue 120 investigation document to the archive.

- **Changed: Forbids unsafe code crate-wide** [`8020065`](https://github.com/acgetchell/delaunay/commit/8020065)

  Applies `#![forbid(unsafe_code)]` attribute across the codebase, enhancing
  code safety and preventing accidental introduction of unsafe operations.

  Also, reorders some imports for better consistency and readability.
  (Internal change).

- **Changed: Simplify coordinate access and hypot usage** [`8020065`](https://github.com/acgetchell/delaunay/commit/8020065)

  Refactors code to directly access vertex coordinates
  instead of creating intermediate copies, improving
  readability and potentially performance.

  Updates `hypot` calls to pass coordinate slices,
  aligning with function expectations and enhancing code
  consistency. These are internal changes to improve
  code quality.

- **Changed: Enforces \`unsafe\_code\` prohibition in geometry utils** [`8020065`](https://github.com/acgetchell/delaunay/commit/8020065)

  Enforces the `#![forbid(unsafe_code)]` directive in several
  modules within the `src/geometry/util/` directory.

  This is an internal change to improve code safety and maintainability
  by preventing the use of unsafe code within these modules.

- **Changed: Improves examples and updates doc tests** [`a1bce55`](https://github.com/acgetchell/delaunay/commit/a1bce55)

  Updates doc tests to use clearer examples and more
  idiomatic syntax, enhancing code readability and
  maintainability. Modifies BistellarFlipKind to use a
  getter method. Addresses issues identified during
  documentation review. (internal)

- **Changed: Improves documentation and adds minor clarifications** [`a1bce55`](https://github.com/acgetchell/delaunay/commit/a1bce55)

  Enhances documentation for bistellar flips and related functions
  to improve clarity and usability. Includes explanations of usage
  and potential errors, as well as formatting of diagnostic summaries.

- **Ensures that random triangulations satisfy Euler characteristic** [`72eb272`](https://github.com/acgetchell/delaunay/commit/72eb272)

  validation to prevent construction errors or invalid classifications.

  Adds a validation function to check topology/Euler validity after
  triangulation construction or robust fallback attempts, catching
  potential issues that can lead to incorrect results. Removes
  redundant validation checks.

  Fixes #98

- **Refactors: Simplify Delaunay repair logic** [`7bc4792`](https://github.com/acgetchell/delaunay/commit/7bc4792)

  Consolidates and simplifies the Delaunay triangulation repair
  logic by extracting common checks and fallback mechanisms into
  separate, reusable functions. This improves code readability
  and maintainability without altering the core repair algorithm.
  Specifically, it reduces code duplication and makes the repair
  process more modular, and fixes local ridge link validation.

  Fixes #179

- **Changed: Refactors insertion logic for better organization** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

  Moves `InsertionResult`, `InsertionStatistics`, and
  `InsertionOutcome` to the `operations` module to better
  organize and clarify the insertion-related logic.
  Additionally, encapsulates the ephemeral insertion/repair
  state into a dedicated `DelaunayInsertionState` struct.

  This change improves code readability and maintainability by
  grouping related types and state management.

- **Changed: Enables explicit topology editing via bistellar flips** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

  Exposes high-level bistellar flip methods for explicit topology
  editing, without automatic Delaunay property restoration. This
  allows users to directly manipulate the triangulation's topology.

  These new functions provide more granular control over
  triangulation structure and enable advanced use cases. (internal)

- **Changed: Revamps benchmarks for clarity and adds topology test** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

  Restructures the benchmarks documentation for better clarity and
  organization, including comprehensive guides for each benchmark.

  Adds a new benchmark, `topology_guarantee_construction.rs`, to
  compare the performance overhead of different topology guarantees
  (PL-manifold vs. pseudomanifold).

  Deprecates and removes the `triangulation_creation.rs` benchmark,
  splitting its functionality into specialized benchmarks.

- **Changed: Improve triangulation construction and validation** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

  Improves triangulation construction by splitting the large `util.rs` module
  into smaller, dedicated modules under `src/core/util/` and wiring them
  explicitly in `src/lib.rs`. It also refactors collection aliases
  for better organization and maintainability. Furthermore,
  accelerates Delaunay property validation by implementing a fast, O(cells),
  flip-based verification, which is ~40-100x faster than the brute-force
  method. Finally, this commit also updates examples to use a fixed seed and
  updates the examples to consistently use an environment variable to allow
  consistent reproduction.

- **Changed: Improve topology guarantee benchmark and utilities** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

  Refactors topology guarantee benchmark to include `PLManifoldStrict`
  and improves robustness.

  Also promotes several geometric utility functions to public,
  refactors from single `util.rs` file to individual modules, and adds
  more tests for comprehensive geometry coverage.

  Changed: (internal) Bump sysinfo and windows dependencies

- **Changed: Improves triangulation robustness and logging** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

  Improves robustness by retrying vertex insertions with
  perturbations in cases of geometric degeneracy. Adds logging
  for validation triggers and safety net events to aid debugging.
  Updates `uuid` and adds `log` dependency.

- **Changed: Improves Delaunay triangulation robustness** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

  Updates the Delaunay triangulation implementation to improve
  robustness in the face of geometric degeneracies. This includes:

- **Upgrading clap and tracing dependencies.** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

- **Retrying Delaunay repair with different queue orders.** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

- **Changed: Improves Delaunay repair diagnostics with tracing** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

  Adds tracing support to the Delaunay triangulation repair algorithm,
  allowing for detailed debugging and performance analysis of the
  flipping process.

  This includes logging of attempt details, queue states, cycle
  detection, and reasons for skipped flips. It also updates tracing-
  subscriber version and adds an init function.

  The tracing is enabled via the DELAUNAY_REPAIR_TRACE environment
  variable.

- **Changed: Improves triangulation validation and policy setting** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

  Enhances the triangulation's validation policy setting to
  warn and revert if an incompatible policy/guarantee
  combination is requested, maintaining data integrity. Also,
  includes an example demonstrating memory analysis across
  different dimensions using triangulation with convex hull
  extraction, including memory usage and timing metrics.

- **Prevents panics during memory analysis and allows skipping instead of exiting.** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

- **Changed: Updates typos-cli installation in CI workflow** [`6168e83`](https://github.com/acgetchell/delaunay/commit/6168e83)

  Updates the typos-cli installation in the CI workflow to use the
  `taiki-e/install-action` for simpler and more reliable installation.
  This aligns with the switch from cspell to typos in the codebase.

- **build: bump rand to 0.10 and trim unused deps** [`fe3e406`](https://github.com/acgetchell/delaunay/commit/fe3e406)

  - Update rand to v0.10 and fix RNG trait imports (use rand::RngExt) in tests/utilities
  - Move test-only crates to dev-dependencies (approx, serde_json)
  - Remove unused runtime dependencies (anyhow, clap, serde_test)
  - Drop clippy allow for multiple_crate_versions
  - Update Cargo.lock and regenerate CHANGELOG.md

### Removed

- **Remove regression test for now** [`0c94dec`](https://github.com/acgetchell/delaunay/commit/0c94dec)

- **CI: simplify benchmarks workflow by removing baseline file copy steps.** [`63553fa`](https://github.com/acgetchell/delaunay/commit/63553fa)

- **Removed: Topology validation prelude module** [`c491bb9`](https://github.com/acgetchell/delaunay/commit/c491bb9)

  Removes the redundant topology validation prelude module.

  Moves its contents into the main topology prelude, simplifying
  module structure and reducing code duplication. This change
  internally refactors the prelude modules for better organization.

- **Removed: \`Zero\` trait bound requirement** [`8020065`](https://github.com/acgetchell/delaunay/commit/8020065)

  Removes the `Zero` trait bound requirement from several functions and
  traits related to Delaunay triangulation and convex hull computation.

  This change simplifies the trait bounds and reduces unnecessary
  restrictions on the scalar types used in geometric computations, as the
  `Zero` trait was not strictly required.

- **Removed: Replace cspell with typos for spell checking** [`4b5e1a1`](https://github.com/acgetchell/delaunay/commit/4b5e1a1)

  Replaces the cspell tool with typos for spell checking across the
  project. This change involves removing cspell configurations and
  dependencies, and integrating typos, including its configuration file.

### Fixed

- **Fixed: Prevents timeout in 4D bulk construction** [`b071fb7`](https://github.com/acgetchell/delaunay/commit/b071fb7)

  Addresses a timeout issue in 4D bulk construction
  by implementing per-insertion local Delaunay repair
  (soft-fail) during bulk construction to prevent
  violation accumulation, which slows down the global
  repair process. Also adds a hard wall-clock time
  limit to the test harness.

- **Fixed: Prevents timeout during bulk construction in 4D** [`b071fb7`](https://github.com/acgetchell/delaunay/commit/b071fb7)

  Addresses timeout issues in 4D bulk construction by:

- **Fixed: Prevents timeout in 4D bulk Delaunay construction** [`b071fb7`](https://github.com/acgetchell/delaunay/commit/b071fb7)

  Addresses a timeout issue in 4D bulk Delaunay construction
  by implementing a per-insertion soft-fail local repair for
  D>=3. This reduces violation accumulation and prevents the
  global repair from processing a prohibitively large queue,
  which was slow in debug mode.

  Also adds tests for the local repair, including dimension
  checks and handling of empty seed sets.

- **Fixed: Handles degenerate cells in locate and triangulation** [`b071fb7`](https://github.com/acgetchell/delaunay/commit/b071fb7)

  Adds tests to cover degenerate cell scenarios in
  `is_point_outside_facet` and `find_conflict_region`, ensuring
  proper error handling when vertex keys are missing from the TDS.

  Also covers additional branches in the cavity reduction loop in
  `insert_with_conflict_region`, specifically `RidgeFan SHRINK`,
  `DisconnectedBoundary EXPAND/SHRINK`, and post-loop error paths,
  improving robustness and preventing potential panics.

  These fixes enhance the stability of the locate and triangulation
  algorithms in edge cases.

- **fix: enable D≥4 per-insertion repair and bound post-construction flip pass** [`b071fb7`](https://github.com/acgetchell/delaunay/commit/b071fb7)

  Root causes of D=4 bulk construction timeouts and false failures:

- **Fix formatting in delaunay\_triangulation.rs** [`b071fb7`](https://github.com/acgetchell/delaunay/commit/b071fb7)

- **Fix clippy unnested-or-patterns in delaunay\_validation.rs** [`b071fb7`](https://github.com/acgetchell/delaunay/commit/b071fb7)

- **Fixed: Prevents inserting existing simplex during flips** [`79bf0e9`](https://github.com/acgetchell/delaunay/commit/79bf0e9)

  Prevents k-flips from inserting a simplex that already
  exists in the triangulation. This avoids non-manifold
  codimension>1 singularities and ensures the Bistellar move
  link condition is upheld.

  Adds a check and error variant
  `InsertedSimplexAlreadyExists`. Also introduces
  `find_cell_containing_simplex` to determine whether the
  simplex already exists, and increases `MAX_REPEAT_SIGNATURE`.

- **Fixed: Improves robustness of Delaunay triangulation tests** [`79bf0e9`](https://github.com/acgetchell/delaunay/commit/79bf0e9)

  Adds several new test cases to increase test coverage and
  robustness. These tests target boundary edge splitting,
  boundary facet visibility, neighbor pointer repairs, conflict
  region extraction, and handling of invalid vertex links. Also
  adds debug logging for conflict resolution.

- **Fixed: Accepts both dotful/dotless performance baseline names** [`0c94dec`](https://github.com/acgetchell/delaunay/commit/0c94dec)

  Fixes an issue where the benchmark tooling only accepted
  performance baseline artifact names with dots, but the
  artifact generation workflow produced names with underscores.

  This change modifies the regex to accept both dotful (vX.Y.Z)
  and dotless (vX_Y_Z) names, ensuring that the benchmark
  comparisons can find and use the correct baseline artifact.

- **Fixed: Prevents non-convergence in Delaunay triangulation** [`0c94dec`](https://github.com/acgetchell/delaunay/commit/0c94dec)

  Addresses a non-convergence issue during Delaunay triangulation batch
  construction by implementing an incremental rebuild fallback when the
  initial bulk construction fails. This ensures robustness for
  problematic point sets. Also adds regression test.

  The baseline fetching in benchmarks is limited to a maximum of 50
  runs to avoid API rate limits and slowdowns, and the tag validation
  regex is updated to allow pre-release and build suffixes.

  uv is now used to run python scripts in generate-baseline.yml workflow.

- **fix(changelog): harden git-cliff integration and commit-body formatting** [`63553fa`](https://github.com/acgetchell/delaunay/commit/63553fa)

- **Fixed: Correctly wires neighbors after K2 flips** [`5ab686c`](https://github.com/acgetchell/delaunay/commit/5ab686c)

  Fixes an issue where external neighbors across the cavity
  boundary were not being correctly rewired after a K2 flip.

  Introduces `external_facets_for_boundary` to collect the set
  of external facets that are shared with the flip cavity boundary,
  and then uses these to correctly wire up neighbors.

  Adds a test case to verify that external neighbors are correctly
  rewired after the flip, ensuring that the triangulation remains
  valid and consistent.

- **Fixed: Corrects kernel parameter passing in triangulation** [`df3c490`](https://github.com/acgetchell/delaunay/commit/df3c490)

  Addresses an issue where the kernel was being passed by value
  instead of by reference in the Delaunay triangulation
  construction. This change ensures that the kernel is correctly
  accessed and used, preventing potential errors and improving
  reliability. The fix involves modifying the `with_kernel` method
  signatures and call sites to accept a kernel reference instead of
  a kernel value. This affects benchmark code, documentation,
  examples, and internal code.

- **Fixed: Improves vertex preprocessing reliability** [`df3c490`](https://github.com/acgetchell/delaunay/commit/df3c490)

  Addresses reliability issues in vertex preprocessing,
  specifically around balanced simplex selection and duplicate
  detection.

  Adds tests to ensure correct handling of insufficient
  vertices, invalid coordinates, and proper fallback
  mechanisms.

  Adds a test-only force-enable flag for duplicate detection
  metrics.

  This enhances the robustness and predictability of
  triangulation construction, particularly in edge cases.

- **Fixed: Improves vertex deduplication reliability** [`df3c490`](https://github.com/acgetchell/delaunay/commit/df3c490)

  Addresses an edge case in vertex deduplication where duplicate
  insertions could succeed incorrectly, leading to triangulation
  errors. This change enhances the robustness of the
  deduplication process, particularly in nearly-degenerate
  configurations. Also improves the hash grid's efficiency by only
  creating when it's usable for the vertices.

  Removes an ignore flag from proptests and upgrades other tests.

- **Fixed: Validates ridge links locally after Delaunay repair** [`7bc4792`](https://github.com/acgetchell/delaunay/commit/7bc4792)

  Addresses potential topology violations (non-manifold configurations)
  introduced by flip-based Delaunay repair by validating ridge links
  for affected cells post-insertion. This prevents committing
  invalid triangulations and surfaces topology validation failures
  as insertion errors, enabling transactional rollback.

- **Fixed: Corrects potential stale vertex key after rebuild** [`7bc4792`](https://github.com/acgetchell/delaunay/commit/7bc4792)

  Addresses a potential issue where the vertex key returned after
  an insertion could become stale if a heuristic rebuild was
  triggered during the automatic flip-repair process.

  This commit ensures that the vertex key is remapped after a
  heuristic rebuild, preventing potential errors related to
  invalidated vertex keys.

- **Fixed: Clears locate hint after heuristic repair** [`7bc4792`](https://github.com/acgetchell/delaunay/commit/7bc4792)

  Ensures that the `last_inserted_cell` hint is cleared after
  a heuristic repair is applied during Delaunay triangulation
  insertion. This prevents potential issues with stale locate
  hints in subsequent insertions.

- **Fixed: Corrects hint handling after local repair** [`7bc4792`](https://github.com/acgetchell/delaunay/commit/7bc4792)

  Addresses an issue where the hint was not correctly handled
  after a local Delaunay repair during point insertion. This could
  lead to incorrect triangulation results. Ensures that the hint
  is properly reset if the heuristic is used, preventing
  potential errors in subsequent operations.

- **Fixed: Stabilizes Delaunay property tests with bistellar flips** [`e3bd4bf`](https://github.com/acgetchell/delaunay/commit/e3bd4bf)

  Enables previously failing Delaunay property tests by
  implementing bistellar flips for robust Delaunay repair.
  Includes automatic repair and fast validation.

  Updates MSRV to 1.93.0.

  Fixes #120

- **Fix: Corrects Delaunay violations with facet flips** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

  Fixes Delaunay violations by implementing k=2 facet flips and a
  queue-based repair loop. This automatically restores the local
  Delaunay property after vertex insertion. Also re-enables 2D/3D
  property tests and provides a manual Delaunay repair entrypoint.

  Refs: #120

- **Fixed: Detects and mitigates flip cycles during repair** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

  Adds cycle detection to the Delaunay repair process to
  identify and handle repeating flip patterns, enhancing
  robustness. Implements a sliding window to track flip
  signatures, detecting recurring patterns that indicate
  potential non-convergence. Adds diagnostics for
  analyzing cycle occurrences.

  Includes related updates to property tests to account
  for increased robustness.

- **Fixed: Repairs Delaunay violations after incremental insertion** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

  Addresses potential Delaunay violations introduced by incremental
  insertion by adding post-insertion repair and validation steps.
  This ensures that the triangulation remains valid even after
  insertions that could lead to violations.

  Includes a deterministic rebuild fallback when local repair fails.

  Adds ConstructionOptions to configure batch construction
  behavior, including deduplication and retry policies. This enables
  deterministic preprocessing and retry behavior for callers.

- **Fixed: Repair fallback and utils robustness improvements** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

  Addresses potential issues in the Delaunay triangulation
  repair mechanism by ensuring a deterministic rebuild
  heuristic is triggered when flip-based repair fails.

  This commit introduces:

- **Repair fallback tests to cover edge cases.** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

- **Robustness improvements to Hilbert sort and vertex** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

  deduplication to prevent panics or unexpected behavior
  in corner cases.

- **Fixes minor documentation issues and updates an example** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

  to include 3D.

- **Fixed: Improves triangulation error handling and logging** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

  Enhances error handling in Delaunay triangulation construction
  by logging detailed error information, including dimension, point
  count, seed, bounds, and sample points, which aids in debugging
  and identifying problematic input configurations. It also improves
  the memory analysis example by retrying triangulation with
  different seeds and point counts and by providing more verbose
  logging, aiding in memory usage analysis and debugging.

  The changes also add coverage logging for proptests when running
  with `DELAUNAY_PROPTEST_COVERAGE_LOGS`, and it avoids running
  proptests in coverage mode by default.

- **Fixed: Improves Delaunay triangulation error handling** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

  Improves error handling in Delaunay triangulation construction by:

- **Fixed: Improves hull extension robustness and logging** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

  Addresses edge cases in hull extension where degeneracies
  could lead to incorrect triangulation by relaxing visibility
  constraints and adding debug logging to better diagnose cavity
  construction and neighbor wiring issues. Also updates clap.

- **Fixed: Addresses degenerate cell creation from flips** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

  Addresses an edge case where Delaunay repair flips could lead to the creation of degenerate cells.

  Adds a check to prevent k=2 flips that would result in a degenerate cell, improving the robustness of the Delaunay triangulation repair process.

  Adds detailed tracing of repair steps, including degenerate flips, to aid in debugging and diagnosing issues.

- **Fixed: Improves hull extension error handling** [`66c7028`](https://github.com/acgetchell/delaunay/commit/66c7028)

  Refactors hull extension error handling to use a structured
  `HullExtensionReason` enum instead of plain strings. This allows
  for more precise error analysis and retry logic during
  incremental insertion.

  Also fixes a couple of error message formatting issues and adds a
  `clippy` exception for a long function.

## [v0.7.0](https://github.com/acgetchell/delaunay/compare/v0.6.2...v0.7.0) - 2026-01-03

### Merged Pull Requests

- Changed: Refactors topology guarantee and manifold validation [`#171`](https://github.com/acgetchell/delaunay/pull/171)

- Feature/manifolds [`#168`](https://github.com/acgetchell/delaunay/pull/168)

- Changed: Refactors Gram determinant calculation with LDLT [`#167`](https://github.com/acgetchell/delaunay/pull/167)

- feat: add public topology traversal API [`#164`](https://github.com/acgetchell/delaunay/pull/164)

### Added

- **Added: Topology-only manifold validation module** [`10abbe1`](https://github.com/acgetchell/delaunay/commit/10abbe1)

  Introduces a new module for topology-only manifold validation,
  independent of geometry and Delaunay predicates. This includes
  functions for validating facet degree and closed boundary
  conditions, enhancing triangulation validation.

- **Added: PL-manifold validation mode to triangulation** [`10abbe1`](https://github.com/acgetchell/delaunay/commit/10abbe1)

  Introduces a `ManifoldValidationMode` to control Level 3 topology
  validation, enabling stricter PL-manifold invariants (ridge-link
  validation) in addition to pseudomanifold checks. This allows users
  to opt into stronger topological guarantees. Adds associated methods
  to set and get manifold validation mode. Adds internal helpers for
  computing ridge stars and links and validating link graphs. Adds
  comprehensive unit tests.

- **Adding connectedness validation to conflict region checks.** [`561a259`](https://github.com/acgetchell/delaunay/commit/561a259)

- **Adding codimension-2 boundary manifoldness validation** [`561a259`](https://github.com/acgetchell/delaunay/commit/561a259)

  ("no boundary of boundary") to triangulation's `is_valid`
  method.

- **Ensuring that strict Level 3 validation is enabled during** [`561a259`](https://github.com/acgetchell/delaunay/commit/561a259)

  batch construction in debug builds.

- **feat: add public topology traversal API** [`3748ebb`](https://github.com/acgetchell/delaunay/commit/3748ebb)
  - API
    - Added: Expose public topology traversal API
  - Tests
    - Add integration tests for topology traversal and adjacency index invariants
  - Other
    - Introduce canonical \`EdgeKey\` and read-only topology traversal helpers on \`Triangulation\`
    - Add opt-in \`AdjacencyIndex\` builder for faster repeated adjacency queries

### Changed

- **Changed: Refactors topology guarantee and manifold validation** [`dfdba5a`](https://github.com/acgetchell/delaunay/commit/dfdba5a)

  Refactors manifold validation mode to topology guarantee for
  clarity. Updates Level 3 validation configuration, improves error
  reporting, and adds comprehensive manifold validation tests.
  Also improves robustness of incremental insertion.

- **Changed: Updates topology guarantee defaults and validation** [`dfdba5a`](https://github.com/acgetchell/delaunay/commit/dfdba5a)

  Updates the default topology guarantee to `Pseudomanifold` for new
  triangulations and deserialized triangulations. Also, clarifies
  validation policy and its relationship to topology guarantees in
  documentation. Introduces a test-only function to repair degenerate
  cells by removing them and clearing dangling references.

- **Changed: Improves PL-manifold validation with vertex-link check** [`dfdba5a`](https://github.com/acgetchell/delaunay/commit/dfdba5a)

  Replaces ridge-link validation with vertex-link validation for
  PL-manifold topology guarantee. This change provides a more
  robust and canonical check for PL-manifoldness, ensuring that
  the link of every vertex is a sphere or ball of the appropriate
  dimension.

  Refs: #120

- **Changed: Updates documentation and enhances topology validation** [`dfdba5a`](https://github.com/acgetchell/delaunay/commit/dfdba5a)

  Refactors and improves manifold validation, including vertex-link
  checks and updates to topology guarantee defaults. Also renames
  WARP.md to AGENTS.md and updates references.

- **Changed: Refactors manifold validation mode to topology guarantee** [`10abbe1`](https://github.com/acgetchell/delaunay/commit/10abbe1)

  Renames `ManifoldValidationMode` to `TopologyGuarantee` for clarity.

  Updates Level 3 validation configuration and documentation to
  reflect the change. The purpose is to clarify that this setting
  controls the level of topological guarantees provided, rather than
  just a validation mode.

- **Changed: Refactors and adds manifold validation tests** [`10abbe1`](https://github.com/acgetchell/delaunay/commit/10abbe1)

  Refactors internal neighbor buffer initialization for potential
  future use. Adds comprehensive tests for manifold validation
  logic, including constructors, and ridge link conditions,
  ensuring robust topology guarantees.

- **Changed: Refactors Gram determinant calculation with LDLT** [`561a259`](https://github.com/acgetchell/delaunay/commit/561a259)

  Refactors the Gram determinant calculation to use LDLT factorization from the `la-stack` crate for improved efficiency and numerical stability by exploiting
  symmetry.

  Also, updates the `la-stack` dependency version.

- **Changed: Rename SimplexCounts to FVector for clarity** [`561a259`](https://github.com/acgetchell/delaunay/commit/561a259)

  Renames the `SimplexCounts` struct to `FVector` to better reflect
  its mathematical meaning as the f-vector in topology, representing
  the counts of simplices of different dimensions.

  This change improves code readability and aligns the naming
  convention with standard topological terminology.
  (Internal refactoring, no API change.)

- **Changed: Improves simplex generation algorithm** [`561a259`](https://github.com/acgetchell/delaunay/commit/561a259)

  Improves the algorithm for generating simplex combinations in
  the Euler characteristic calculation. This change enhances
  efficiency by using a lexicographic approach to generate
  combinations, reducing unnecessary computations.

- **Changed: Improve simplex generation by pre-sorting vertex keys** [`561a259`](https://github.com/acgetchell/delaunay/commit/561a259)

  Speeds up simplex generation within Euler characteristic calculation by
  pre-sorting vertex keys for cells and facets. This eliminates
  per-combination sorting during simplex insertion, as combinations are
  generated in sorted order from sorted input. Adds a test case for
  `insert_simplices_of_size`.

- **Changed: Updates serde\_json dependency to v1.0.149** [`561a259`](https://github.com/acgetchell/delaunay/commit/561a259)

  Updates the serde_json dependency from v1.0.148 to v1.0.149.

  Also, fixes a bug in the `insert_simplices_of_size` function in
  `euler.rs`, where the loop condition was incorrect, causing
  potential issues when generating combinations.

  Adds tests for classifying a closed 2D surface (sphere) and counting
  boundary simplices to verify correct topological classification and
  boundary detection.

- **Refresh repo tooling/CI configs and supporting scripts/tests** [`3748ebb`](https://github.com/acgetchell/delaunay/commit/3748ebb)

- **Changed: Exposes public topology traversal API** [`3748ebb`](https://github.com/acgetchell/delaunay/commit/3748ebb)

  Makes topology traversal APIs public for external use.

  Exposes `edges()`, `incident_edges()`, and `cell_neighbors()` on the
  `DelaunayTriangulation` struct as convenience wrappers. Updates
  documentation, examples, and benchmarks to use new API.

  This allows external users to traverse the triangulation's topology
  without needing to access internal implementation details.

- **Changed: Expose topology query APIs on DelaunayTriangulation** [`3748ebb`](https://github.com/acgetchell/delaunay/commit/3748ebb)

  Exposes cell and vertex query APIs on `DelaunayTriangulation` for zero-allocation topology traversal.

  Also includes internal refactoring to improve vertex incidence
  validation and ensure more robust handling of invalid key references.
  Now TDS validation detects isolated vertices.

- **refactor: rename DelaunayTriangulation triangulation accessors** [`3748ebb`](https://github.com/acgetchell/delaunay/commit/3748ebb)

- **Rename DelaunayTriangulation::{triangulation, triangulation\_mut} -> {as\_triangulation, as\_triangulation\_mut}**
  [`3748ebb`](https://github.com/acgetchell/delaunay/commit/3748ebb)

- **Update all in-tree call sites (core, geometry, tests, docs, examples, benches) to use the new names**
  [`3748ebb`](https://github.com/acgetchell/delaunay/commit/3748ebb)

- **Refresh validation/docs snippets to match the new API** [`3748ebb`](https://github.com/acgetchell/delaunay/commit/3748ebb)

  BREAKING CHANGE: DelaunayTriangulation::triangulation() is now as_triangulation(); triangulation_mut() is now as_triangulation_mut().

- **Changed: Clarifies TDS validation and API docs** [`3748ebb`](https://github.com/acgetchell/delaunay/commit/3748ebb)

  Updates documentation to clarify isolated vertex handling during
  triangulation data structure (TDS) validation levels.

  Also enhances API documentation for the public topology API.
  Changed descriptions for better user understanding.

- **Changed: Updates CHANGELOG.md for unreleased changes** [`271353f`](https://github.com/acgetchell/delaunay/commit/271353f)

  Updates the changelog to reflect recent changes, including adding
  a new public topology traversal API, refreshing repository
  tooling/CI configurations, and clarifying TDS validation and API
  documentation.

### Fixed

- **Fixed: Corrects triangulation perturbation logic** [`dfdba5a`](https://github.com/acgetchell/delaunay/commit/dfdba5a)

  Fixes a bug in the vertex insertion perturbation logic that
  caused non-equivalent results when translating the input
  point set by using a translation-invariant anchor for
  perturbation scaling.

  Also, preserves the caller-provided vertex UUID across
  perturbation retries to maintain vertex identity.

  Updates documentation on topology guarantees to clarify
  manifoldness invariants.

- **Fixed: Detects non-PL manifold vertex links** [`dfdba5a`](https://github.com/acgetchell/delaunay/commit/dfdba5a)

  Fixes an issue where vertex link validation incorrectly passed
  for non-PL manifolds like a cone over a torus.

  This commit enhances the vertex link validation to explicitly
  reject configurations where the vertex link is homeomorphic
  to a torus instead of a sphere or disk.  This is achieved by
  evaluating the Euler characteristic and boundary component
  count of the triangulated surface representing the link.

- **Fixed: Improves manifold validation and error reporting** [`10abbe1`](https://github.com/acgetchell/delaunay/commit/10abbe1)

  Addresses several issues in manifold validation, including facet
  multiplicity checks, boundary facet handling, and ridge link
  validation.

  Improves error reporting by including facet keys in error messages
  for easier debugging. Also resets the topology guarantee to
  `Pseudomanifold` when constructing from `from_tds`. Adds
  deduplication of parallel edges to increase robustness against
  corrupted data.

- **Fixed: Improves robustness of incremental insertion** [`561a259`](https://github.com/acgetchell/delaunay/commit/561a259)

  Addresses rare topological invalidations during incremental
  insertion by:

## [v0.6.2](https://github.com/acgetchell/delaunay/compare/v0.6.1...v0.6.2) - 2026-01-01

### Merged Pull Requests

- chore(rlease): release v0.6.2 [`#162`](https://github.com/acgetchell/delaunay/pull/162)

- Refactor/validation hierarchy [`#157`](https://github.com/acgetchell/delaunay/pull/157)

### Added

- **Add performance results for v0.6.2** [`66df9a6`](https://github.com/acgetchell/delaunay/commit/66df9a6)

- **Add deterministic unit tests covering core error branches (Cell/TDS/util/incremental insertion), incl. overflow, missing keys, non-manifold cases, and**
  [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)
  - API
    - Introduce topology-layer \`TriangulationValidationError\` with structured manifold + Euler variants
  - Other
    - Add \`DelaunayTriangulationValidationError\` and update \`DelaunayTriangulation::{is\_valid, validate}\` signatures
    - Introduce layered construction errors: TdsConstructionError, TriangulationConstructionError, DelaunayTriangulationConstructionError

### Changed

- **Bump version to v0.6.2** [`66df9a6`](https://github.com/acgetchell/delaunay/commit/66df9a6)

- **Update changelog with latest changes** [`66df9a6`](https://github.com/acgetchell/delaunay/commit/66df9a6)

- **Update documentation for release** [`66df9a6`](https://github.com/acgetchell/delaunay/commit/66df9a6)

- **refactor(validation): reduce public validation API to canonical layer methods** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

- **Make focused invariant validators internal; keep only \`is\_valid\`/\`validate\` as the public entry points (plus**

  **\`DelaunayTriangulation::validation\_report\` for cumulative diagnostics).**

- **refactor: split validation errors by layer (TDS/topology/Delaunay)** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

- **Rename TDS validation error to \`TdsValidationError\` and update call sites across core/geometry**
  [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

- **refactor: layer construction errors (TDS/Triangulation/Delaunay)** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

- **Update DelaunayTriangulation constructors and insertion plumbing to propagate layered errors consistently**
  [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

- **Refresh docs to match current validation hierarchy + error layering; mark superseded topology integration notes as historical**
  [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

- **Changed: Refactors validation error hierarchy internally** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

  Consolidates and standardizes the validation error types
  within the triangulation data structure (TDS) to improve
  internal error handling and consistency. Replaces
  `TriangulationValidationError` with `TdsValidationError`
  where appropriate, streamlining the error reporting
  across the library. Updates error propagation to maintain
  semantic accuracy.

- **refactor: clarify validation hierarchy and expand core test coverage** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

- **Make validation layering explicit (elements → TDS structure → topology) and expose a cumulative validation\_report API**
  [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

- **Preserve underlying layer errors in TriangulationValidationReport; update docs/examples accordingly**
  [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

- **Clarify facet-cache error semantics and plumb source errors through convex-hull boundary facet extraction**
  [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

- **Changed: Refactors triangulation validation for clarity** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

  Refactors triangulation validation in `DelaunayTriangulation`
  to improve clarity and correctness. It streamlines the
  validation process, reusing the lower-layer report more
  effectively and ensuring that Delaunay property violations
  are handled correctly.

  The `TdsValidationError` enum is also updated and a
  `TdsMutationError` alias is created to provide clearer
  semantics for mutation operations.

  A deprecated function `is_delaunay` is updated to reference
  `DelaunayTriangulation::is_valid()` and
  `DelaunayTriangulation::validate()` methods.

  Finally, the 3D insertion order robustness property test is
  specialized to avoid nearly-coplanar tetrahedra and
  co-spherical 5-tuples, focusing on pure insertion-order
  robustness.

- **Changed: Improves robustness of triangulation insertion** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

  Enhances triangulation insertion robustness by adding
  connectedness validation and preventing empty conflict
  regions. It also introduces star-split fallback for
  topology preservation and refactors boundary handling.
  These changes ensure a more reliable triangulation
  process.

- **Changed: Refactors TDS validation and mutation errors** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

  Refactors the `TdsValidationError` and `TdsMutationError` types to
  improve clarity and future extensibility. Introduces a wrapper
  struct for `TdsMutationError` to allow for independent evolution
  while maintaining API compatibility. Also improves the error
  handling during triangulation construction and modification.

- **perf: Adjust global validation checks** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

  Now that we have a validation hierarchy, we want to run expensive global checks, which are often O(N*D^2), only when we have a suspicion that something has
  gone wrong. Like CGAL, we want to rely on local checks and only call is_valid() when necessary. So, introduce a ValidationPolicy with SuspicionFlags. Then we
  only call expensive checks when insertions wander off the happy path, or if the caller decides they want different guarantees (e.g. Never, Always, DebugOnly).

  Also fix a bunch of other fixes related to code reviews.

- **Changed: Enhances topology validation and repair** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

  Refactors topology validation to include connectedness checks
  and provides more robust error reporting. Introduces automatic
  validation policies for incremental insertions, balancing
  performance and safety. Improves neighbor pointer repair
  logic and adds validation against neighbor cycles.

  These changes aim to improve the reliability of the triangulation
  process by ensuring a valid topology and reducing the likelihood
  of disconnected components and non-manifold facets.
  (Internal change: improves validation and repair logic)

- **Changed: Enhances triangulation validation and testing** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

  Updates the triangulation validation process to use the
  `validate()` method, providing more comprehensive checks
  (Levels 1-4).

  Also improves proptest to avoid pathological cases with
  duplicate coordinates or points on a coordinate hyperplane,
  leading to more robust and reliable tests. (Internal)

- **Changed: Improves error reporting with cell UUIDs** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

  Enhances error reporting in Delaunay triangulation validation by
  including cell UUIDs in error messages. This allows for better
  debugging and log correlation when issues arise during
  validation. Introduces a helper function to avoid repetition.

- **Changed: Removes unused imports in tests (internal)** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

  Removes unused imports from several test modules to improve
  code cleanliness and reduce potential confusion. This change
  is internal and does not affect the functionality of the code.

### Deprecated

- **Adjust tests/proptests/benches to validate at the appropriate layer (e.g., Level 1–2 during bootstrap, Level 1–3 for topology) and avoid deprecated**

  **helpers.**

### Removed

- **Removed: Deprecates global facet sharing fix** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

  Removes the deprecated `fix_invalid_facet_sharing` methods from both
  `DelaunayTriangulation` and `Triangulation`.

  These methods performed a global O(N·D) scan and have been superseded
  by the more efficient localized O(k·D)
  `detect_local_facet_issues` + `repair_local_facet_issues` flow.

  This change encourages the use of the localized repair approach, which
  is more performant for incremental updates to the triangulation.

### Fixed

- **Update docs/README and examples/benches to reflect the 4-level validation hierarchy and correct per-layer semantics.**
  [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

- **Fix commit-check/clippy issues (missing \`# Errors\` docs, similar-name locals, deprecated \`is\_delaunay\`, private API usage in benches).**
  [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

- **Update insertion/boundary/facet plumbing to use the correct layer error types** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

- **Fix rustdoc links and cspell/markdownlint fallout from the refactor** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

- **Fix geometry helpers/tests to match wrapped construction error variants** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

- **Fixed: Improve TDS validation and Delaunay error handling** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

  Improves triangulation data structure (TDS) validation by adding a
  check for missing vertex keys in cells, preventing inconsistent state
  and improving error diagnostics.

  Enhances Delaunay validation to include cell keys in error messages,
  aiding debugging.

  These changes improve the overall robustness and diagnosability of
  the triangulation process.

- **Fixed: Correctly classify cavity boundary facets** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

  Classifies cavity boundary facets by facet incidence within the
  conflict region, ensuring accurate boundary detection during
  incremental updates.

  This avoids misclassification due to temporarily incomplete neighbor
  pointers, preventing internal boundary components and Euler/topology
  validation failures.

  Also adds debug-only safety net to retry cavity-based insertions
  with a conservative fallback (star-split) if Level 3 topology
  validation fails. This ensures robust handling of degenerate cases
  during incremental Delaunay triangulation construction.

- **Fixed: Addresses potential triangulation validation failures** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

  Fixes edge cases in triangulation validation and error handling,
  particularly around star-split fallback scenarios. Improves
  robustness by refining error messages and ensuring consistent
  behavior across debug and release builds. Also fixes a potential
  issue with duplicate points in triangulation.

- **Refactor: Improves triangulation validation and error reporting** [`c23cefb`](https://github.com/acgetchell/delaunay/commit/c23cefb)

  Refactors triangulation validation by restructuring the error
  hierarchy to avoid circular dependencies between TDS and
  Triangulation validation errors.

  This change also improves the documentation around the
  validation levels and their performance implications, providing
  better guidance for users.

  Internally, the `remove_cells_by_keys` method in `Tds` is
  enhanced to incrementally repair `incident_cell` pointers and
  neighbor references, optimizing vertex removal operations. This
  avoids global rebuilds.

## [v0.6.1](https://github.com/acgetchell/delaunay/compare/v0.6.0...v0.6.1) - 2025-12-08

### ⚠️ Breaking Changes

- **Bump MSRV from 1.91.0 to 1.92.0 across all configurations** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **\`insert\_with\_statistics\` now returns \`Result<(InsertionOutcome, InsertionStatistics), InsertionError>\`**
  [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **\`insert\_transactional\` signature changed to match new return type** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **\`insert\_with\_statistics\` provides detailed outcomes for both successful and skipped insertions**
  [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Duplicates return \`Ok(Skipped)\` instead of \`Err\`, allowing batch insertion to continue**
  [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

### Merged Pull Requests

- perf: migrate geometry predicates to la-stack [`#155`](https://github.com/acgetchell/delaunay/pull/155)

- feat: add InsertionOutcome return type with insertion statistics [`#147`](https://github.com/acgetchell/delaunay/pull/147)

- perf: make DenseSlotMap default storage backend [`#146`](https://github.com/acgetchell/delaunay/pull/146)

- feat: add dimensional-generic topology module with Euler validation [`#145`](https://github.com/acgetchell/delaunay/pull/145)

### Added

- **Add StackMatrixDispatchError (UnsupportedDim/La) and try\_with\_la\_stack\_matrix! helper**
  [`3ac8b11`](https://github.com/acgetchell/delaunay/commit/3ac8b11)

- **feat: add InsertionOutcome and refactor InsertionStatistics with duplicate handling** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)
  - API
    - Add \`InsertionOutcome\` enum with \`Inserted\` and \`Skipped\` variants
    - New \`InsertionOutcome\` type in \`src/core/algorithms/incremental\_insertion.rs\`
    - Added convenience \`insert\_with\_statistics\` method to \`DelaunayTriangulation\`
    - Add \`InsertionOutcome\` enum with variants \`Inserted\` and \`Skipped\`
    - Add \`InsertionResult\` enum to replace multiple boolean fields in \`InsertionStatistics\`
  - Behavior
    - Debug logging added for skipped insertions during construction
    - Enable observability of perturbation retries and skip reasons
  - Tests
    - Add comprehensive test suite in \`tests/insert\_with\_statistics.rs\` (575 lines)
    - Add \`tests/check\_perturbation\_stats.rs\` for perturbation effectiveness analysis
  - Other
    - Add duplicate coordinate detection (1e-10 tolerance) in insertion path
    - Add \`Triangulation::insert\_with\_statistics()\` and \`DelaunayTriangulation::insert\_with\_statistics()\`

- **Align storage-backend comparison tooling (local + Slurm) with the new feature/default behavior**
  [`7dfd42a`](https://github.com/acgetchell/delaunay/commit/7dfd42a)

- **Misc hygiene: ignore storage comparison outputs, fix markdownlint line wrap, add spellcheck word**
  [`7dfd42a`](https://github.com/acgetchell/delaunay/commit/7dfd42a)

- **Add a SlotMap clippy pass (--no-default-features) to prevent bit-rot** [`7dfd42a`](https://github.com/acgetchell/delaunay/commit/7dfd42a)

- **feat: add dimensional-generic topology module with Euler validation** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)
  - API
    - Add stub \`with\_topology()\` methods in both Triangulation and DelaunayTriangulation
    - Add TODO comments for future generic scalar type support (\`T: CoordinateScalar\`)
    - Add clarifying comment to \`TopologyError::EulerMismatch\` variant (reserved for future use)
    - Add \`#\[allow(clippy::missing\_panics\_doc)\]\` since expect() enforces internal invariant
  - Other
    - Add commented-out \`topology\` field in Triangulation struct
    - Add \`const DIM: usize\` associated constant to match \`Tds<T, U, V, D>\` dimension
    - \`EuclideanSpace<const D: usize>\` now implements \`const DIM: usize = D\`
    - \`SphericalSpace<const D: usize>\` now implements \`const DIM: usize = D\`
    - Add topology module structure to directory tree

- **feat: add --partition and --account options to slurm storage comparison script** [`d249077`](https://github.com/acgetchell/delaunay/commit/d249077)

  Add command-line options to override Slurm partition and account settings
  when submitting storage comparison benchmarks, with defaults of med2 and
  adamgrp respectively.

  - Add --partition=NAME option to specify queue (default: med2)
  - Add --account=NAME option to specify allocation (default: adamgrp)
  - Update help text with new options and usage examples
  - Pass options through to sbatch invocation
  - Display account and partition in job submission confirmation

### Changed

- **perf: migrate geometry predicates to la-stack** [`3ac8b11`](https://github.com/acgetchell/delaunay/commit/3ac8b11)

- **Geometry:** [`3ac8b11`](https://github.com/acgetchell/delaunay/commit/3ac8b11)

- **Refactor predicates + robust predicates to use la-stack determinant/LU and shared tolerance helpers.**
  [`3ac8b11`](https://github.com/acgetchell/delaunay/commit/3ac8b11)

- **Update circumcenter + Gram-matrix utilities to solve via la-stack LU (no inversion) and compute Gram determinants with la-stack.**
  [`3ac8b11`](https://github.com/acgetchell/delaunay/commit/3ac8b11)

- **Tests:** [`3ac8b11`](https://github.com/acgetchell/delaunay/commit/3ac8b11)

- **Switch predicate/utility call sites to fallible dispatch and propagate via existing error types**
  [`3ac8b11`](https://github.com/acgetchell/delaunay/commit/3ac8b11)

- **Keep with\_la\_stack\_matrix! as the panic-on-programmer-error variant for internal uses**
  [`3ac8b11`](https://github.com/acgetchell/delaunay/commit/3ac8b11)

- **refactor(geometry): reduce duplication and clarify tolerance/degeneracy docs** [`3ac8b11`](https://github.com/acgetchell/delaunay/commit/3ac8b11)

- **Compute adaptive tolerance before consuming matrices for determinant evaluation (predicates + robust predicates)**
  [`3ac8b11`](https://github.com/acgetchell/delaunay/commit/3ac8b11)

- **Factor robust insphere (D+2)x(D+2) matrix assembly into a shared helper to keep layouts in sync**
  [`3ac8b11`](https://github.com/acgetchell/delaunay/commit/3ac8b11)

- **Clarify CoordinateConversionError::ConversionFailed coordinate\_index semantics for non-per-coordinate failures**
  [`3ac8b11`](https://github.com/acgetchell/delaunay/commit/3ac8b11)

- **\`Inserted\` variant includes optional \`hint\` for next insertion optimization** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Skipped insertions return statistics without throwing error in statistics path** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

  Improvements:

- **Construction loop now caches hint from successful insertions for performance** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Better distinction between retryable and fatal insertion errors** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Updated APIs in \`Triangulation\` and \`DelaunayTriangulation\` traits** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Updated test \`check\_perturbation\_stats.rs\` to match on outcomes** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Re-exported \`InsertionOutcome\` in prelude** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Variants: \`Inserted\`, \`SkippedDuplicate\`, \`SkippedDegeneracy\`** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Accessor methods: \`success()\`, \`skipped()\`, \`used\_perturbation()\`, \`skipped\_duplicate()\`**
  [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Tracked separately via \`InsertionResult::SkippedDuplicate\`** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Return \`(InsertionOutcome, InsertionStatistics)\` tuple** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Make error types Clone for use in \`InsertionOutcome::Skipped\`** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

  Tests:

- **Coverage for 2D-5D dimensions** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Bootstrap phase, hint caching, perturbation, duplicates** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Statistics invariants and outcome variants** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Update serialization tests to expect duplicate skipping behavior** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Clarify \`InsertionOutcome::Skipped\` semantics (transactional rollback for duplicates or exhausted perturbations)**
  [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Use scalar duplicate tolerance (1e-10) with squared-distance comparison in triangulation insertion**
  [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Strengthen tests around perturbation stats, skipped counts, and repair cell removal bounds**
  [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Update serialization tests to assert vertex count matches unique input coordinates** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Changed: Improves retry and skip logic for vertex insertion** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

  Enhances the vertex insertion process by refining the retry
  mechanism and skip logic. If a retryable error occurs during
  insertion, the algorithm now perturbs the vertex up to a
  maximum number of attempts. If these attempts are exhausted,
  or if the vertex is a duplicate, the insertion is skipped.
  This change makes the insertion process more robust and
  efficient. Also updates test case to accurately track
  successful attempts for calculating average perturbation
  attempts.

- **perf: make DenseSlotMap default storage backend** [`7dfd42a`](https://github.com/acgetchell/delaunay/commit/7dfd42a)

- **Switch default Cargo feature set to \`dense-slotmap\` (SlotMap remains available via \`--no-default-features\`)**
  [`7dfd42a`](https://github.com/acgetchell/delaunay/commit/7dfd42a)

- **Archive Phase 4 doc under \`docs/archive/\` (no stub left in \`docs/\`) and update references**
  [`7dfd42a`](https://github.com/acgetchell/delaunay/commit/7dfd42a)

- **ci: stabilize benchmark CI and keep SlotMap backend exercised** [`7dfd42a`](https://github.com/acgetchell/delaunay/commit/7dfd42a)

  Run same-runner A/B perf comparisons in benchmarks workflow and upload baseline/harness artifacts for debugging

- **Reduce CI benchmark variance by pre-generating inputs and timing only triangulation construction**
  [`7dfd42a`](https://github.com/acgetchell/delaunay/commit/7dfd42a)

- **Docs: mark Phase 4 complete, standardize \`dense-slotmap\` naming, document SlotMap selection, and label \`topology-validation\` as proposed**
  [`7dfd42a`](https://github.com/acgetchell/delaunay/commit/7dfd42a)

- **Simplex counting and Euler characteristic (χ) calculation for any dimension** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **Topology classification (Empty, SingleSimplex, Ball, ClosedSphere, Unknown)** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **Complete validation with detailed diagnostics** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **Stub topology space types (Euclidean, Spherical, Toroidal) for future work** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

  Refactoring:

- **Replace with generic \`validate\_triangulation\_euler()\` using f-vector** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **Integrate topology module into \`Triangulation::validate\_manifold()\`** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **Use \`TopologyCheckResult\` for richer validation diagnostics** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

  Architecture:

- **Document delegation pattern: DelaunayTriangulation → Triangulation layer** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **Mark future work requiring bistellar flips + robust insertion (v0.7.0+)** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

  Module Structure:

- **\`topology::traits\` - TopologicalSpace trait and error types** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **\`topology::characteristics\` - Euler characteristic and validation** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **\`topology::spaces\` - Concrete space implementations (stubs with full docs)** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

  Testing:

- **797 tests pass (795 passed, 2 ignored)** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **277 doctests pass (10 ignored)** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **All lint checks pass (clippy pedantic/nursery/cargo, rustdoc)** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **Comprehensive documentation with examples** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

  Closes dimensional limitation for topology validation; enables future support for non-Euclidean spaces once bistellar flips are implemented.

- **Replace const generic array parameters with slices to avoid unstable feature requirements**
  [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **Update \`canonicalize\_point(&self, coords: &mut \[f64\])\` to use mutable slice** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **Update \`fundamental\_domain(&self) -> Option<&\[f64\]>\` to return slice reference** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **\`ToroidalSpace<const D: usize>\` correctly returns \`Some(&self.domain)\` in fundamental\_domain()**
  [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

  Error Handling Improvements:

- **Replace \`unwrap\_or(0)\` with explicit \`expect()\` in validate\_manifold() for clearer invariant**
  [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **Dimension known at compile time via \`const DIM\`** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **Runtime dimension checks possible via slice lengths** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **Future \`Triangulation<K, U, V, D>\` can verify \`topology.DIM == D\`** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **Prevents dimension mismatches between topology space and triangulation** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

  Testing:

- **797 tests pass (795 passed, 2 ignored)** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **277 doctests pass (10 ignored)** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **All lint checks pass (clippy pedantic/nursery/cargo, rustdoc)** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

  Addresses code review feedback on dimension handling and error clarity.

- **docs: update code organization for new topology module** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **Document topology submodules: characteristics, spaces, traits** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **Include descriptions for euler.rs, validation.rs, and space implementations** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **count\_boundary\_simplices() - extracts boundary facets and counts unique** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

  vertices, boundary facets, and intermediate k-simplices on boundary

- **count\_k\_simplices\_on\_boundary() - helper for enumerating k-simplices** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

  from boundary facet vertex combinations

- **Returns SimplexCounts for (D-1)-dimensional boundary complex** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **Expected χ values: S¹→0, S²→2, S³→0, S⁴→2 (formula: χ(Sᵏ) = 1+(-1)ᵏ)** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

  Testing - Euler characteristic:

- **tests/euler\_characteristic.rs: 11 deterministic tests including new** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

  macro-based tests (test_complex_with_interior) for 2D-5D with interior
  points that verify both full complex (χ=1) and boundary (χ varies)

- **tests/proptest\_euler\_characteristic.rs: 12 property-based tests across** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

  2D-5D with skip logic for known numerical degeneracies (TODO: remove
  once bistellar flips handle ridge fans and degenerate configurations)

  Testing - Topological spaces (21 new unit tests):

- **EuclideanSpace: tests for kind(), allows\_boundary(), canonicalize\_point(),** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

  fundamental_domain(), Default trait, and dimension consistency across 2D-5D

- **SphericalSpace: tests for closed manifold properties, no-op canonicalization** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

  (TODO: normalize to unit sphere), and dimension consistency

- **ToroidalSpace: tests for periodic boundaries, fundamental domain storage,** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

  canonicalize_point() (TODO: wrap into domain), and various domain sizes

- **Uses approx crate for floating-point comparisons to satisfy clippy** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

  Results:

- **Property tests pass with degeneracy skips for incomplete complexes** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **Cross-validates simplex counting, boundary detection, and topology** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **Full suite: 816 lib + 278 doc + 484 Python tests pass** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **Updated docs/code\_organization.md with new test files** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

  The boundary computation provides efficient validation without requiring
  separate TDS construction, following YAGNI principle while enabling robust
  topological verification across multiple dimensions.

- **docs: canonicalize validation guide and refresh performance results (see benches/PERFORMANCE_RESULTS.md)**
  [`7ab0bdf`](https://github.com/acgetchell/delaunay/commit/7ab0bdf)

  - Make docs/validation.md the canonical reference for the 4-level validation hierarchy
  (including focused structural invariant helpers and Issue #120 caveats for Level 4).
  - Shorten crate-level docs in src/lib.rs to avoid duplicating validation details while
  keeping an overview + link to the guide.
  - Update benches/PERFORMANCE_RESULTS.md with refreshed benchmark data and metadata.

- **docs: enhance Slurm script documentation with CLI options** [`72f7f24`](https://github.com/acgetchell/delaunay/commit/72f7f24)

  - Add command-line option examples for partition and account configuration
  - Document all available CLI flags (--large, --time, --partition, --account, --help)
  - Add example combining multiple options
  - Clarify that CLI arguments override script header defaults
  - Add "myaccount" to cspell.json dictionary (placeholder account name)

### Removed

- **Remove nalgebra from circumsphere\_debug\_tools and update remaining predicate/util tests accordingly.**
  [`3ac8b11`](https://github.com/acgetchell/delaunay/commit/3ac8b11)

- **Remove Phase 4–specific \`just\` recipes while keeping storage-backend comparison workflows**
  [`7dfd42a`](https://github.com/acgetchell/delaunay/commit/7dfd42a)

- **Remove 200+ lines of dimension-specific (0D-5D) Euler validation code** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

### Fixed

- **Replace nalgebra-backed dynamic matrices with la-stack fixed-size matrices via macro dispatch (D+1 / D+2).**
  [`3ac8b11`](https://github.com/acgetchell/delaunay/commit/3ac8b11)

- **fix(geometry): avoid panic in stack-matrix dispatch** [`3ac8b11`](https://github.com/acgetchell/delaunay/commit/3ac8b11)

- **Clarify clamp\_gram\_determinant docs: clamping is numerical hygiene; zero/non-positive determinants are treated as degenerate**
  [`3ac8b11`](https://github.com/acgetchell/delaunay/commit/3ac8b11)

- **Updated numerical robustness guide with \`InsertionOutcome\` usage examples** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

  Implementation:

- **Fixes clippy::struct\_excessive\_bools warning** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **fix: skip duplicate coordinate inserts and tighten insertion stats** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Improve construction-time error mapping into \`TriangulationConstructionError\`** [`ba96912`](https://github.com/acgetchell/delaunay/commit/ba96912)

- **Update docs/tests to reflect the new default and the correct build/test commands for each backend**
  [`7dfd42a`](https://github.com/acgetchell/delaunay/commit/7dfd42a)

- **Fix storage backend comparison attribution by clearing Criterion output between runs and making backend flags explicit**
  [`7dfd42a`](https://github.com/acgetchell/delaunay/commit/7dfd42a)

- **refactor: improve TopologicalSpace trait design and error clarity** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

  Redesign TopologicalSpace trait to use associated const DIM and slices,
  addressing dimension mismatch issues and improving type safety for future topology-aware triangulations.

  Trait Improvements:

- **Fix SLURM script to inherit environment variables properly** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

  The topology module provides topological invariant computation (Euler
  characteristic) and validation for triangulations across different
  topological spaces (Euclidean, spherical, toroidal).

- **All deterministic tests pass with correct boundary χ values** [`e30dbab`](https://github.com/acgetchell/delaunay/commit/e30dbab)

- **Fix: Correctly generate and upload Codacy SARIF reports** [`3645ab4`](https://github.com/acgetchell/delaunay/commit/3645ab4)

  Fixes the Codacy workflow to correctly generate and upload SARIF reports.

  This involves creating a dedicated workspace, ensuring the SARIF file is correctly located and formatted, and handling cases where no issues are found.

  The changes also include setting a timeout, skipping uncommitted files, and improving error handling.

- **fix(ci): increase BENCH_SAMPLE_SIZE to meet Criterion minimum requirement** [`006cd97`](https://github.com/acgetchell/delaunay/commit/006cd97)

  - Change BENCH_SAMPLE_SIZE from 5 to 10 in memory-stress-test job
  - Fixes assertion failure: Criterion requires at least 10 samples
  - Update both job-level and step-level env configurations

  The memory stress testing workflow was failing with "assertion failed: n >= 10" because Criterion's statistical analysis requires a minimum of 10 samples.
  This change ensures the CI configuration meets that requirement while keeping benchmarks fast for CI environments.

- **fix: slurm_storage_comparison.sh** [`1f6fb35`](https://github.com/acgetchell/delaunay/commit/1f6fb35)

  Fixed an issue where running the script did not submit correctly via sbatch and instead ran interactively

- **ci: fix memory stress testing timeout and schedule issues** [`5676c92`](https://github.com/acgetchell/delaunay/commit/5676c92)

  Root cause: Environment variables were not properly inherited by the Rust
  benchmark binary, causing tests to run at production scale (100k points)
  instead of CI-friendly development scale.

  Changes:
  - Set environment variables at step level to ensure proper inheritance
  - Configured aggressive CI-friendly benchmark parameters:
  - PROFILING_DEV_MODE=1 (limits to 1k/10k points)
  - BENCH_SAMPLE_SIZE=5 (reduced from 10)
  - BENCH_WARMUP_SECS=1 (reduced from 10s)
  - BENCH_MEASUREMENT_TIME=5 (reduced from 30s)
  - Extended timeout from 60 to 90 minutes for safety buffer
  - Fixed monthly schedule cron to `0 2 1-7 * 0` (first Sunday only)
  - Removed ineffective shell guard step that didn't skip the job
  - Updated Rust toolchain to 1.91.0 to align with project MSRV
  - Added debug output to echo env var values for verification

  Expected runtime: ~20-30 minutes (previously timed out at 90+ minutes)

  Test: All workflow validation passes (yamllint, action-lint)
  Test: Benches compile successfully with count-allocations

## [v0.6.0](https://github.com/acgetchell/delaunay/compare/v0.5.4...v0.6.0) - 2025-11-25

### ⚠️ Breaking Changes

- **Expose insert\_with\_statistics() for detailed insertion diagnostics** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **BREAKING: Rename ConvexHull::facet\_count() → number\_of\_facets() (consistency)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

### Merged Pull Requests

- feat: add Level 3 manifold validation with validate_manifold() [`#139`](https://github.com/acgetchell/delaunay/pull/139)

- docs: investigate Issue #120 and document bistellar flip requirement [`#138`](https://github.com/acgetchell/delaunay/pull/138)

- Feat/locate and insert [`#132`](https://github.com/acgetchell/delaunay/pull/132)

### Added

- **feat: add Level 3 manifold validation with validate\_manifold()** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)
  - API
    - Add Triangulation::validate\_manifold() method with facet sharing and Euler characteristic validation
    - Add validation hierarchy section to src/lib.rs with example code and API reference
  - Other
    - Implement validate\_manifold\_facets() to ensure each facet has exactly 1 or 2 incident cells
    - Implement validate\_euler\_characteristic() with dimension-specific expected values (0D-3D)
    - Add TriangulationValidationError with detailed error messages for manifold violations
    - Create docs/validation.md (362 lines) with complete guide covering all 4 validation levels
    - Add validation hierarchy documentation to triangulation.rs module docs
    - Update README.md Known Limitations with validation reference and add Documentation section
    - Add TODO comment to remove Known Limitations section after Issue #120 resolution
    - Implement generic count\_k\_faces() helper for counting arbitrary dimensional faces
    - Add full 4D validation: χ = V - E + F - T + C (counts 2-faces and 3-faces)
    - Add full 5D validation: χ = V - E + F - T + Q - C (counts 2-faces, 3-faces, 4-faces)
    - Add Issue #120 references for context on rare edge cases
    - Add \`mut\` to dt binding to allow mutation

- **docs: polish README and API docs, add repair iteration constant** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)
  - Tests
    - Add proptest regression file (tests/proptest\_delaunay\_triangulation.proptest-regressions)
  - Other
    - Add comprehensive investigation document (docs/issue\_120\_investigation.md)
    - Add implementation roadmap note
    - Add spell check word: "flippable"
    - Add MAX\_REPAIR\_ITERATIONS constant (value: 10)
    - Add detailed purpose and workflow description
    - Add comprehensive time management and timeout calculation details
    - Add step-by-step analysis workflow with examples
    - Add environment variables reference

- **feat: add comprehensive test coverage for DelaunayTriangulation with 4D doctests** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)
  - API
    - Add \`ConflictError\` enum with proper error handling
    - Add DelaunayCheckPolicy enum to DelaunayTriangulation (EndOnly, EveryN)
    - Deprecate Tds::new() and Tds::add() in favor of DelaunayTriangulation API
    - Deprecate legacy TDS construction methods (\`new\`, \`add\`) in v0.6.0
    - Add backward-compatible InsertionError variants (DuplicateCoordinates, DuplicateUuid)
    - Add TopologyValidation error variant to InsertionError enum
    - Add FacetIssuesMap type alias for HashMap<u64, Vec<CellKey>>
    - Add InsertionError::is\_retryable() for type-safe retry classification
    - Add NonManifoldTopology variant to InsertionError with facet\_hash and cell\_count fields
  - Behavior
    - Add debug logging for topology repair failures
    - Add unified error handling across debug/release builds
    - Add coplanarity detection and reporting for debugging
    - Add #\[allow(unused\_variables)\] for debug-only total\_repaired
  - Tests
    - Add \`test\_locate\_dimension!\` macro - test locate() in 2D-5D (5 tests)
    - Add \`test\_find\_conflict\_region\_dimension!\` macro - test conflict finding 2D-5D (5 tests)
    - Add \`test\_cavity\_boundary\_dimension!\` macro - test boundary extraction 2D-5D (5 tests)
    - Add 4D doctests for \`find\_conflict\_region()\` and \`extract\_cavity\_boundary()\`
    - Add 4D doctests for all 7 public functions (new, new\_empty, with\_kernel,
    - Implement macro-based testing for dimensional consistency (2D-5D)
    - Added 4D doctest for validate\_delaunay()
    - Enable advanced operations and performance testing
    - Add comprehensive build\_initial\_simplex tests (2D-5D)
    - Add tds() accessor tests
    - Added function-level #\[allow(deprecated)\] to 2 tests in proptest\_duplicates.rs
    - Add crate-level #!\[expect(deprecated)\] for tests using legacy APIs
    - Proptest: add regression seed file for Delaunay condition tests; broaden property coverage.
    - Add test\_collinear\_points\_2d() regression test
    - Added bootstrap tests verifying insertion equivalence across dimensions
    - Removed legacy tests (3673 lines deleted, 1925 added):
    - Add bootstrap key stability tests for 2D-5D dimensions
    - Add comprehensive tests for benchmark\_utils error file generation
    - Add regression test with explicit UUIDs to catch this bug
    - Add test-helpers feature flag for integration test access
    - Add triangulation\_mut() test accessor with feature gating
    - Add 20 unit tests across dimensions 2D-5D in triangulation.rs
    - Add test\_facet\_topology\_invariant! macro generating 12 property tests
    - Update justfile: add test-helpers to clippy and test-integration recipes
    - Add test case for error detection in generate\_summary()
    - Add --features test-helpers to justfile coverage recipes
    - Added regression tests for non-manifold cases (seed 123, nearby seeds)
    - Add check\_perturbation\_stats test to validate retry mechanism effectiveness
    - Add test\_remove\_vertex\_neighbor\_pointers\_valid for neighbor consistency
    - Added comprehensive error tests for incremental\_insertion.rs:
    - Added basic accessor tests for empty and simplex triangulations (2D-5D)
    - Created dimension-parametric test macros for code reuse across dimensions
  - Other
    - Added "nalgebra" and kernel-related terms to cspell.json
    - Add \`find\_conflict\_region()\` with BFS traversal from located cell
    - Add \`extract\_cavity\_boundary()\` to find boundary facets of conflict region
    - Added incremental insertion algorithms in src/core/algorithms/incremental\_insertion.rs
    - Implement DelaunayTriangulation::validate\_delaunay() with proper error mapping
    - Tds::new() and Tds::add() were already deprecated (prior work)
    - Add build\_initial\_simplex() for efficient D-simplex construction
    - Creates single cell from exactly D+1 vertices
    - Add tds() and tds\_mut() accessors (const fn where applicable)
    - Add validation wrappers: is\_valid(), validate\_vertex\_mappings(), validate\_cell\_mappings()
    - Mark Tds::add() as deprecated (removal in v0.7.0)
    - Add migration guidance in deprecation messages
    - Add \`extend\_hull()\` in incremental\_insertion.rs to handle outside insertions
    - Implement \`find\_visible\_boundary\_facets()\` using orientation predicates
    - New validation helpers on \`DelaunayTriangulation\`:
    - Add TODO comments for degenerate point location handling
    - Add "retriangulate" to cspell dictionary
    - Added bootstrap behavior for empty triangulations (< D+1 vertices)
    - Accumulate vertices without creating cells
    - Validate created cells match boundary facets count
    - Introduce three-layer architecture: Tds (combinatorial), Triangulation (geometric),
    - Add detailed documentation on partial mutation guarantees during insert errors
    - Upgrade criterion 0.7 → 0.8.0 (adds page\_size, alloca dependencies)
    - Add "retriangulated", "retriangulates" to spell check dictionary
    - Add detect\_local\_facet\_issues() for O(k\*D) manifold topology checking
    - Add repair\_local\_facet\_issues() with quality-based cell selection
    - Add CalledProcessError handlers in benchmark\_utils.py for CI failures
    - Implement dual-mode operation: submission mode (no SLURM\_JOB\_ID) + execution mode
    - Verify BENCH\_LARGE\_SCALE=1 enables 4D@10K points (benches/large\_scale\_performance.rs:420-432)
    - Add comprehensive help text with usage examples
    - Add scontrol and squeue to cspell dictionary for Slurm commands
    - Add comprehensive safety warnings about Delaunay property violations
    - Added facet sharing validation before neighbor reconstruction
    - Add transactional insertion with automatic rollback on failure
    - Implement perturbation-based retry mechanism for degenerate geometries
    - Prevent invalid triangulations from being created at construction time
    - Add "coplanarity" and "retryable" to spell-check dictionary
    - Add neighbor pointer repair after remove\_vertex facet issue repairs
    - Add comprehensive error handling section to numerical\_robustness\_guide.md
    - Add comprehensive documentation for hull extension visibility semantics
    - Add TODO for threshold-based weakly visible behavior investigation
    - Add early exit detection when repair makes no progress (avoid infinite loops)
    - Add explicit validation for non-finite quality ratios during cell quality evaluation
    - Added early success checks in repair loops using validate\_facet\_sharing()
    - Fixed clippy doc\_markdown warnings (added backticks to function names)
    - Change repair loops to scan only newly created cells (new\_cells) instead of

- **chore: improve SLURM storage comparison script reliability and add spell check word** [`c73dbe9`](https://github.com/acgetchell/delaunay/commit/c73dbe9)

  SLURM Configuration:
  - Add account specification (adamgrp) for proper job accounting
  - Switch from compute to med2 partition for appropriate resource allocation
  - Add login shell support (-l flag) for proper environment initialization

  Module System Support:
  - Add robust module system initialization with fallback detection
  - Conditionally load rust/1.91.0 and python/3.11 modules with graceful warnings
  - Support both /etc/profile.d/modules.sh and Lmod initialization paths
  - Gracefully handle missing module command by using existing PATH

  Build Optimization:
  - Use node-local scratch for CARGO_TARGET_DIR under SLURM to improve I/O performance
  - Make cargo update conditional via CARGO_UPDATE_IN_JOB environment variable
  - Add tolerance for cargo clean failures due to NFS .nfs* lock files

  Error Handling and Monitoring:
  - Track phase completion status (ok/timeout/failed) for both SlotMap and DenseSlotMap
  - Generate overall job status (COMPLETED vs COMPLETED_WITH_ISSUES) in summary
  - Add graceful handling for missing Criterion output directories
  - Improve error messages with emoji indicators (⚠️, ℹ️) for better visibility

### Changed

- **Generate macro-based tests for 2D-5D dimensions plus edge cases (6 test functions)** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

  Documentation:

- **Document TDS role as Level 2 in triangulation\_data\_structure.rs** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

- **Update docs/code\_organization.md to include validation.md in file tree** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

  Additional:

- **Enhance scripts/slurm\_storage\_comparison.sh with comprehensive header documentation** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

- **All 792 lib tests + 267 doc tests pass** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

- **All integration tests and proptests pass (790 passed; 2 ignored)** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

- **457 Python tests pass** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

- **All examples compile and run successfully** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

- **Documentation builds without warnings** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

- **Replace extract\_facet\_identifier\_set() with build\_facet\_to\_cells\_map() to count** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

  all facets (interior + boundary) for correct χ = V - E + F - C calculation

- **Move extract\_edge\_set import to module top per conventions** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

  Feature: 4D and 5D Euler Characteristic Validation:

- **Update documentation to reflect 0D-5D support (6D-7D remain TODO placeholders)** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

- **All macro-generated tests pass for dimensions 2D-5D as claimed in README** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

  Documentation Improvements:

- **Soften Delaunay guarantee language throughout (src/lib.rs, README.md)** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

- **Change "guaranteed to satisfy" → "designed to satisfy" + recommend validate\_delaunay()** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

- **Change "maintain ALL invariants" → "designed to maintain all invariants"** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

- **Update README Level 2 from "always passes" → "expected to pass when using public APIs"** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

- **Document validate\_manifold\_facets() as conceptual strengthening of Level 2** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

- **Clarify that count == 0 branch is unreachable for well-formed facet maps** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

- **All 790 lib tests + 267 doc tests pass** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

- **All 4D and 5D validate\_manifold tests pass** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

- **All integration tests and 457 Python tests pass** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

- **All examples compile and run successfully** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

- **Documentation builds without warnings** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

- **docs: investigate Issue #120 and document bistellar flip requirement** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

  Investigation determined that property test failures correctly identify
  missing algorithmic capability rather than test configuration issues.

  The incremental Bowyer-Watson algorithm can produce locally non-Delaunay
  configurations that cannot be repaired without topology-changing operations
  (bistellar flips). Current global repair mechanism can detect and remove
  violated cells but cannot flip edges to restore Delaunay property.

  Changes:

- **Root cause analysis with example failing case** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Explanation of why current repair is insufficient** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Implementation plan for 2D → 3D → higher dimensions** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Roadmap for v0.6.0, v0.7.0, v0.8.0+ releases** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Documentation update recommendations** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Update test documentation (tests/proptest\_delaunay\_triangulation.rs)** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Clarify that ignored tests require bistellar flips** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Update status comments to reference Issue #120** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Document that tests correctly identify algorithmic limitation** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Update test README (tests/README.md)** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Document bistellar flip dependency** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Explain why Bowyer-Watson produces violations** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Capture minimal failing cases for tracking** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **⏸️ 12 ignored: 8 for bistellar flips, 4 for duplicate rejection** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

  Issue #120 will be repurposed from "Stabilize property tests" to
  "Implement bistellar flips for Delaunay guarantee" with updated scope,
  labels (enhancement, algorithms), and milestone (v0.7.0).

  See docs/issue_120_investigation.md for detailed analysis.

  Refs #120

- **Changed: Documents Delaunay property test stabilization investigation** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

  Adds comprehensive documentation regarding the investigation into
  stabilizing the Delaunay property tests, outlining the root cause
  (lack of bistellar flips), proposed solutions, and a path forward.
  This change solely documents the findings and recommendations and does
  not include any code modifications. (Internal Change)

- **Changed: Clarifies Delaunay guarantee and repurposes Issue #120** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

  Updates documentation and code comments to clarify the Delaunay
  property guarantee, noting potential violations and future
  bistellar flip implementation.

  Repurposes Issue #120 to focus on bistellar flips for
  achieving a full Delaunay guarantee in v0.7.0. Includes updating
  the issue title, body, labels, and milestone.

  This change provides more clarity to the user and helps to manage
  expectations. Internal change.

- **Soften roadmap phrasing ("will require", "currently planned")** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Mention validate\_delaunay() method for runtime checking** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

  src/core/delaunay_triangulation.rs:

- **Clarify Delaunay property note is implementation-specific** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Specify Bowyer-Watson-style algorithm lacks bistellar flips** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

  src/core/triangulation.rs:

- **Replace magic number in both repair loops (interior/exterior)** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Document that most insertions need 0-2 iterations** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

  All CI checks pass.

  Refs #120

- **docs: enhance slurm\_storage\_comparison.sh documentation** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

  Improve documentation for the Slurm storage backend comparison script:

- **Document dual submission modes (self-submission vs direct execution)** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Clarify benchmark scale options (standard vs large)** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Document cluster configuration requirements** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Expand output files section with directory structure** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Include understanding results section with baseline explanation** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Document common issues and troubleshooting** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Update prerequisites and dependencies list** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

  Also add validation recommendation to DelaunayTriangulation docstring
  for applications requiring strict Delaunay guarantees.

- **src/core/algorithms/locate.rs (608 lines)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **locate() - facet walking algorithm with kernel orientation tests** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **LocateResult enum (InsideCell, OnFacet, OnEdge, OnVertex, Outside)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **LocateError with thiserror integration** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **is\_point\_outside\_facet() helper with canonical vertex ordering** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **12 unit tests covering 2D-4D, inside/outside, boundary cases** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **2 comprehensive doctests with FastKernel and RobustKernel** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **src/geometry/kernel.rs (536 lines)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Kernel<D> trait with orientation() and in\_sphere() predicates** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **FastKernel<T> wrapping simplex\_orientation() and insphere()** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **RobustKernel<T> with configurable RobustPredicateConfig** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **8 doctests demonstrating both implementations** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **All methods use slices, no Vec allocations** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **src/core/triangulation.rs (97 lines)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Triangulation<K,U,V,D> layer combining Tds + Kernel** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Delegates combinatorial operations to Tds** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **src/core/delaunay\_triangulation.rs (80 lines)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **DelaunayTriangulation<K,U,V,D> stub for Phase 3.2+** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Will contain incremental insertion + Delaunay validation** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **src/core/algorithms/flips.rs (18 lines)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Stub for Phase 3 bistellar flips** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  #### Core Bug Fix: Orientation Logic

  **Problem**: Points inside cells reported as outside, breaking location

  **Root Cause**: Facet vertices not in canonical order when building test
  simplices for orientation comparisons

  **Solution**: Canonical ordering in is_point_outside_facet():

- **All facet vertices first (excluding vertices\[facet\_idx\])** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Then opposite vertex or query point** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Ensures consistent orientation comparisons** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  **Invariant**: facet_idx indexes both the facet AND its opposite vertex

- **Documented in Cell struct (neighbors\[i\] opposite vertices\[i\])** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Enforced by Tds::assign\_neighbors() (lines 779-790)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Validated by Tds::validate\_neighbors() (line 4571)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  #### Infrastructure Updates

  **Bowyer-Watson now assigns neighbors** (triangulation_data_structure.rs:3220)

- **Calls assign\_neighbors()? after successful triangulation** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Required for facet walking algorithms** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **CellSecondaryMap<V> and VertexSecondaryMap<V> type aliases** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Idiomatic SlotMap auxiliary data tracking** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **For Phase 3 algorithms: conflict region, cavity extraction** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  #### Module Organization

- **Updated lib.rs with new module exports** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **All modules properly wired without mod.rs files** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  #### Testing

- **1117 lib tests pass (including 12 new locate tests)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **243 doc tests pass (including 2 new locate doctests)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **0 clippy warnings** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Diagnostic test verifies orientation logic manually** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  #### Documentation

- **Comprehensive function documentation with invariant dependencies** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Doctests demonstrate usage with both FastKernel and RobustKernel** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **feat(locate): cavity boundary extraction + macro-based testing** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Add conflict region finding, cavity boundary extraction, and comprehensive
  dimension-parametric testing using macros (2D-5D).

  Conflict Region Finding:

- **Uses \`kernel.in\_sphere()\` to test if point lies inside cell circumspheres** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Uses \`CellSecondaryMap\` for O(1) visited tracking (idiomatic SlotMap usage)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Returns \`CellKeyBuffer\` of all conflicting cells for stack allocation** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Uses \`FastHashSet\` for O(1) conflict lookups** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Identifies facets where one cell is in conflict, neighbor is not (or is hull)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Returns \`SmallBuffer<FacetHandle, 64>\` for efficient stack allocation** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Uses \`is\_none\_or()\` for idiomatic boundary detection** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Comprehensive Testing:

- **Verify expected facet counts: 2D→3, 3D→4, 4D→5, 5D→6 boundary facets** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Total: 27 tests in locate module (10 new dimension-specific tests)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Documentation:

- **Upgrade all doctests from 2D/3D to 4D examples** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Demonstrate complete workflow: locate → find\_conflict → extract\_cavity** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  All 1136 lib tests + 248 doc tests pass, 0 clippy warnings.

- **Unit tests (20): All public methods with 4D doctest examples** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Integration tests (16): Multi-dimensional insertion (2D-5D) using macros** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Edge cases (16): Regression tests and boundary conditions (11 passing, 5 ignored)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Implementation Improvements:

- **tests/delaunay\_incremental\_insertion.rs: Core incremental insertion tests** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  with macro-generated multi-dimensional coverage

- **tests/delaunay\_edge\_cases.rs: Regression cases converted from legacy** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Tds::new() API, including known 5D configuration that previously failed

- **Enhanced src/core/delaunay\_triangulation.rs with comprehensive test suite** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **All tests passing: 1157 lib tests + 252 doc tests** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **CI clean: fmt, clippy (pedantic+nursery+cargo), doc, spell check** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **52 total tests specifically for DelaunayTriangulation** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **5 tests marked #\[ignore\] with clear documentation (require hull extension)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  This establishes the foundation for CGAL-style architecture refactoring by
  providing comprehensive validation of the DelaunayTriangulation API before
  migrating Delaunay-specific logic from Tds.

- **refactor: move Delaunay validation from Tds to DelaunayTriangulation** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Complete CGAL-style architectural separation where Tds is purely
  combinatorial and Delaunay-specific operations live in the Delaunay
  triangulation layer.

  Core Changes:

- **Export DelaunayCheckPolicy in prelude for convenient access** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Migration:

- **Update 27 call sites across 7 test files to use crate::core::util::is\_delaunay()** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Clear migration path: dt.validate\_delaunay() or util::is\_delaunay(&tds)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Architecture:

- **Validation logic remains in util.rs (shared by both old and new APIs)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **No code duplication, both APIs delegate to same implementation** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Testing:

- **All 1,157 library tests passing** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **All 253 doc tests passing** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **All CI checks passing (fmt, clippy, doc)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Breaking Changes (v0.7.0):

- **Users should migrate to DelaunayTriangulation API** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Closes architectural refactoring task for Delaunay validation separation.

- **refactor: migrate to DelaunayTriangulation with direct simplex construction** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Replace Bowyer-Watson initialization with efficient incremental insertion:

- **Build initial simplex directly from D+1 vertices (single cell)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Insert remaining vertices via incremental cavity-based algorithm** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **No neighbor relationships (all boundary facets)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Validates vertex count and incident cell assignment** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Provide read-only and mutable access to underlying Tds** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Tested with 5 comprehensive unit tests** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Clarify incremental insertion algorithm in doc comments** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Testing:

- **Test user data preservation during construction** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Test read-only access via tds()** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Test mutable access via tds\_mut()** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Test accessor reflects insertions** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Test validation invariants maintained** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Test across dimensions (2D-4D)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **All 1172 tests passing (lib + doc + integration + Python)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Benchmarks (benches/microbenchmarks.rs):

- **Replace Tds::new() benchmarks with DelaunayTriangulation::with\_kernel()** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Update memory usage and validation benchmarks to use new API** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Rename benchmark groups: "bowyer\_watson" -> "delaunay\_triangulation"** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Access TDS methods via dt.tds()/dt.tds\_mut() pattern** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **All dimension-specific benchmarks (2D-5D) updated consistently** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Deprecation Strategy (src/core/triangulation_data_structure.rs):

- **Preserve diagnostic methods for backward compatibility** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Update doc examples to use DelaunayTriangulation::new()** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **refactor: migrate generate\_random\_triangulation to return DelaunayTriangulation** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  lign with CGAL-style architecture by making DelaunayTriangulation the primary
  user-facing type instead of exposing Tds directly.

  Core API Changes:

- **generate\_random\_triangulation() returns DelaunayTriangulation<FastKernel<T>, U, V, D>** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Function internally uses DelaunayTriangulation::with\_kernel() for construction** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Examples & Tests:

- **Updated all examples to use dt.tds() and dt.triangulation() accessors** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Refactored proptest\_convex\_hull.rs macros with turbofish type annotations** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Updated benchmarks in profiling\_suite.rs** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Marked 6 tests as #\[ignore\] pending hull extension implementation** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  (generate_random_triangulation tests and surface_measure_consistency)

- **These tests fail due to incremental insertion requiring unimplemented hull extension** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Marked generate\_random\_triangulation() and lib.rs convex hull doctests as \`no\_run\`** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **refactor: consolidate test cleanup and simplify type signatures** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  This commit addresses three improvements from code review and cleanup:

- **All clippy lints now pass without warnings** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Simplify Option<()> to () throughout codebase** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Replaced verbose Option<()> type parameters with simple () unit type** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Affects type signatures in 53 files across src/, tests/, benches/, examples/** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **No functional changes - both represent "no data", but () is cleaner** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Reduces visual noise and improves code readability** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Use DelaunayTriangulation::cells() instead of dt.tds().cells()** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Updated 58 occurrences in cell.rs (54 in tests, 4 in doc comments)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Better encapsulation by calling DelaunayTriangulation methods directly** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Aligns with CGAL-inspired layered architecture (Phase 3A)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **cells() delegates to tds.cells() internally - no behavior change** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Update WARP.md code quality guidelines** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Strengthen prohibition on sed/awk/perl for code edits** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Clarify that edit\_files tool is required for all code changes** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Exception: shell tools allowed only for read-only analysis** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Triangulation::facets() - Iterates all facets via AllFacetsIter** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Triangulation::boundary\_facets() - Iterates boundary facets with internal map computation**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **DelaunayTriangulation::facets() - Delegates to Triangulation layer** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **DelaunayTriangulation::boundary\_facets() - Delegates to Triangulation layer** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Implementation:

- **Reuses existing AllFacetsIter and BoundaryFacetsIter from src/core/facet.rs** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **boundary\_facets() computes FacetToCellsMap internally via build\_facet\_to\_cells\_map()**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **No need for users to manage facet maps directly** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Follows CGAL delegation pattern: DelaunayTriangulation -> Triangulation -> Tds** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Test consolidation:

- **Consolidated into 6 comprehensive tests with sub-sections** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **UUID tests: 3 tests → 1 comprehensive** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **dedup\_vertices tests: 3 tests → 1 comprehensive** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **filter\_vertices tests: 4 tests → 1 comprehensive** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **usize\_to\_u8 tests: 9 tests → 3 comprehensive** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Set extraction tests: 4 tests → 1 comprehensive** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **All 164 lib tests pass, 66 doc tests pass** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Prepares for Phase 3 cavity-based insertion algorithms (extract_cavity_boundary,
  find_conflict_region) which need efficient facet iteration.

- **Wire hull extension into main insertion flow in DelaunayTriangulation** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Update \`last\_inserted\_cell\` tracking after hull extension operations** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  API Changes:

- **Mark for removal in v0.7.0 to encourage migration to safer APIs** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Update locate API examples to use DelaunayTriangulation consistently** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Switch locate/find\_conflict\_region to use \`&point\` references** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Test Coverage:

- **Update edge case tests to validate outside insertion behavior** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Update convex\_hull docs to reflect hull extension is now implemented** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Clarify boundary\_facets() panic conditions in documentation** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Consolidate external API around \`DelaunayTriangulation\` instead of exposing internal \`Tds\` structures.**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Standardize imports via \`delaunay::prelude::\*\` to simplify examples/tests and stabilize public surface.**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Align docs and examples with incremental, cavity-based insertion workflow (locate → conflict region → cavity extract/fill → wiring → hull extension).**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  API changes (breaking)

- **Move/rename helpers under \`DelaunayTriangulation\` and adjust callers accordingly.** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Boundary query usage updated: prefer \`dt.boundary\_facets().count()\` (iterator style) in examples/tests.**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Additions and improvements

- **\`validate\_no\_duplicate\_cells()\`** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **\`validate\_facet\_sharing()\`** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **\`validate\_neighbors()\`** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **\`validation\_report(options: ValidationOptions) -> Result<(), TriangulationValidationReport>\`**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Examples revised to use \`dt.number\_of\_vertices()\`, \`dt.cells()\`, \`dt.dim()\`, \`dt.is\_valid()\`, and boundary facet iteration.**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Documentation refreshed to emphasize incremental insertion and practical usage via the prelude.**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Tests and allocation suite migrated from direct \`Tds\` calls to \`DelaunayTriangulation\` APIs.**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Mark a flaky randomized triangulation test as ignored with a note for follow-up.** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Architecture decisions

- **Encapsulation: treat \`Tds\` as an implementation detail; \`DelaunayTriangulation\` becomes the stable façade.**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Import ergonomics: prefer prelude re-exports to reduce boilerplate and clarify intended public API.**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Validation surface: centralize structural checks under the \`DelaunayTriangulation\` façade for consistent invariants.**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Examples and test updates

- **Update 3D examples, memory analysis demo, and zero-allocation iterator demo to the new API.**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Rewrite convex-hull related tests to construct via \`DelaunayTriangulation\` and use iterator-based boundaries.**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Rename internal-access test to reflect encapsulation (\`test\_internal\_tds\_access\`).** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Notes

- **No intentional performance changes in this refactor; behavior should be preserved aside from API updates.**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Follow-ups: unflake the ignored random triangulation test; expand validation-report coverage.**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  BREAKING CHANGE:

- **Migrate DelaunayTriangulation to use internal Tds for all operations** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Consolidate insertion pipeline into unified incremental\_insertion module** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Clean up unused boundary analysis and quality metric helpers** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Architecture Improvements:

- **Consolidate Tds to 9,839 optimized lines (previously duplicated logic)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Standardize on DelaunayTriangulation::tds() accessor pattern** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Unify boundary analysis through consistent trait implementations** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Streamline facet cache provider with cleaner RCU semantics** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Testing & Validation:

- **All 721 library tests passing** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **All 245 doc tests passing** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Updated 23 doctests to use delaunay::prelude::\*** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Benchmarks compile successfully** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Breaking Changes:

- **Tds::new() no longer available (use DelaunayTriangulation::new())** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Some internal quality metric APIs changed signatures** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Net: -28,855 lines of code while maintaining full functionality and test coverage.

- **refactor: address code review feedback and improve documentation** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Address comprehensive code review feedback from Pure Incremental Delaunay
  Triangulation consolidation, focusing on stale documentation, dead code
  removal, error handling, and test coverage improvements.

  Documentation Updates:

- **Update all stale Bowyer-Watson references to incremental insertion** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Update Tds::new() references to DelaunayTriangulation::new() in tests** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Document error mapping semantics in generate\_random\_triangulation()** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Mark set\_uuid() with #\[cfg(test)\] as test-only utility** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Document semantic approximation in point generation error mapping** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Improve ignore messages for flaky tests with specific failure modes** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Spell Check:

- **refactor: enhance incremental insertion algorithm and reorganize test suite** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Major improvements to insertion algorithm and comprehensive test suite reorganization:

  Insertion Algorithm Enhancements:

- **Rewrote neighbor wiring to support both interior cavity filling and hull extension** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Build comprehensive facet map for robust neighbor assignment** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Prevent non-manifold topology with duplicate facet detection** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Automatically build initial simplex when D+1st vertex inserted** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Seamlessly transition to cavity-based insertion for subsequent vertices** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Convert geometric errors to HullExtension variant** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Document visibility criteria (coplanar treated as non-visible)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Test Suite Reorganization:

- **Consolidated property tests into focused suites:** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **proptest\_delaunay\_triangulation.rs: Delaunay-specific invariants** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **proptest\_tds.rs: TDS structural properties (2D-5D)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **proptest\_triangulation.rs: Geometry + topology integration** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Redundant: proptest\_delaunay\_condition, proptest\_duplicates,** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  proptest_invariants, proptest_quality, proptest_serialization

- **Debug/manual: test\_cavity\_boundary\_error, test\_convex\_hull\_error\_paths,** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  test_delaunay_repair_issue, test_geometry_util, test_tds_edge_cases

- **Standardized imports using \`delaunay::prelude::\*\`** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  CI and Tooling:

- **CI now runs full integration test suite (lib + doc + integration)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Simplified coverage configuration (workspace --lib --tests)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Updated documentation reflecting algorithm changes** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  All 1102 library tests + 231 doc tests passing, 0 clippy warnings.

- **refactor: split triangulation into structural and geometric layers** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Major architectural reorganization separating the Triangulation Data Structure (Tds),
  structural Triangulation operations, and Delaunay-specific algorithms into distinct layers.

  Architecture & API Changes:

- **Move geometric operations from DelaunayTriangulation to Triangulation layer:** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **build\_initial\_simplex() (builds d+1 simplex from bootstrap)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **insert() (handles bootstrap, initial simplex, cavity fill, hull extension)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Loosen trait bounds across modules: minimal bounds for accessors/iterators,** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  numeric bounds only where geometric computations occur

- **DelaunayTriangulation now delegates to Triangulation for geometric operations** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Validation & Error Handling:

- **DelaunayTriangulation::validation\_report() now signature matches Tds (structural checks)**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Reorganize property tests by layer: Tds (32 tests), Triangulation (36 tests),** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  DelaunayTriangulation (17 tests, 13 ignored)

- **Update code organization docs with new module structure (algorithms split into** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  flips/incremental_insertion/locate; add triangulation.rs, delaunay_triangulation.rs)

- **Expand tests/README.md with detailed proptest coverage breakdown** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Update property\_testing\_summary.md with layer-based statistics and guidance** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Benchmarking & Quality:

- **Simplify locate.rs examples to use prelude imports** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Update prelude to re-export triangulation::\* and locate APIs** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Capture vertex UUID before TDS operations, re-map key after rebuild** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **SlotMap keys from old TDS became stale when replaced with new simplex TDS** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Replace O(n) contains() check with O(1) FastHashSet lookup in wire\_cavity\_neighbors** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Build new\_cells\_set once, avoid repeated linear scans across all cells** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Improves complexity from O(m×k) to O(m+k) for large cavities** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Code Quality Improvements:

- **Rename misleading 'dt' variables to 'tds' in benchmarks (type accuracy)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Update property testing summary: 2D-4D → 2D-5D coverage** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Clarify architectural layer organization (Tds/Triangulation/Delaunay)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  CI Diagnostics - Benchmark Workflow:

- **Suppressed output was hiding compilation failures (exit 101)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Update tests to expect verbose benchmark output** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  All 738 lib tests + 256 doc tests + 21 integration tests + 456 Python tests passing.
  Zero clippy warnings, all quality checks green.

- **Integrate validation into insert() after cavity filling and hull extension** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Use deterministic FastHasher instead of DefaultHasher for facet hashing** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Type System:

- **Verify manifold invariant: no facet shared by >2 cells** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Log captured stderr/stdout when cargo bench fails** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Performance Impact:

- **Before: O(N) validation per operation → O(N²) total cost** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **After: O(k\*D) validation per operation → O(N·k·D) total cost** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Improvement: ~1000× speedup for N=10K vertices with k≈D+1** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  All 758 unit tests + 256 doc tests + 48 property tests passing. Zero clippy warnings.

- **Use FacetIndex type alias instead of raw u8 in FacetIssuesMap for semantic consistency** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Provide clear migration guidance to detect\_local\_facet\_issues() + repair\_local\_facet\_issues()**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Coverage Workflow Fix:

- **Update justfile clippy and test-integration recipes to use test-helpers feature** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Storage Comparison Script Refactor:

- **Support custom time: --time=D-HH:MM:SS with optional --large flag** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Parse all Slurm time formats: D-HH:MM:SS, HH:MM:SS, MM:SS, MM** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Calculate per-phase timeout: (total\_time - 2h buffer) / 2 phases** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Update proptest\_triangulation.rs docs to reference localized functions** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  All 758 unit tests + 256 doc tests + 48 property tests + 456 Python tests passing.
  Zero clippy warnings. Coverage workflow validated.

- **wire\_cavity\_neighbors: Tolerate non-manifold facets instead of failing** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Skip wiring facets shared by >2 cells with debug warning** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Continue processing remaining valid facets** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Iterative repair loop in insert\_vertex\_incremental:** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Detect non-manifold issues using detect\_local\_facet\_issues()** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Iterate up to 10 times until facet sharing is valid** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Apply to both interior insertion and hull extension paths** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **repair\_neighbor\_pointers: Surgical neighbor reconstruction** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Match facets by hashing sorted vertex keys** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Wire mutual neighbors for matched facet pairs** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **repair\_local\_facet\_issues: Simplified to cell removal only** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Delegate neighbor reconstruction to caller** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Separate cell removal from topology wiring** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Update documentation with safe alternatives** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Improvements:

- **All 758 library tests pass** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **16/18 integration tests pass** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **2 tests ignored due to known issue #135** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Known Issue:
  repair_neighbor_pointers creates location cycles after repairs (issue #135)

- **Facet sharing validation confirms manifold topology after repairs** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Blocks triangulations >50 points when non-manifold occurs** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Tracked in <https://github.com/acgetchell/delaunay/issues/135**> [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Track insertion statistics (successful, skipped, retries, perturbations)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **DelaunayTriangulation::new() now skips problematic vertices instead of failing** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Require Kernel: Default trait bound for consistent default construction** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Detect and report ridge fan degeneracies (multiple cells sharing an edge)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Return DuplicateBoundaryFacets or RidgeFan errors for proper handling** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Neighbor Wiring & Repair:

- **Enhance mirror\_facet\_index with comprehensive diagnostics** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Make Tds::assign\_neighbors() private (internal implementation detail)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Prefer repair\_neighbor\_pointers for neighbor maintenance** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Export InsertionError and InsertionStatistics in prelude** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Testing & Validation:

- **Update edge case tests to allow skipped vertices and verify manifold properties** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Relax proptest insertion-order equality (non-deterministic with perturbation)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Dependencies & Cleanup:

- **Update slotmap 1.0.7 → 1.1.0** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Replace brittle string-based error detection with pattern matching** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Use safe casts (NumCast::from) instead of direct as conversions** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Documentation & Testing:

- **Update convex\_hull\_3d\_20\_points docs (algorithm name, example command)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Document stateless kernel assumption in build\_initial\_simplex** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Use is\_none\_or instead of map\_or for Option checks** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **InsertionError::is\_retryable() centralizes retry logic (was scattered)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Better separation of concerns between error classification and handling** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  All 782 tests pass, 0 clippy warnings.

- **Update is\_retryable() to match structured error variant instead of parsing message strings**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Return NonManifoldTopology error when facet is shared by >2 cells during wiring** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Change from Err(ref e) to Err(e) for direct error ownership and cleaner propagation** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Code Quality:

- **Merge duplicate match arms for NonManifoldTopology and TopologyValidation** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Simplify nested if-let chains using let-chain syntax (clippy suggestions)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Maintain backwards compatibility with legacy string-based check** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Documentation Updates:

- **Document structured error classification with usage examples** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Explain automatic retry logic with progressive perturbation schedule (1e-4 to 5e-2)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Detail retryable vs non-retryable error categories** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Robust retry semantics remain stable across future error message changes** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Better diagnostics with facet hash and cell count information** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Simpler, more idiomatic error propagation** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Comprehensive documentation for users and contributors** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **refactor: unify insertion algorithm and document robust kernel architecture** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Consolidate incremental insertion documentation and improve error handling clarity following the kernel-based architecture introduced in earlier commits.

  Documentation Updates (docs/numerical_robustness_guide.md):

- **Replace RobustBoyerWatson algorithm references with unified kernel architecture** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Update all code examples to use FastKernel/RobustKernel pattern** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Simplify API examples to reflect DelaunayTriangulation::with\_kernel() pattern** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Update performance overhead metrics to focus on kernel-level differences** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Revise adoption roadmap to recommend kernel selection over algorithm switching** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Document automatic retry logic with progressive perturbation for transient errors** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Insertion Algorithm (src/core/algorithms/incremental_insertion.rs):

- **Clarify conservative coplanar handling in orientation tests (treats as non-visible)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Document boundary facet deduplication logging (debug builds only)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Replace runtime validation with debug\_assert for 1:1 boundary facet correspondence** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Expand critical comment explaining boundary-only neighbor wiring to prevent non-manifold topology**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Document debug-only BFS cycle detection in repair\_neighbor\_pointers()** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Replace get\_cell() with get\_cell\_vertices() for cleaner error propagation in facet matching**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Capture inserted vertex UUID/point before TDS operations with detailed rationale** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Triangulation Core (src/core/triangulation.rs):

- **Simplify locate validation after repair: use single no-hint call with built-in cycle detection**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Optimize detect\_local\_facet\_issues() to filter over-shared facets in single pass** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Document critical UUID/point capture rationale for post-rebuild vertex access** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Error Handling Improvements:

- **Structured error messages include specific failure context (cell keys, facet counts)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Early detection of stalled repair loops with descriptive error messages** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Better validation of cell quality metrics to prevent silent failures** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **test: expand test coverage and improve code quality** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Test Coverage Improvements:

- **Invalid vertex key, invalid facet cell, invalid neighbor wiring** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Empty boundary facets, InsertionError::is\_retryable() variants** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Consolidated test\_local\_facet\_validation macro into streamlined test\_facet\_validation**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Reduced redundant tests from ~33 to 22 while improving coverage** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Each dimension now has 2 facet validation tests (detect + repair) instead of 5** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Code Improvements:

- **Optimization saves O(n·D) facet scanning when repair succeeds early** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Streamlined WARP.md from 417 lines to 72 lines (83% reduction)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Improved focus on actionable guidance for code quality and testing** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Applies to both interior insertion and hull extension repair iterations** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  API Correctness:

- **Quality computation failures now error immediately rather than silently falling back** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  All tests pass with optimized local scans maintaining correctness.

### Deprecated

- **Deprecate Tds::validate\_delaunay() (since 0.6.0) with migration guide** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Test files use #!\[expect(deprecated)\] during migration period** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **All Delaunay methods now deprecated in Tds, completing separation** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Mark Tds::new() as deprecated (removal in v0.7.0)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

### Removed

- **Minor style: Remove "Very" from "Very expensive" in docs/validation.md** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

  Test Results:

- **Remove unused \`result\` variable from my\_operation call** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

  This matches actual usage patterns where operations mutate the triangulation and validation is performed afterward.

- **Delete tests/regression\_delaunay\_known\_configs.rs (fully migrated)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Architectural Changes:

- **Improved error documentation (removed incorrect "Panics" section)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Testing Results:

- **Deprecated methods will be removed in next major version** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Update documentation to remove Bowyer-Watson references** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Removes: Deprecated code and benchmarks** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Removes deprecated code, benchmarks, and lenient facet map building.

  These items are no longer needed and have been replaced by more
  robust and efficient alternatives.
  This simplifies the codebase and improves maintainability.

- **Remove unfulfilled #!\[expect(deprecated)\] lint expectations** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Removed file-level #!\[expect(deprecated)\] from 27 test/benchmark files** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **src/core/util.rs: Eliminated 21 duplicate/redundant tests** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Remove #\[ignore\] attributes from hull extension test cases** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Remove should\_panic annotations from hull extension examples** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **refactor: migrate to DelaunayTriangulation API, remove public TDS accessor, and update hull/validation usage**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Context and rationale

- **Remove public \`tds\_mut()\` accessor; internal TDS access is now encapsulated within \`DelaunayTriangulation\`.**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Public mutable access to \`Tds\` is removed. Migrate callers to \`DelaunayTriangulation\` methods and \`delaunay::prelude::\*\`. Update boundary queries**

  **to iterator-style APIs.**

- **refactor: consolidate triangulation API and remove deprecated insertion algorithms** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Simplify and streamline the triangulation architecture by removing legacy code and consolidating APIs:

  API Consolidation:

- **Remove deprecated Tds::new() constructor (use DelaunayTriangulation::new() instead)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Remove obsolete Bowyer-Watson algorithms (bowyer\_watson.rs, robust\_bowyer\_watson.rs)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Remove unified\_insertion\_pipeline.rs and insertion\_algorithm trait (10,262 lines)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Remove 9 obsolete test files (tds\_basic\_integration, insertion\_algorithm tests, robust predicates tests)**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **InsertionAlgorithm trait removed (unified into DelaunayTriangulation)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Remove obsolete remove\_duplicate\_cells benchmark documentation** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Remove unused set\_point() method from Vertex (dead code)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Remove unused iteration variable in fix\_invalid\_facet\_sharing()** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Accept optional conflict cell set to avoid wiring to removed cells** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **remove\_vertex() (fan triangulation for vertex removal)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Remove Delaunay validation from Tds layer (structural only)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Drop ValidationOptions, DelaunayViolation, InvariantKind::Delaunay from Tds** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Remove obsolete test references (Bowyer-Watson algorithms removed)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Remove --quiet flag from cargo bench for better error visibility** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Remove CRITERION\_QUIET\_MODE=1 environment variable** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Integrate validation into remove\_vertex() after fan triangulation** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Fix shellcheck warnings: remove unnecessary ${} in arithmetic contexts** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Remove excess cells via repair\_local\_facet\_issues() (quality-based)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Only fix broken pointers (None or pointing to removed cells)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Remove cells based on quality metrics (radius\_ratio)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Remove test-helpers feature and make triangulation\_mut() public** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Remove feature from Cargo.toml, justfile (clippy, coverage, test-integration)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Core repair mechanism works (removes excess cells correctly)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Remove #\[ignore\] from previously failing degeneracy tests (now pass)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Remove obsolete assign\_neighbors\_performance benchmark** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Remove unused \_original\_vertices parameter** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Code Quality (Clippy):

- **Neighbor repair in remove\_vertex ensures consistency after repairs** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Fix directory tree to remove deleted assign\_neighbors\_performance.rs benchmark** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Benefits:

- **Type-safe error handling eliminates brittle string matching** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Remove outdated configuration presets (general\_triangulation, high\_precision, etc.)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Expanded remove\_vertex tests from single 3D test to dimension-parametric 2D-5D** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Kept essential AI assistant rules, removed verbose explanations** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Fix remove\_vertex to track total cells removed including repair phase** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Previously only returned initially removed cells, now accumulates all removals** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Code Clarity:

- **Remove dead UUID fallback code in repair\_local\_facet\_issues** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

### Fixed

- **fix: address CodeRabbit review - 3D Euler bug, 4D/5D validation, and Delaunay guarantees**
  [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

  Fixes critical 3D Euler characteristic bug and implements comprehensive improvements based on CodeRabbit code review feedback.

  Critical Bug Fix:

- **Fix 3D Euler characteristic using only boundary facets instead of all facets** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

- **docs: fix mutability in validation.md test example** [`37845f5`](https://github.com/acgetchell/delaunay/commit/37845f5)

  Fix Pattern 1 test example in validation guide to properly handle mutable
  triangulation operations.

  Changes:

- **✅ 8 passing: structural invariants, insertion-order robustness** [`9e48381`](https://github.com/acgetchell/delaunay/commit/9e48381)

- **Fixes test failures where neighbors were unset** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  **SparseSecondaryMap types** (collections.rs +89 lines)

- **Replace unwrap() with proper error handling in insert() method** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Test insufficient vertices error handling** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Test too many vertices error handling** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Updated error handling to use TriangulationConstructionError::GeometricDegeneracy** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Fixed type annotations in test\_facet\_cache\_integration.rs** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Fixed doctests across delaunay\_triangulation.rs, util.rs, and lib.rs** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Temporary Test Exclusions:

- **Fix serialization test assertions for data field formatting** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Documentation:

- **Fix formatting of long assertions and doc examples** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Impact: Enables full support for arbitrary point insertion including outside
  the current hull boundary, completing the core insertion algorithm.

- **Fix DelaunayTriangulation kernel type specifications throughout codebase** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Code Removal (28,855 deletions):

- **Fixed 30+ clippy needless\_borrow warnings** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Improve error messages for unhandled degenerate locations** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Error Handling:

- **Improve facet sharing repair error handling with diagnostic TODO** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Fix ignored doctest for collinear points with correct error type** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Fix missing imports in proptest\_serialization.rs** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Enhanced hull extension validation and error handling** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Verify boundary cells have correct vertex count (D+1)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Fixed keyword arguments in changelog utility functions** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Improve Delaunay error messages with cell UUIDs for debugging** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Fix memory measurement in large\_scale\_performance.rs (black\_box(&dt) keeps alive)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Enhance benchmark\_utils.py error handling: write error files for missing baselines,** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  timeouts, exceptions; create parent directories automatically

- **Fix generate\_random\_triangulation to return empty triangulation for n\_points=0** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **fix: resolve critical VertexKey bug and improve CI diagnostics** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Address CodeRabbit review feedback with correctness, performance, and
  maintainability improvements across the codebase.

  Critical Bug Fix - Stale VertexKey After TDS Rebuild:

- **Fix insert() returning invalid VertexKey after initial simplex construction** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Bug was masked by lucky key reuse (sequential SlotMaps generate same values)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Improve property test assertions with detailed error messages using prop\_assert!** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Fix float comparisons using assert\_relative\_eq! (clippy compliance)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Documentation Updates:

- **fix: address code review feedback and improve CI/tooling** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Address comprehensive code review feedback with targeted improvements across
  validation, testing, tooling, and documentation.

  Code Review Fixes:

- **Fix benchmark\_utils.py summary to detect error files (❌ Error:) vs falsely reporting "no regressions"**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Deprecate global fix\_invalid\_facet\_sharing() in favor of localized O(k·D) approach** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Document return semantics: Ok() doesn't guarantee all violations resolved** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Fixes CI coverage failures where triangulation\_mut() accessor wasn't available** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Fix time limit handling: extract Slurm time limit and split between phases automatically**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Correct defaults: 3 days standard (4D@3K), 2 weeks --large (4D@10K)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Allow repair mechanism to fix topology after insertion** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Preserve existing correct neighbor relationships** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Deprecated fix\_invalid\_facet\_sharing() in favor of localized repair** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Enhanced debug output for repair iterations and neighbor fixing** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Updated both fix\_invalid\_facet\_sharing paths to use repair\_neighbor\_pointers** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Testing:

- **Bug in neighbor graph reconstruction causes locate() cycles** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **feat: robust degenerate geometry handling with perturbation and retries** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Implement comprehensive degeneracy handling that makes triangulation construction resilient to geometric edge cases without failing the entire operation:

  Core Insertion Algorithm:

- **Reject degenerate (collinear/coplanar) initial simplexes using orientation test** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Deduplicate boundary facets to handle nearly-degenerate configurations** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Improve repair\_neighbor\_pointers with better error messages** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **refactor: address code review feedback and improve error handling** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Address code review comments with comprehensive improvements to error handling,
  documentation, and code robustness:

  Error Handling & Reliability:

- **Replace .unwrap() with proper error handling in repair\_neighbor\_pointers** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Fix potential division by zero in perturbation stats test** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Fix rustdoc link to private assign\_neighbors method** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Correct repair\_local\_facet\_issues error documentation (overpromised)** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Fix clone\_on\_copy: use \*v instead of v.clone() for Copy types** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Fix uninlined\_format\_args: use {var:?} inline format syntax** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Fix error propagation in insert\_transactional to avoid unwrap\_err() on moved value** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Update code\_organization.md with enhanced error handling architecture** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Clarify kernel selection strategy: FastKernel for performance, RobustKernel for stability**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Improve error propagation in repair\_local\_facet\_issues(): surface quality evaluation failures**
  [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **refactor: optimize repair loops and fix return value accounting** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

  Performance Improvements:

- **Replace unreachable degenerate location fallback with explicit unreachable!() arm** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **Update docs to clarify UUID is used as tie-breaker, not fallback on error** [`5c8d87a`](https://github.com/acgetchell/delaunay/commit/5c8d87a)

- **fix: iteration limit on Delaunay repairs** [`14c81a0`](https://github.com/acgetchell/delaunay/commit/14c81a0)

  Also add targeted test

## [v0.5.4](https://github.com/acgetchell/delaunay/compare/v0.5.3...v0.5.4) - 2025-11-09

### ⚠️ Breaking Changes

- **Return type changed to SmallBuffer (callers use as &\[CellKey\] via Deref)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Updated return type to SmallBuffer<CellKey, 16>** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **find\_bad\_cells return type changed but internal trait method** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Cell::neighbors() return type (line 652)** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Cell::ensure\_neighbors\_buffer\_mut() return type (line 727)** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **chore: bump MSRV to 1.91.0 and refactor APIs to use slices** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Bump MSRV from 1.90.0 to 1.91.0 across all configuration files** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Returns FacetError::VertexKeyNotFoundInTriangulation instead of silently skipping** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

### Merged Pull Requests

- perf/reduce-heap-allocations [`#127`](https://github.com/acgetchell/delaunay/pull/127)

- perf(collections): add stack-allocated SmallBuffer types for D+1 operations [`#126`](https://github.com/acgetchell/delaunay/pull/126)

- fix(core): Fix remove_vertex topology consistency and test failures [`#124`](https://github.com/acgetchell/delaunay/pull/124)

- Refactor/jaccard [`#123`](https://github.com/acgetchell/delaunay/pull/123)

- feat(geometry): migrate to nalgebra and add adaptive tolerance [`#122`](https://github.com/acgetchell/delaunay/pull/122)

- Test/improve coverage [`#119`](https://github.com/acgetchell/delaunay/pull/119)

### Added

- **Add SmallBuffer capacity assumptions in robust\_bowyer\_watson.rs cavity operations** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)
  - API
    - New type alias in collections.rs with comprehensive documentation
    - Add StaleHull variant to ConvexHullValidationError
    - Add BadCellBuffer type alias for cleanup operations with comprehensive docs
  - Tests
    - Add assertion guard before slice access in test
    - convex\_hull.rs: Add 12 comprehensive tests (414 lines)
    - Add comprehensive tests for build\_vertex\_to\_cells\_map() helper

- **perf(collections): add stack-allocated SmallBuffer types for D+1 operations** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)
  - API
    - Maintains same API surface (both implement Deref<\[T\]>)
    - Add ViolationBuffer type alias (SmallBuffer<CellKey, 16>) for Delaunay
  - Tests
    - Add CellVertexBuffer boundary test
    - Add unit tests for helper functions:
  - Other
    - Added: CellVertexBuffer, NeighborBuffer
    - Add rollback\_cavity\_and\_err() helper to reduce duplication
    - Add comments explaining double-traversal trade-offs
    - Add examples for find\_neighbors\_by\_key()
    - Add missing \`config\` variable in robust\_predicates.rs
    - Add missing \`edge\_matrix\` declaration in geometry/util.rs

- **fix(ci): respect slow-tests feature gate and add configurable benchmark timeouts** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)
  - Behavior
    - Add debug helper \`debug\_print\_first\_delaunay\_violation\` and use it in
  - Tests
    - Added 3 comprehensive unit tests for remove\_vertex functionality
    - Add \`tests/debug\_delaunay\_violation\_5d.rs\` and
    - Add/adjust tests for \`DelaunayCheckPolicy::EveryN(k)\` and final validation
    - \*\*test\_convex\_hull\_error\_paths.rs\*\*: Added \`simplex\_3d()\` and \`simplex\_4d()\` helpers
    - Add extensive test coverage for deduplication edge cases and boundary conditions
    - Add comprehensive test delaunay\_validator\_detects\_violations() that:
    - proptest: Enable serialization regression test for 2D neighbor preservation
    - benchmarks: Add --dev mode support to run-regression-test for 10x speedup
    - Add dev\_mode parameter to BenchmarkRegressionHelper.run\_regression\_test()
    - tests: Add comprehensive test coverage for dev\_mode and timeout parameters
    - regression: Add assertion to proptest serialization neighbor preservation test
    - justfile: Create coverage recipes with explicit test selection
    - Single configuration point: add/remove tests only in justfile
  - Other
    - Added logic to clear dangling neighbor references in remaining cells
    - Add \`allow\_inserted\_vertex\_in\_facets\` parameter to boundary facet
    - Add final Delaunay validation in \`finalize\_triangulation\` to catch
    - Implement unified insertion pipeline with robust Delaunay validation \[skip ci\]
    - Add a “Stable Random-Triangulation Parameter Sets” section to
    - Add 'taiki' to cspell dictionary
    - Added Node.js installation for markdown linting across all platforms
    - Added platform-specific tool installation steps (apt, brew, choco)
    - Improves maintainability and enables future extensions
    - Added verification of \`unsalvageable\_vertices()\` reset behavior
    - Added early \`Tds::is\_valid()\` check in \`is\_delaunay()\`
    - Added "choco" to cspell dictionary
    - Add comprehensive octree point deduplication and filtering utilities to src/core/util.rs:
    - Add "octree" to cspell dictionary
    - Add PartialEq and Eq derives to DelaunayValidationError for consistency with
    - Add performance warning comment in is\_delaunay() function to remind maintainers
    - Uses low-level insert\_cell\_unchecked() to create a known Delaunay violation
    - Uses 2D triangle scenario with interior vertex to create violation
    - benchmark\_utils: Add bench\_timeout parameter (default 1800s) to
    - validation: Add bench\_timeout > 0 validation at argument parse time for better UX
    - Add \`\_coverage\_base\_args\` variable with common tarpaulin arguments
    - Add \`coverage\` recipe for local development (HTML output)
    - Add \`coverage-ci\` recipe for CI (XML output for codecov/codacy)
    - Add get\_default\_bench\_timeout() helper with defensive fallback
    - Add coverage directory cleanup to justfile

- **feat(test): Add safe Jaccard functions with 32-bit portability and proper error handling**
  [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)
  - API
    - Add \`JaccardComputationError\` - proper error type for overflow (> 2^53)
    - Add \`FacetError::BoundaryFacetRetrievalFailed\` variant
    - Add \`FacetError::CellOperationFailed\` variant
  - Tests
    - Add Jaccard diagnostics to neighbor symmetry tests (strict invariants retained)
    - Add comprehensive Jaccard utilities section to tests/README.md
    - Add 3-arg macro example to tests/README.md
  - Other
    - Add \`extract\_vertex\_coordinate\_set()\` - extract Point<T,D> sets from TDS
    - Add \`extract\_edge\_set()\` - extract canonical (u128, u128) edge pairs
    - Add \`extract\_facet\_identifier\_set()\` - extract boundary facet keys
    - Add \`extract\_hull\_facet\_set()\` - extract convex hull facet keys
    - Add \`format\_jaccard\_report()\` - rich diagnostics with symmetric diffs
    - Add \`assert\_jaccard\_gte!\` macro - assertion with auto-diagnostics
    - Add threshold conventions and usage examples
    - Add canonical set extraction helpers:
    - Add jaccard\_index() and jaccard\_distance() for similarity computation
    - Add format\_jaccard\_report() for rich failure diagnostics
    - Add assert\_jaccard\_gte! macro with automatic diagnostics
    - Implement safe f64 conversion with overflow detection (2^53 limit)
    - Add 3-arg form to assert\_jaccard\_gte! macro (label is now truly optional)
    - Add 3-arg form: assert\_jaccard\_gte!(&a, &b, 0.99)
    - Arc instead of Box enables cheap cloning for immutable errors

- **refactor(geometry): improve robustness and add tests for Gram determinant** [`1baa1ee`](https://github.com/acgetchell/delaunay/commit/1baa1ee)
  - Tests
    - Add comprehensive unit tests for compute\_gram\_determinant using macros
  - Other
    - Add zero-edge guard in compute\_scale\_aware\_epsilon to prevent NaN when
    - Add #\[non\_exhaustive\] to TooManyDegenerateCellsError for forward

- **tests/proptest\_predicates.rs: generalize the “distant point outside by radius” property to D; normalize direction with recip(); add generators for**
  [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)
  - Behavior
    - Add structural validation errors instead of debug assertions
  - Tests
    - test: consolidate quality tests and add robust Bowyer-Watson property tests
    - Create test\_poor\_quality macro for aspect ratio extremes and sliver detection
    - Add comprehensive property-based tests for quality metrics
    - Implement robust Bowyer-Watson algorithm with property testing
    - test: add facet cache integration tests and improve coverage
    - Add 6 unit tests to facet\_cache.rs covering idempotence, race
    - Create tests/test\_facet\_cache\_integration.rs with 7 integration
    - Add comprehensive test plan documentation in docs/testing.md with
    - test(convex\_hull): add comprehensive error path and API coverage tests
    - Add tests/test\_convex\_hull\_error\_paths.rs (707 lines)
    - test(robust): add focused configuration API tests for RobustBowyerWatson
    - Add tests/test\_robust\_fallbacks.rs (296 lines, 8 tests)
    - Add 20 focused tests for public API methods not covered by unit tests
    - Add 14 regular tests + 4 stress tests for TDS operations
    - Test TDS lifecycle (empty, add, duplicate detection)
    - Add stress tests for 1K-5K vertices (marked #\[ignore\] for CI)
    - test: add integration tests for geometry utilities (Task 7)
    - test: add integration tests for insertion algorithm utilities
    - Add new test files (proptest\_robust\_bowyer\_watson.rs, integration\_robust\_bowyer\_watson.rs, test\_\*\_edge\_cases.rs)
    - Add proptest-regressions directory
    - Add Arc sharing assertion to verify RCU efficiency in concurrent tests
    - Jaccard: generalize API, adopt in tests, add docs; fix lint/spell
    - Jaccard: add docs/tests; fix facet test; harden proptests; update docs
  - Other
    - Add robust\_bowyer\_watson.rs with numerical stability improvements
    - Add 'precheck' and 'subnormals' to cspell dictionary
    - Add src/geometry/quality.rs
    - Update docs/code\_organization.md: add quality metrics usage docs
    - Add overflow protection for threshold calculations in extreme configs
    - Add reason attributes to remaining #\[expect\] statements
    - cspell: add "recip" to dictionary to avoid false positives.

### Changed

- **perf: replace Vec with SmallBuffer in hot paths for stack allocation** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  Eliminate heap allocations in performance-critical code paths by using
  SmallBuffer (SmallVec) for collections with bounded sizes. Stack allocation
  applies when D ≤ 7, covering 90%+ of typical triangulation use cases.

  Critical hot paths (Phase 1):

- **Saved cavity cells: Vec<Cell> → SmallBuffer<Cell, 16>** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Cell vertex sorting: Vec<VertexKey> → CellVertexBuffer (3 locations)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **PartialEq, PartialOrd, Hash implementations** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Facet vertex collections: Vec<&Vertex> → SmallBuffer (MAX\_PRACTICAL\_DIMENSION\_SIZE)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  Validation paths (Phase 2):

- **Vertex UUID collection: Vec<Uuid> → CellVertexUuidBuffer in duplicate detection** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Converts to Vec only when needed as HashMap key** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  Test code optimizations:

- **Boundary facet collections: Vec → SmallBuffer<\_, 16> (6 locations)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Cell key collections: Vec → SmallBuffer<\_, 16>** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  Convex hull optimizations:

- **Improved cache locality for cell comparison operations** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Reduced allocation count in validation and test diagnostics** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Zero-cost abstraction: no overhead when staying within inline capacity** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **perf: optimize allocations in validation paths and property tests** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  Eliminate heap allocations in hot code paths by using stack-allocated
  buffers (SmallVec/arrays) for collections with bounded sizes. Improves
  performance in validation code and dramatically speeds up property-based
  tests that run 256+ iterations by default.

  Core library optimizations:

- **triangulation\_data\_structure.rs:** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Duplicate cell detection: Use CellVertexUuidBuffer directly as HashMap key** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  instead of allocating Vec<Uuid> per cell (validation path)

- **Improved documentation for find\_cells\_containing\_vertex space complexity** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **robust\_bowyer\_watson.rs:** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Document cavity cell buffer capacity (16 cells for D ≤ 7)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Stale hull safety: All operations fail appropriately on stale hulls** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Boundary conditions: Points on surface/vertices/edges, epsilon distances** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **High-dimensional: 2D-5D tests via macro (facet count, visibility, validation)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Cache lifecycle: Build/reuse/invalidate/rebuild, independence between instances** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Optimized: Use arrays instead of vec! for static vertex lists** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  Property test performance (high impact):

- **proptest\_predicates.rs:** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **proptest\_triangulation.rs:** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Use CellVertexBuffer for duplicate detection (line 227)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Use SimplexVertexBuffer for facet comparison in triple-nested loop (lines 167-178)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Change sort() to sort\_unstable() for VertexKey comparisons** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Proptests: 2000-3000+ fewer allocations per full test run** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Test execution: Reduced memory pressure, slightly faster runtime** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  All 1100 library tests + 229 doc tests + 445 Python tests pass.

- **find\_bad\_cells optimization (insertion\_algorithm.rs:2098)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Before: Vec::with\_capacity(tds.number\_of\_cells())** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **After: SmallBuffer<CellKey, 16>** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **robust\_find\_bad\_cells optimization (robust\_bowyer\_watson.rs:1056)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Before: SmallBuffer internally, Vec on return** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **After: Returns SmallBuffer<CellKey, 16> directly** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **find\_bad\_cells\_with\_robust\_fallback (robust\_bowyer\_watson.rs:913)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Empty case returns SmallBuffer::new() (no allocation)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Degeneracy classification (insertion\_algorithm.rs:771, 793, 816)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **existing\_points: Vec → SmallBuffer<Point<T, D>, 16>** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **2D simplex: Vec::with\_capacity(3) → \[Point; 3\] array** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **3D simplex: Vec::with\_capacity(4) → \[Point; 4\] array** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Facet-to-cells mapping (robust\_bowyer\_watson.rs:1241)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Before: Vec::with\_capacity(cell\_facet\_pairs.len())** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **After: FacetSharingCellsBuffer (SmallBuffer<CellKey, 2>)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Impact: 100% stack allocation (facets shared by ≤2 cells always)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Delaunay violation checks: Pass None to avoid collecting** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Point deduplication: Already uses FastHashSet (line 2675)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Cell vertex validation: Already iterates directly** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Test code: Uses iterator methods appropriately** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  #### Collections Type Additions (collections.rs)

  Added FacetSharingCellsBuffer type alias:

- **SmallBuffer<CellKey, 2> for facet-to-cells mappings** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Comprehensive documentation with invariant guarantees** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Stack-allocated (2 × 8 bytes = 16 bytes per facet)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  #### Performance Characteristics

  Hot path impact:

- **find\_bad\_cells: Called once per vertex insertion (thousands of times)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Degeneracy checks: Called for classification before insertion** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Facet mappings: Called during cavity boundary detection** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  Typical case benefits:

- **Cavities: 4-16 bad cells (now stack-allocated)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Degeneracy: 2-16 sample points (now stack-allocated)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Facets: Always ≤2 sharing cells (now stack-allocated)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  Pathological case handling:

- **SmallBuffer automatically spills to heap for >N elements** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **No correctness issues, just slower (still better than always heap)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  Memory impact:

- **Reduced allocator pressure** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Better cache locality (stack vs heap)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Fewer allocations = fewer potential fragmentation issues** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  #### Test Results

  All validation passing:

- **1100 library tests pass** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **230 doc tests pass** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **445 Python tests pass** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **0 clippy warnings (pedantic + nursery + cargo)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  #### API Compatibility

  Breaking changes: None for public API

- **SmallBuffer derefs to &\[T\] so callers work unchanged** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **All public APIs maintain same signatures** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  Related optimizations from previous commits:

- **Phase 1.3: Cell vertex collections → CellVertexBuffer** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Phase 1.4: Facet vertex collections → SmallBuffer** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Phase 2.2: Cell removal → CellRemovalBuffer** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Make CLEANUP\_OPERATION\_BUFFER\_SIZE public in collections.rs** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Use centralized CLEANUP\_OPERATION\_BUFFER\_SIZE for saved cavity cells** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Prevents drift between constants over time** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  #### Code Reuse Improvements

- **Refactor validate\_no\_duplicate\_cells() to use Cell::vertex\_uuids() helper** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Update test expectations to accept both old and new error message formats** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Maintains all functionality while reducing code duplication** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  #### Documentation Updates

- **Clarify find\_cells\_containing\_vertex() semantics for buffer vs set usage** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Update ConvexHull::validate() to explicitly check for stale hulls** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Single source of truth for buffer sizing (16 cells)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Cleaner API usage through helper methods** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Better error messages and validation semantics** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **No performance impact - all optimizations preserved** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **refactor: optimize buffer usage and improve code organization** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  Collections & Type Safety:

- **Make CLEANUP\_OPERATION\_BUFFER\_SIZE public for external module reuse** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Clarify FacetSharingCellsBuffer docs to reflect behavior in corrupt TDS edge cases** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  Convex Hull Improvements:

- **Optimize facet\_vertices from Vec to SmallBuffer for stack allocation** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Strengthen test\_stale\_hull\_all\_operations\_fail to use matches!() macro for variant checking**
  [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  TDS Validation & Structure:

- **Pre-size unique\_cells HashMap in validate\_no\_duplicate\_cells() to reduce rehashing** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Refactor to use cell.vertex\_uuids() helper for cleaner code** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Extract build\_vertex\_to\_cells\_map() helper from assign\_incident\_cells()** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Building full vertex→cells map would be wasteful for single-vertex lookups** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Hot path (assign\_incident\_cells) correctly uses the optimized map-building helper** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **docs: improve documentation clarity from code review feedback** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  Address documentation inconsistencies and add clarifying notes based on
  code review feedback to improve maintainability and understanding.

  Documentation Clarifications:

- **Capitalize "Markdown" as proper noun in WARP.md commit message guidelines** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Document empty-hull special case in ConvexHull::is\_valid\_for\_tds()** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Update validate\_no\_duplicate\_cells() comment to match current Cell::vertex\_uuids() usage**
  [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  Files Modified:

- **src/geometry/algorithms/convex\_hull.rs: Document empty hull validity semantics** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **src/core/algorithms/robust\_bowyer\_watson.rs: Document buffer capacity assumptions** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **src/core/triangulation\_data\_structure.rs: Update stale documentation references** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **NeighborBuffer<T>: Stack buffer for cell neighbors (D+1)** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **CellVertexBuffer: Stack buffer for vertex keys (D+1)** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **CellVertexUuidBuffer: Stack buffer for vertex UUIDs (D+1)** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **CellToVertexUuidsMap: HashMap using CellVertexUuidBuffer values** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  Updated functions:

- **Tds::find\_neighbors\_by\_key() → returns NeighborBuffer<Option<CellKey>>** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Cell::vertex\_uuids() → returns CellVertexUuidBuffer** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **CellVertexKeysMap → uses CellVertexBuffer values** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Serialization converts SmallVec to Vec for serde compatibility** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  Performance benefits:

- **Zero heap allocations for D+1 collections when D≤7** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Better cache locality with 128-byte stack allocation** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Stabilized 4/5 Delaunay condition property tests (2D-5D empty circumsphere)** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Documented insertion-order dependency issue in prop\_insertion\_order\_invariance\_2d** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  (requires separate algorithmic investigation)

- **CellNeighborsMap now uses NeighborBuffer<Option<CellKey>> instead of** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  spelling out SmallBuffer<..., MAX_PRACTICAL_DIMENSION_SIZE> inline

- **Makes all D+1 neighbor collections share single semantic alias** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Updates documentation to reference NeighborBuffer consistently** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  Add test coverage for CellVertexKeysMap:

- **Extend test\_collection\_type\_instantiation to test CellVertexKeysMap** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Verify D+1 usage pattern (3 vertices for 2D cell)** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Validate stack allocation behavior (no heap spill for D≤7)** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  Addresses code review feedback for better semantic naming and
  protection against accidental signature changes.

- **refactor(cell): use semantic type aliases for internal buffers** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  Replace raw SmallBuffer types with semantic aliases in Cell struct:

- **vertices: SmallBuffer<VertexKey, 8> → CellVertexBuffer** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **neighbors: SmallBuffer<Option<CellKey>, 8> → NeighborBuffer<Option<CellKey>>** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  Updated locations:

- **Cell struct field declarations (lines 290, 309)** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Cell::new() parameter type (line 482)** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Deserialization initialization (line 431)** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  Benefits:

- **Consistent with CellNeighborsMap and CellVertexKeysMap type aliases** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Self-documenting: type names clearly convey D+1 semantics** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Single source of truth for buffer sizing** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Easier to refactor if buffer size logic changes** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  Import changes:

- **refactor: replace map\_or with is\_none\_or in Cell::ensure\_neighbors\_buffer\_mut** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  Replace `map_or(true, |buf| buf.len() == D + 1)` with the more idiomatic
  `is_none_or(|buf| buf.len() == D + 1)` in the debug assertion that validates
  neighbor buffer size invariants.

  This change follows clippy::unnecessary_map_or lint suggestion, improving
  code readability by using the specialized method for this pattern.

  Also increase CI benchmark timeout from 60 to 90 minutes to accommodate expensive 4D/5D triangulation benchmarks.

- **perf: optimize memory allocations with stack-allocated buffers** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  Replace heap-allocated Vec with stack-allocated SmallBuffer types in hot
  paths to reduce allocation overhead during triangulation operations.

  Key changes:

- **Replace Vec::new() with FacetInfoBuffer in cavity boundary detection** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  (robust_bowyer_watson.rs:1112, 1005) for stack allocation of D+1 facets

- **Replace Vec with CellRemovalBuffer in vertex removal operations** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  (triangulation_data_structure.rs:2027, 3007) for up to 16 cells

- **Replace std::collections::HashSet<Point> with FastHashSet for 2-3x** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  faster hashing in TDS duplicate detection (triangulation_data_structure.rs:2624)

- **Change find\_delaunay\_violations\_in\_cells() to accept Option<&\[CellKey\]>,** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  allowing callers to pass None for checking all cells without collecting
  iterator into Vec. Eliminates 4 Vec allocations in hot paths.

- **Refactor debug code (triangulation\_data\_structure.rs:3191) to use** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  iterator directly instead of collecting

  Performance impact:

- **90%+ reduction in heap allocations in hot paths** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **2-3x faster Point hashing for duplicate detection** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Zero-allocation checking of all cells for Delaunay violations** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Estimated 10-20% improvement in triangulation construction** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **refactor: optimize cavity insertion with rollback helper and stack buffers** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  Addresses code review feedback and completes memory allocation optimization:

- **Reduces code by ~30 lines while improving maintainability** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Ensures consistent rollback behavior across all error paths** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Replace Vec with CellKeyBuffer for stack allocation** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Use CellKeyBuffer (SmallBuffer<CellKey, 16>) in cavity insertion** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Covers D+1 to 16 cells on stack (sufficient for D≤7)** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Optimize FacetInfoBuffer usage** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Import at module level instead of fully-qualified paths** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Fast-path empty case to avoid unnecessary buffer construction** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Stack-allocate boundary facet collections (typical: ≤8 facets)** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Validates MAX\_PRACTICAL\_DIMENSION\_SIZE=8 threshold** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Tests D=7 (8 vertices) stays on stack, D=8 (9 vertices) spills** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Document debug code design choices** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Clarify acceptable performance patterns in test-only code** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Enhance API documentation** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Document all error modes in find\_delaunay\_violations\_in\_cells()** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **90%+ reduction in heap allocations in hot paths** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Estimated 10-20% improvement in overall triangulation construction** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **refactor: move test function imports to module level for better organization** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  Consolidates all `use` statements from within test functions to the top of
  their respective test modules across the codebase. This follows Rust best
  practices and improves code maintainability.

  Changes:

- **Move imports to module level in 6 files (4 geometry, 2 core modules)** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **test\_rollback\_cavity\_and\_err() for cavity rollback helper** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **test\_map\_delaunay\_error\_to\_insertion\_error\_helper() for error mapping** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **src/geometry/predicates.rs: HashMap import** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **src/geometry/matrix.rs: Point, Coordinate, circumcenter imports** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **src/core/traits/insertion\_algorithm.rs: SlotMap, DelaunayValidationError** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **src/core/algorithms/robust\_bowyer\_watson.rs: TriangulationValidationError** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  Test results:

- **All 1088 tests pass (3 debug helpers ignored)** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **0 clippy warnings** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Improved code organization with imports at module scope** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  Note: Serde trait imports (SerializeTuple, SerializeStruct) remain in
  function scope as this is idiomatic for single-use serde implementations.

- **Changed cell comparison from key-order to UUID-based matching** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Translation/scaling operations can reorder cells in Delaunay triangulation** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Tests now match cells by their vertex UUIDs instead of assuming same order** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Updated test\_convex\_hull\_cache\_during\_construction with proper hull vertices** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Previous vertices were all interior, causing "No boundary facets" error** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  Additional improvements:

- **Improve rollback functionality for missed inserts** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **RobustBowyerWatson now enforces Delaunay property post-insertion** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Improved duplicate coordinate detection in insertion algorithms** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Archive completed invariant\_validation\_plan.md documentation** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Convert \`determine\_strategy\_default\` to instance method using robust** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  geometric predicates instead of heuristics

- **Improve proptest configuration for Delaunay property validation** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Update documentation for insertion strategy determination** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  Impact:

- **All proptest cases now pass** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Test success rate: 98.65% (1026/1040 tests passing)** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Remaining 14 failures documented in issue #125** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  The staged changes represent the primary bug fix. Additional refinement
  improvements are tracked separately.

- **Core algorithms** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Wire \`UnifiedInsertionPipeline::triangulate\` through the full fast+robust** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  pipeline, including initial simplex construction, per-vertex insertion,
  finalization, and robust global Delaunay repair.

- **Expose \`RobustBowyerWatson::repair\_global\_delaunay\_violations\` as** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  `pub(crate)` and integrate it into the unified pipeline finalization.

- **Make global Delaunay validation a no-op for zero-cell triangulations and** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

      add a test-only counter to track validation calls under `DelaunayCheckPolicy::EveryN(k)`.

- **Extend insertion statistics with \`skipped\_vertices\` and update tests to** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  cover the new field.

- **Tests and regression coverage** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Switch facet cache integration tests to use \`RobustBowyerWatson\` instead of** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  `IncrementalBowyerWatson` to avoid geometric fallbacks while still
  exercising cache invalidation, RCU, and generation tracking.

- **Examples and documentation** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Rename and retune 3D examples to match their actual configurations:** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **\`triangulation\_3d\_100\_points\` → \`triangulation\_3d\_20\_points\`** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **\`convex\_hull\_3d\_100\_points\` → \`convex\_hull\_3d\_20\_points\`** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Update example code to use stable random-triangulation parameters that are** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  covered by `test_generate_random_triangulation_dimensions`:

- **3D examples: \`(n\_points = 20, bounds = \[-3.0, 3.0\], seed = 666)\`** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **\`zero\_allocation\_iterator\_demo\`: 4D \`(n\_points = 12, bounds = \[-1.0, 1.0\], seed = 777)\`**
  [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Align example banners, log messages, and \`examples/README.md\` sample output** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  with the new 20-point and 4D parameter sets.

- **Update root \`README.md\` and \`docs/code\_organization.md\` to reference the** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  renamed examples and new test files.

- **Refine \`docs/topology.md\` to clarify Euler characteristic expectations for** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  D-dimensional triangulation boundaries.

- **Dependencies and cleanup** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Bump \`clap\` from \`4.5.51\` to \`4.5.52\` and \`smallvec\` from \`1.13.2\` to** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  `1.15.1`, updating `Cargo.lock` accordingly.

- **Align robust integration tests with triangulate pipeline** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Switch large random and mixed-pattern robust BW tests to use** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  RobustBowyerWatson::triangulate on full vertex sets instead of
  per-insertion validate_delaunay() hooks

- **Preserve structural + global Delaunay checks via Tds::is\_valid() and** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  Tds::validate_delaunay(), using debug_print_first_delaunay_violation
  for diagnostics on failure

- **Mark unstable robust Delaunay stress tests (large random sets,** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  clustered+scattered patterns, 2D grid, near-degenerate 3D config)
  as #[ignore] with references to docs/fix-delaunay.md so they remain
  available for manual debugging without breaking CI

- **Keep reset/reuse and mixed interior/exterior 3D tests active while** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  routing them through triangulate to exercise the unified robust
  pipeline entrypoint

- **feat(tests): gate slow/stress Delaunay tests behind slow-tests feature; un-ignore stable invariants**
  [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  •  Add Cargo feature slow-tests to control execution of long-running tests
  •  Gate large random-set and grid-pattern integration tests (2D–4D) with cfg(feature = "slow-tests")
  •  Keep 5D heavy tests explicitly ignored (extremely slow; run manually when needed)
  •  Gate TDS stress tests (1000–5000 vertices, removal ops) with cfg_attr to skip unless slow-tests is enabled
  •  Update justfile:
  ◦  Add test-slow, test-slow-release, quality-slow recipes
  ◦  Document new workflows in help
  •  Increase global Delaunay repair limits (128 iterations, 32 repairs/iter) to stabilize large cases
  •  Un-ignore previously skipped integration tests (now stable) except insertion-order invariance prop test
  •  Adjust degenerate 3D test expectations to accept near-duplicate rejection
  •  Update docs/fix-delaunay.md to reflect Phases 4 and 6 completion and current status

  Files touched: Cargo.toml, justfile, docs/fix-delaunay.md, robust_bowyer_watson.rs, integration_robust_bowyer_watson.rs, test_tds_edge_cases.rs, proptest
  regressions

  CI impact: standard workflows remain fast; comprehensive slow tests available via --features slow-tests or just quality-slow

- **Update dependencies: clap 4.5.52 -> 4.5.53, pastey 0.1.1 -> 0.2.0** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Refactor Vertex::from\_points to accept &\[Point\] slices instead of Vec** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Update Tds::set\_neighbors\_by\_key to accept &\[Option<CellKey>\] slices** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Make DelaunayCheckPolicy derive Default with EndOnly as default** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Streamline CI workflow: consolidate Ubuntu checks into 'just ci'** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Install CI tools: just, uv, shellcheck, jq, shfmt** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Change 'just ci' recipe to use 'test' instead of 'test-release'** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Update code\_organization.md to reflect documentation reorganization** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Unified CI workflow to run \`just ci\` on all platforms (Linux, macOS, Windows)** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Made shellcheck optional in justfile for Windows compatibility** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Now runs clippy twice: without features and with \`--all-features\`** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Made \`shell-lint\` gracefully skip shellcheck if unavailable** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  #### Documentation

- **Clarified coordinate comparison semantics in \`src/core/util.rs\`** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Replaced "bit-level comparison" with "\`OrderedFloat\`-based comparison"** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Clarified epsilon parameter semantics** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Updated \`src/core/vertex.rs\` to refer to "slice" instead of "vector"** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Documented \`DuplicateVertices\` error case in \`Cell::new\`** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  #### Test Refactoring

- **\*\*proptest\_quality.rs\*\*: Extracted \`compare\_transformed\_cells\` helper** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Refactored three invariance tests to use shared helper** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Reduces ~14 instances of repeated vertex array definitions** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **\*\*integration\_robust\_bowyer\_watson.rs\*\*: Enhanced algorithm reset test** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Confirms \`reset()\` clears all internal state including statistics** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **\*\*proptest\_duplicates.rs\*\*: Improved duplicate handling** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **\*\*src/core/util.rs\*\*: Refactored Delaunay validation** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Extracted \`validate\_cell\_delaunay\` helper function** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Reduced ~100+ lines of duplication between \`is\_delaunay\` and \`find\_delaunay\_violations\`**
  [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **filter\_points\_excluding\_references: Filter points while preserving referenced indices**
  [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **All functions handle edge cases (NaN, +/-0.0, empty inputs) and maintain consistent semantics**
  [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Improve CI workflow reliability:** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Skip non-essential tools (just, uv, Node.js) on Windows to avoid installation failures** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Simplify Windows CI to core build/test operations only** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Linux/macOS continue running full just-based CI checks** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Increase codecov timeout from 240s to 600s for property-based tests** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Reduce PROPTEST\_CASES to 64 in codecov to prevent timeouts** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Reduce PROPTEST\_CASES from 64 to 16 in codecov workflow to prevent timeouts** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  during tarpaulin instrumentation (especially for expensive 5D property tests)

- **Increase BENCHMARK\_TIMEOUT from 1800s (30min) to 3600s (60min) in benchmarks** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  workflow to allow CI performance regression tests to complete

  Delaunay Validation Improvements:

- **Verifies find\_delaunay\_violations() correctly identifies violating cells** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Demonstrates is\_delaunay() checks structural invariants before Delaunay property** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **benchmarks: Increase workflow timeout from 45 to 75 minutes for CI** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  benchmark suite and add configurable bench_timeout parameter

- **tests: Update test assertion to expect bench\_timeout parameter** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **perf(ci): optimize benchmark and coverage workflows to prevent timeouts** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  Fix critical CI/CD performance issues causing timeouts in benchmark regression
  testing (60+ minutes) and code coverage analysis (3+ hours).

  Changes:

- **Wire --dev flag through CLI argument parser and workflow invocation** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Use DEV\_MODE\_BENCH\_ARGS for faster CI benchmark execution** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **codecov: Exclude proptest\_\*.rs files from coverage instrumentation** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Proptests take 3+ hours under tarpaulin (only 16 cases with PROPTEST\_CASES)** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Regular CI doesn't run integration tests, so proptests only executed in codecov** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Coverage still captures unit tests, doc tests, and non-proptest integration tests** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Benchmark workflow: 60+ min → ~10-15 min (10x speedup with dev mode)** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Codecov workflow: 3+ hours → expected <30 min (excludes slow proptest instrumentation)** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  The --dev mode uses reduced sample sizes (10 vs 100) and shorter measurement
  times while still validating regression detection logic. Proptests remain
  valuable for development but are too slow under coverage instrumentation.

- **perf(ci): optimize codecov workflow and centralize coverage configuration** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  Reduce codecov runtime from 3+ hours to minutes by excluding proptest
  integration tests while maintaining comprehensive coverage through unit
  tests and regular integration tests. Centralize configuration in justfile
  to eliminate duplication.

  Changes:

- **codecov: Refactor to use \`just coverage-ci\` for single source of truth** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Install just in workflow to delegate coverage execution** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Simplifies workflow and improves maintainability** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Explicitly list 19 non-proptest integration tests with --test flags** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Use --lib for unit tests, skip proptest\_\*.rs entirely** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **benchmark\_utils: Centralize bench\_timeout default and improve help text** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Update help text to clarify env var precedence** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **tests: Refactor CLI validation test to reduce coupling** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Test calls main() directly instead of duplicating validation logic** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **More maintainable: validation changes don't require test updates** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  Performance impact:

- **Codecov workflow: 3+ hours → expected <30 minutes** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Skips ~17 proptest files with hundreds of property-based test cases** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Retains coverage from unit tests + 19 regular integration tests** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **DRY principle: test list maintained in one place (justfile)** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Easier maintenance: update justfile, both local and CI stay in sync** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Faster local coverage runs with \`just coverage\`** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Comprehensive coverage without extreme runtime costs** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **refactor(api): optimize InsertionBuffers setters to accept slices** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  Improve API ergonomics by changing four InsertionBuffers setter methods
  to accept slices instead of owned Vec parameters:

- **set\_bad\_cells\_from\_vec: Vec<CellKey> -> &\[CellKey\]** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **set\_boundary\_facet\_handles: Vec<FacetHandle> -> &\[FacetHandle\]** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **set\_vertex\_points\_from\_vec: Vec<Point<T, D>> -> &\[Point<T, D>\]** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **set\_visible\_facet\_handles: Vec<FacetHandle> -> &\[FacetHandle\]** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  These methods only iterate and copy data into internal buffers, so they
  don't need ownership. Accepting slices is more flexible and idiomatic,
  allowing callers to pass references to existing vectors or array slices
  without unnecessary moves.

  Also includes minor documentation and CI fixes:

- **Update justfile help text for clarity** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Update all test call sites to pass slice references** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Use existing \`FacetView::key()\` API for facet identification** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Safe f64 conversions with overflow checks (2^53 mantissa limit)** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Deterministic canonicalization (sorted edges/facets, no random seeds)** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Generic over BuildHasher for HashSet flexibility** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

  Test migrations:

- **Migrate serialization tests to Jaccard similarity (threshold ≥ 0.99)** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Replace coordinate-by-coordinate equality with set-based comparisons** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **All 4 serialization\_vertex\_preservation tests passing** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

  Documentation:

- **Update docs/jaccard.md with implementation status** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Document design decisions and remaining work** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

  This establishes the foundation for migrating remaining tests (convex hull,
  storage backend, property tests) to Jaccard-based comparisons for improved
  test stability and clearer failure diagnostics.

- **extract\_vertex\_coordinate\_set() - Point coordinate sets** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **extract\_edge\_set() - Canonical edge pairs** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **extract\_hull\_facet\_set() - Convex hull facet topology** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Migrate serialization tests to Jaccard vertex comparison (≥0.99)** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Enhance storage backend tests with edge topology comparison (≥0.999)** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Enhance convex hull property tests with facet comparison (=1.0)** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Archive completed implementation guide to docs/archive/jaccard.md** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Update docs/code\_organization.md with new util.rs features** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Update all cross-references to archived location** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Change jaccard\_index() to return Result<f64, JaccardComputationError>** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Change jaccard\_distance() to return Result with error propagation** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Change extract\_edge\_set() to return Result<HashSet<(u128, u128)>, FacetError>** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Change extract\_hull\_facet\_set() to return Result<HashSet<u64>, FacetError>** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Propagates FacetView::new() and key() errors instead of silently skipping** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

  Macro improvements:

- **Change 4-arg form to call jaccard\_index() function for consistency** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Update all call sites to unwrap/expect Results (6 test files)** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Update doctests in function documentation** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Refactor serialization test to use extract\_vertex\_coordinate\_set consistently** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Document 3-arg macro form with example** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Delegates to 4-arg form with default label "Jaccard index assertion"** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Ensures overflow safety via existing 2^53 checks** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Wraps \`TriangulationValidationError\` in Arc for efficient sharing** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Used in \`extract\_facet\_identifier\_set()\` for boundary facet operations** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Replaces generic \`CellNotFoundInTriangulation\` mapping** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Wraps \`TriangulationValidationError\` in Arc for efficient sharing** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Used in \`FacetView::key()\` for \`get\_cell\_vertices()\` operations** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Replaces generic \`CellNotFoundInTriangulation\` mapping** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Both variants use #\[source\] attribute for proper error chain traversal** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Keep \`CellNotFoundInTriangulation\` for simple \`Option\` -> \`Result\` conversions** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

  (e.g., `tds.get_cell(key).ok_or(...)` where only one failure mode exists)

- **Use new wrapped variants when converting from rich \`Result<\_, TriangulationValidationError>\`**
  [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

  where multiple failure modes exist and context is valuable

  Benefits:

- **More accurate error reporting preserves full diagnostic context** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Distinguishes between simple "key not found" vs complex validation failures** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Efficient error sharing via Arc (immutable, clonable)** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Better debugging when triangulation validation fails** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **All 43 facet tests + 36 util tests passing, no clippy warnings** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

  Addresses code review feedback requesting more specific error conversion
  instead of losing error context with generic mappings.

- **Extract compute\_gram\_determinant() helper to deduplicate Gram matrix** [`1baa1ee`](https://github.com/acgetchell/delaunay/commit/1baa1ee)

  computation logic in simplex_volume_gram_matrix() and
  facet_measure_gram_matrix(); centralizes tolerance clamping and
  degeneracy checks

- **Import Matrix alias in circumsphere\_debug\_tools.rs to reduce verbosity** [`1baa1ee`](https://github.com/acgetchell/delaunay/commit/1baa1ee)

- **Consolidate quality module tests to reduce duplication (74 → 70 tests)** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Combine quality ranking and threshold tests** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Merge special geometry tests (right/isosceles triangles)** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Property tests for radius\_ratio and normalized\_volume** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Scale and translation invariance properties** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Dimension validation and error path testing** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Positive definiteness and monotonicity properties** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Property tests for algorithm correctness across dimensions** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Enhance examples documentation with detailed usage guide** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Update justfile coverage recipe to include integration tests** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  (--lib --tests) instead of excluding tests/** directory

- **Construction errors: InsufficientData for empty TDS** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Stale hull detection across visibility methods** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Cache invalidation and rebuild logic** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Public API methods: find\_nearest\_visible\_facet, is\_point\_outside, validate** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Accessor methods: facet\_count, get\_facet, is\_empty, dimension, facets** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Multi-dimensional testing (2D, 3D, 4D)** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Visibility testing with various point positions** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Relax Arc pointer equality to cache size equality in RCU test** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Update docs/testing.md** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Mark Task 3 complete (convex\_hull.rs: 126→132 lines, +2.22%)** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Update overall coverage: 56.80% → 56.94%** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Document analysis of 70% target unreachability** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Update priority targets with completion status** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Constructor variants: new(), with\_config(), for\_degenerate\_cases()** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **State management: reset(), statistics accumulation** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Multi-dimensional: 2D/4D configuration validation** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Update docs/testing.md** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Mark Task 4 complete (robust\_bowyer\_watson.rs: 48.16% → 48.16%)** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Document why no coverage improvement (existing 1,621 lines of tests)** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Explain value of API contract tests despite no coverage gain** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Note: trimmed from 16 tests (585 lines) to 8 focused tests** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  Coverage impact: +0 lines (+0% for robust_bowyer_watson.rs, +0% overall)
  Quality checks: All pass (8 tests pass, just quality succeeds)

  Analysis: 240 uncovered lines (51.84%) are private implementation methods
  unreachable through public API. These tests provide API documentation and
  contract validation rather than coverage improvement.

- **test: improve integration test coverage for insertion\_algorithm and TDS** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  Add comprehensive integration tests for insertion_algorithm trait and
  triangulation_data_structure modules (Phase 2, Tasks 5-6).

  Task 5 - insertion_algorithm trait (51.43% → 55.66%, +4.23%):

- **Test InsertionBuffers accessor methods (bad\_cells\_buffer, boundary\_facets\_buffer, etc.)**
  [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Test compatibility helpers (bad\_cells\_as\_vec, set\_bad\_cells\_from\_vec, etc.)** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Test FacetView conversions (boundary\_facets\_as\_views, visible\_facets\_as\_views)** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Test error type constructors and recoverability (is\_recoverable, attempted\_strategy)** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **File: tests/test\_insertion\_algorithm\_trait.rs (345 lines)** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  Task 6 - triangulation_data_structure (55.12% → 56.63%, +1.51%):

- **Test neighbor operations (clear\_all\_neighbors, assign\_neighbors)** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Test public API methods (set\_neighbors\_by\_key, find\_cells\_containing\_vertex\_by\_key, build\_facet\_to\_cells\_map, assign\_incident\_cells)**
  [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **File: tests/test\_tds\_edge\_cases.rs (472 lines)** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  Coverage improvements:

- **Configure Tarpaulin to include doctests (--run-types Tests Doctests)** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **This captures +5 lines from extensive documentation examples** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Overall: +940 lines of test code, +51 covered lines across both modules** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Random point generation errors (7 tests): InvalidRange, zero points,** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  impossible spacing

- **Circumcenter/circumradius errors (4 tests): empty points, invalid** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  simplex, degenerate configurations

- **Simplex volume multi-dimensional (6 tests): 4D/5D regular simplexes,** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  degenerate cases (coincident, collinear, coplanar)

- **Facet measure (3 tests): 1D points, 4D facets, invalid counts** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Inradius (4 tests): 1D segments, 3D tetrahedrons with mathematical** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  verification

- **Hypot and squared norm (10 tests): 0D-5D dimensions, large values,** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  numerical stability

- **Circumradius multi-dimensional (3 tests): 2D-5D simplexes** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  Implements test generation macros using pastey::paste! to reduce
  boilerplate for dimensional sweep testing:

- **test\_regular\_simplex\_volume! (4D/5D)** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **test\_hypot\_unit\_vector! (2D-5D)** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **test\_circumradius\_unit\_simplex! (4D/5D)** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **InsertionBuffers (9 tests): creation, capacity allocation, buffer** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  clearing, prepare methods, Vec compatibility, and FacetView conversion

- **InsertionStatistics (4 tests): initialization, vertex insertion tracking,** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  fallback usage tracking, and rate calculations

  Also fixes justfile coverage command to match CI configuration exactly
  (removes --run-types flags to use tarpaulin defaults).

  All tests pass with `just commit-check`.

  File: tests/test_insertion_algorithm_utils.rs (374 lines, 13 tests)

- **docs: update documentation and archive testing.md** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Move docs/testing.md to docs/archive/testing.md with Phase 2 status** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Update docs/code\_organization.md with current project structure:** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Reflect testing.md moved to archive** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Update tests/README.md with new test file descriptions and usage** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Replace #\[allow(clippy)\] with #\[expect(clippy)\] throughout codebase** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **refactor: address CodeRabbit feedback - improve defensive programming and validation** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  Implement comprehensive improvements based on CodeRabbit code review feedback,
  focusing on defensive programming, proper validation, and maintainable documentation.

  Core improvements:

- **Replace float\_cmp with tolerance-based comparisons (EPSILON = 1e-12)** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Tighten validation checks to exact equality (cell vertex counts, facet sizes)** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Convert validate\_boundary\_facets to associated function for purity** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Use f64::from() with fully-qualified syntax to avoid ambiguity** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Replace fragile line-number references with function names in docs** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Improve test documentation clarity across integration tests** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **refactor(tests,robust): clarify errors, safe casts, and test naming/docs** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  Robust Bowyer–Watson:

- **Update tests to assert the new error variant and strategy** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  TDS tests:

- **Use safe integer→float conversion via num\_traits::cast in UUID mapping test** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  Facet cache integration tests:

- **Rename misleading test to test\_sequential\_cache\_invalidation\_during\_insertion** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Update doc comments to reflect sequential behavior (not multi-threaded)** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  Also: minor doc/comment cleanups to better reflect actual behavior.

- **tests: finalize before validation; generalize distant-point insphere property** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **tests/proptest\_delaunay\_condition.rs: finalize\_triangulation for A and B and assert success before validation/comparison.**
  [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **doc: Update CHANGELOG.md** [`b6825e9`](https://github.com/acgetchell/delaunay/commit/b6825e9)

- **Changed: Skips 5D tests in CI, adds attributes to tests** [`ed4b714`](https://github.com/acgetchell/delaunay/commit/ed4b714)

  Changes the 5D tests to be skipped during continuous integration
  due to their long runtime. Adds attributes to the integration tests
  via macro to allow for skipping.

- **Changed: Updates dependencies and reduces test samples** [`318990a`](https://github.com/acgetchell/delaunay/commit/318990a)

  Updates `derive_builder` and `pastey` dependencies to their
  latest versions. Reduces the sample size in one integration
  test to improve coverage run times. (Internal change)

- **Changed: Increase tarpaulin timeout for 5D integration tests** [`8755071`](https://github.com/acgetchell/delaunay/commit/8755071)

  Increases the tarpaulin timeout to 240 seconds. This is done to
  accommodate the longer execution times of the 5D integration tests,
  preventing premature termination of the code coverage analysis.

- **chore: update documentation** [`283d5e2`](https://github.com/acgetchell/delaunay/commit/283d5e2)

### Removed

- **Eliminates ~4 heap allocations per vertex insertion** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Eliminates ~768 heap allocations per test run (3 Vec × 256 iterations)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Eliminates 1000+ heap allocations per test run (nested loops × 256 iterations)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  Performance impact:

- **Validation: Eliminates extra Vec allocation per cell in duplicate detection** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **perf: eliminate heap allocations in hot paths with stack-allocated buffers** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  Complete Phase 1 & 2 optimizations from Vec-to-SmallBuffer plan by replacing
  heap-allocated Vec with stack-allocated SmallBuffer in critical insertion paths.
  Targets code executed thousands of times per triangulation construction.

  #### Phase 1: Critical Hot Paths (10-20% allocation reduction expected)

- **Impact: Eliminates heap allocation for typical cavities (≤16 bad cells)** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Impact: Eliminates unnecessary Vec conversion** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Impact: Eliminates 3+ allocations per degeneracy check** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Remove local CAVITY\_BACKUP\_CAPACITY constant from robust\_bowyer\_watson.rs** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Eliminates duplicate VertexKey→UUID mapping logic** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Extract stale\_hull\_error() and stale\_hull\_construction\_error() helpers to eliminate duplication**
  [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Keep find\_cells\_containing\_vertex() as O(n) scan for cold paths (remove\_vertex, rollback)**
  [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Removed stale proptest regression file** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Removed unused: MAX\_PRACTICAL\_DIMENSION\_SIZE, SmallBuffer** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Eliminates 2 heap allocations per insertion in typical cases** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Eliminates 4+ Vec allocations per cavity-based insertion** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **fix(core): Fix remove\_vertex topology consistency and test failures** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  This commit addresses three critical issues:

- **\*\*Fix remove\_vertex to maintain topology consistency\*\*** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Prevents triangulation corruption when removing vertices** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Remove proptest regression files for cleaner repo state** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Remove stale proptest regression file** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  `proptest-regressions/core/traits/insertion_algorithm.txt` that no longer
  matches the current insertion/repair behavior.

- **refactor: improve code quality and eliminate duplication** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  This commit addresses multiple coderabbit review comments by refactoring
  duplicated code, improving documentation clarity, enhancing CI workflows,
  and strengthening test coverage.

  #### CI/CD Improvements

- **Eliminates ~200 lines of duplicated UUID-based cell matching logic** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **exact\_deduplicate\_points: Remove exact duplicate points with stable ordering** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **epsilon\_deduplicate\_points: Remove approximate duplicates within epsilon threshold** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **codecov: Remove --all-features flag to respect slow-tests feature gate** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  This prevents stress tests (test_stress_1000_vertices_2d, etc.) from
  running under tarpaulin instrumentation where they timeout

- **Remove 50+ lines of duplicated tarpaulin configuration** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Remove --all-features to avoid slow-tests feature gate** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Eliminates duplication across three CLI subcommands** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Eliminates duplicate safe conversion logic between macro and function** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

  Test updates:

- **Eliminates duplicate logic** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Remove redundant scale invariance test (covered by dimensional macro)** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Test cell removal operations (remove\_cell\_by\_key, remove\_cells\_by\_keys, remove\_duplicate\_cells)**
  [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Remove unfulfilled #\[expect\] attributes where lints no longer trigger** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Remove unfulfilled #\[expect\] attributes** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

### Fixed

- **Fallback visibility test: Vec<Point> → SmallBuffer for degenerate cases** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  Performance benefits:

- **Degenerate geometry: Fallback visibility, extreme aspect ratios** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Replace vec!\[...\] with arrays for cyclic permutations and degenerate simplex** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **refactor: improve code reuse and buffer consistency across hot paths** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  Address code review feedback by eliminating duplicate logic and ensuring
  consistent buffer sizing across the codebase.

  #### Buffer Constant Consolidation

- **Fix find\_bad\_cells() docs to describe SmallBuffer<CellKey, 16> return type** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Fix is\_valid\_for\_tds() to treat empty hulls as always valid** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

  #### Benefits

- **Improve corruption test assertions to focus on error variants vs message strings** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Fix stale error documentation in assign\_incident\_cells() to reflect key-based implementation**
  [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **WARP.md: Fix markdown/Markdown capitalization** [`e3def62`](https://github.com/acgetchell/delaunay/commit/e3def62)

- **Fixed zero\_allocation\_iterator\_demo to compare as slices** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **refactor(collections): improve type alias consistency and test coverage** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  Improve consistency and discoverability of D+1 buffer type aliases:

- **Centralizes error handling pattern used 16 times in cavity insertion** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Ensures correct sizing for practical dimensions** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Explain all-None fallback for missing cells** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

  Performance Impact:

- **Fix missing variable declarations uncovered during refactoring:** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **src/geometry/robust\_predicates.rs: DMatrix import + config fix** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **src/geometry/util.rs: Matrix import + edge\_matrix fix** [`f7203df`](https://github.com/acgetchell/delaunay/commit/f7203df)

- **Fixes failing doctest at triangulation\_data\_structure.rs:1784** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **\*\*Fix proptest quality metric failures\*\*** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Fixes prop\_normalized\_volume and prop\_radius\_ratio tests in 4D/5D** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **\*\*Fix convex hull integration test\*\*** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **fix(triangulation): Fix Delaunay violations in cavity-based insertion** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  Fixes a critical bug where the Bowyer-Watson insertion algorithm was
  creating triangulations with violations of the empty circumsphere
  property. The issue manifested in proptest failures and affected
  approximately 1.35% of test cases.

  Root cause: The `determine_strategy_default` method used a faulty
  heuristic for single-cell triangulations, assuming all vertices were
  exterior without proper geometric validation.

  Changes:

- **fix global Delaunay repair, stabilize examples, and expand validation** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Tweak several tests to use simple non-degenerate simplices and to treat** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

      `TriangulationConstructionError::GeometricDegeneracy` as an expected,
      non-corrupting failure mode where appropriate.

- **Expand \`docs/fix-delaunay.md\` with current status of global Delaunay repair,** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  captured regression seeds, and an execution plan snapshot.

- **Archive fix-delaunay.md documentation (move to docs/archive/)** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Fixed \`just clippy\` to catch unused code in all feature configurations** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Consolidated redundant sections in \`docs/archive/fix-delaunay.md\`** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Fixed markdown linting errors (heading hierarchy)** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Increased jitter from 1e-9 to 1e-7 for realistic near-degenerate testing** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Consistent error handling with \`prop\_assume!(false)\` pattern** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  #### Validation Logic

- **Improved error layering to distinguish TDS corruption from Delaunay violations** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  #### Minor Fixes

- **Fixed conditional compilation for unused imports in slow-tests feature** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Expand documentation with detailed complexity analysis and error handling for vertex utilities**
  [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **fix(ci): resolve timeout issues and improve Delaunay validation testing** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

  CI Timeout Fixes:

- **Fix GitHub Actions log group syntax in codecov.yml** [`da473c8`](https://github.com/acgetchell/delaunay/commit/da473c8)

- **Fix 32-bit portability: use u128 instead of usize for 2^53 bit shift** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Fix self-reference in docs/archive/jaccard.md** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **fix(test): Fix overflow vulnerability in assert\_jaccard\_gte! macro** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

  The assert_jaccard_gte! macro was computing Jaccard similarity inline with
  unchecked usize->f64 casts, risking silent precision loss for large test
  sets (>2^53 elements). This was inconsistent with the jaccard_index()
  function and format_jaccard_report() which both have overflow guards.

  Changes:

- **Fix 4-arg form to call jaccard\_index() function instead of inline computation** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

- **Returns proper error instead of silent precision loss** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

  Impact: Low risk in practice (test sets unlikely to exceed 2^53 elements),
  but this fix ensures consistency and safety across all Jaccard utilities.

  This fixes #121

- **fix(core): Improve error diagnostics by preserving validation error context** [`9eaa225`](https://github.com/acgetchell/delaunay/commit/9eaa225)

  Add specific error wrapping for operations that return TriangulationValidationError
  instead of mapping all errors to generic variants that lose diagnostic context.

  Changes:

- **Fix tolerance computation order in conditioned\_insphere: compute** [`1baa1ee`](https://github.com/acgetchell/delaunay/commit/1baa1ee)

  adaptive tolerance from original matrix BEFORE conditioning to keep
  determinant and tolerance in the same scale (prevents incorrect
  INSIDE/OUTSIDE classification near boundary)

- **Fix rustdoc: escape square brackets in Gram matrix notation (G\\\[i,j\\\])** [`1baa1ee`](https://github.com/acgetchell/delaunay/commit/1baa1ee)

- **Merge degenerate tests into single test covering both metrics** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Integration tests for degenerate and challenging configurations** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Fix redundant Arc::clone in existing concurrent test** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Enhance ConvexHull error context with detailed TDS state snapshots** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  for facet cache build failures

- **Near-degenerate configurations and large coordinate values** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Fix tests/test\_facet\_cache\_integration.rs** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Fix redundant Arc::clone clippy warning** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Config presets: general\_triangulation, high\_precision, degenerate\_robust** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **refactor: replace #\[allow(clippy)\] with #\[expect(clippy)\] and fix CodeRabbit issues** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  Replace all #[allow(clippy::*)] with #[expect(clippy::*)] for better lint
  hygiene. #[expect] warns if the lint no longer triggers, helping maintain
  code quality over time.

- **Fix tests/proptest\_robust\_bowyer\_watson.rs: use .into\_iter().next()** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  instead of indexing temporary Vec

- **Fix tests/test\_insertion\_algorithm\_trait.rs: initialize TDS with valid** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  simplex instead of empty vertex list

- **Fix src/core/traits/facet\_cache.rs: assert cache building succeeds** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  during invalidation race

- **Fix docs/archive/testing.md: hyphenate "large-scale values"** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

- **Fix unused variable warnings with proper #\[allow\] placement** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  Test improvements:

- **Improve boundary validation error context: return GeometricFailure with** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  clear message ("No boundary facets found for N bad cells") and record
  strategy as CavityBased

- **tests: fix proptest macro syntax; use approx; satisfy clippy pedantic** [`936fc8c`](https://github.com/acgetchell/delaunay/commit/936fc8c)

  •  proptest_facet_cache.rs
  ◦  Fix “expected expression” errors by restructuring proptest usage:
  ▪  Use closure-style proptest invocations and pastey::paste! for test names
  ▪  Remove stray Ok(()) returns from proptest bodies
  ◦  Add Coordinate import for Point::new
  ◦  Add missing semicolons to macro invocations
  ◦  Tidy docs (backticks, wording)
  •  proptest_safe_conversions.rs
  ◦  Move parameterless tests out of proptest! blocks
  ◦  Replace strict float equality with approx::assert_relative_eq (and tolerances)
  ◦  Replace lossy casts with num_traits::cast round-trips
  ◦  Rewrite if-chain as match for monotonicity test
  ◦  Clean up imports and lint attributes
  •  proptest_vertex.rs
  ◦  Avoid strict float array comparisons; use tolerant checks
  ◦  Remove test relying on private Vertex::set_point
  ◦  Add explicit type for Point::try_from() in NaN test
  ◦  Relax inequality check to component-wise tolerance
  ◦  Adjust lint attributes

- **fix: handle GitHub's 125KB tag annotation limit with CHANGELOG.md references** [`a74bbdb`](https://github.com/acgetchell/delaunay/commit/a74bbdb)

  Resolve git tag creation failures when changelog content exceeds GitHub's
  125,000 byte annotation limit (encountered with v0.5.4 at 152KB).

  Tag Creation Strategy:
  - Always creates annotated tags for consistency
  - Changelogs ≤125KB: Full content in tag annotation
  - Changelogs >125KB: Short reference message with CHANGELOG.md link
  - Users always use `gh release create "$TAG" --notes-from-tag`

  Implementation (scripts/changelog_utils.py):
  - _get_changelog_content(): Returns tuple (message, is_truncated)
  - Checks byte size against 125,000 limit
  - Returns reference message for large changelogs
  - _create_tag_with_message(): Always creates annotated tags
  - Renamed parameter: is_lightweight → is_truncated
  - Maintains uniform workflow regardless of size
  - _show_success_message(): Simplified to always use --notes-from-tag
  - Notes CHANGELOG.md reference for large changelogs

  Testing (scripts/tests/test_changelog_tag_size_limit.py):
  - 7 comprehensive tests using real v0.5.4 data (152KB)
  - Tests cover: limit detection, tag creation, success messages, full workflow
  - Validates both normal and large changelog handling
  - All 452 Python tests passing

  Documentation:
  - docs/RELEASING.md: Documents automatic handling, example reference message
  - docs/code_organization.md: Added test file, noted 125KB handling

## [v0.5.3](https://github.com/acgetchell/delaunay/compare/v0.5.2...v0.5.3) - 2025-10-30

### ⚠️ Breaking Changes

- **Returns clear error "No facet handles provided" instead of misleading** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

### Merged Pull Requests

- fix: Handle degenerate configurations and improve test robustness [`#116`](https://github.com/acgetchell/delaunay/pull/116)

### Added

- **docs: add AI tool acknowledgements and clarify bbox helpers** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)
  - API
    - Add BoundaryAnalysis trait import where needed
    - Add InsertionError::DuplicateBoundaryFacets variant with duplicate\_count and
    - Add explicit type constraints: only supports f32/f64 via CoordinateScalar
  - Tests
    - Add comprehensive proptest suites for Bowyer-Watson, convex hull,
    - Add serialization vertex preservation integration test
    - Fix degenerate simplex generator in proptest\_quality to create
    - Add proptest regression file for insertion\_algorithm edge cases
    - Added unit test test\_preventive\_filter\_does\_not\_reject\_valid\_interior\_facets
    - Added Vertex::new\_with\_uuid() test helper (marked #\[doc(hidden)\])
    - Added 4 integration tests for UUID collision detection scenarios
    - Added 2 integration tests verifying correct state calculation
    - Add prominent warning to Vertex::new\_with\_uuid test helper
  - Other
    - Add duplicate coordinate detection to Tds::new() constructor
    - Document behavior difference between new() (permissive) and add() (strict)
    - Add rollback after preventive facet filtering to handle edge cases
    - Add rollback when cell creation yields zero cells despite valid
    - Implement Point Hash + Eq for efficient duplicate detection in
    - Add Point import and move HashSet to top-level imports
    - Add check at start of create\_cells\_from\_facet\_handles for empty handles
    - Add note explaining "saturating" naming is for bbox semantic consistency
    - Add detailed citations and human oversight note in REFERENCES.md

### Changed

- **Silently skip vertices with identical coordinates during batch construction** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Matches expected behavior for batch initialization from potentially unfiltered data** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  Property Test Improvements

- **Use approx crate for floating-point comparisons in serialization tests** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Use relative\_eq! from approx crate instead of exact equality** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **JSON typically preserves 15-17 significant digits for f64** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Minor coordinate differences after roundtrip are expected and acceptable** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  New Property Tests

- **Include proptest regression files to track minimal failing cases** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Improve serialization test coverage for vertex preservation** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  The rollback logic ensures failed insertions don't corrupt the
  triangulation, maintaining the invariant that operations either fully
  succeed or leave the TDS unchanged. Property tests now properly
  exercise quality metric comparisons between regular and degenerate
  simplices.

  Fixes edge cases where invalid facet sharing or degenerate geometry
  would previously cause TDS invariant violations.

- **Captured bad\_cell before moving info to avoid borrow issues** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  UUID Duplicate Detection Fix

- **Reordered Tds::new() to check UUID collisions before coordinate deduplication** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Previously duplicate UUIDs were missed when coordinates were also duplicated** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Recalculate construction\_state after deduplication loop in Tds::new()** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Now reflects actual unique vertex count instead of raw input length** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Avoids unnecessary vertex insertion and rollback operations** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  Improved Error Messages

- **Changed post-filtering error to "No boundary facets available after filtering"** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **More accurate since empty result can come from filtering, deduplication, or** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  empty input

  Performance Optimization

- **Replace std::HashSet with FastHashSet in deduplicate\_boundary\_facet\_info** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Pre-allocate both collections with boundary\_infos.len() capacity** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Clarify saturating\_add/sub\_for\_bbox only support floats (not integers)** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **CoordinateScalar is only implemented for f32/f64** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Update test comments to reflect early exit behavior** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Keep pub visibility for integration tests but enhance safety warnings** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **perf: Optimize deduplication and facet filtering hot paths** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  Reduce allocations in deduplication and improve hashing performance in
  the preventive facet filter's inner loop.

  Deduplication Optimization

- **Use u64 facet keys instead of Vec<VertexKey> for deduplication** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Leverages canonical facet\_key\_from\_vertices() hashing** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Consistent with hashing used throughout codebase** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  Facet Filter Optimization

- **Replace std::HashMap with FastHashMap in filter\_boundary\_facets\_by\_valid\_facet\_sharing**
  [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Pre-allocate with facet\_map.len() capacity to avoid rehashing** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Reduces hashing overhead in N·D inner loop** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Clarify saturating\_add/sub\_for\_bbox perform standard FP arithmetic** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Not actual integer saturation since CoordinateScalar only supports floats** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  Test Alignment

- **Consistent with new API contract where empty handles error immediately** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **List AI tools used in project development (ChatGPT, Claude, CodeRabbit,** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  GitHub Copilot, KiloCode, WARP) in README.md

- **Clarify all AI output was reviewed/edited by maintainer** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  Clarify floating-point bbox helper documentation:

- **Simplify doc comments for saturating\_add/sub\_for\_bbox functions** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Emphasize "saturating" naming is for semantic consistency, not actual** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  integer saturation behavior

- **Update test comment to reflect deduplication via canonical vertex sets** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **refactor: Surface duplicate boundary facets as errors instead of silent filtering** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  Replace silent deduplication with explicit error handling to catch algorithmic
  bugs in cavity boundary detection early.

  Breaking API Changes

- **deduplicate\_boundary\_facet\_info: Returns Result<SmallBuffer, InsertionError>** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  instead of Vec (errors on duplicates, uses SmallBuffer for performance)

- **filter\_boundary\_facets\_by\_valid\_facet\_sharing: Returns Result<SmallBuffer>** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  instead of Vec (propagates errors from facet map building)

- **Incorrect neighbor traversal logic** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Non-manifold mesh connectivity** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Data structure corruption** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  By returning errors instead of silently filtering, we surface these bugs
  immediately rather than allowing corrupted triangulations.

  Performance Optimization

- **Use SmallBuffer (stack-allocated, falls back to heap) for typical D+1 facets** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Faster than Vec for small collections (common case in D dimensions)** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Maintains O(n) duplicate detection with FastHashSet** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  Implementation Details

- **Propagate DuplicateBoundaryFacets errors through insert\_vertex\_cavity\_based** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  and create_cells_from_facet_handles

- **Update tests to expect errors on duplicates instead of silent filtering** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Rename prop\_deduplication\_is\_idempotent to prop\_deduplication\_detects\_duplicates** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **docs: Rename saturating\_\* helpers to bbox\_\* and clarify float semantics** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  The "saturating" terminology was misleading for floating-point operations.
  These functions perform plain arithmetic, not saturating arithmetic.

  Renaming

- **saturating\_sub\_for\_bbox → bbox\_sub** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **saturating\_add\_for\_bbox → bbox\_add** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  Updated Documentation

- **Clarify these are plain float operations, NOT saturating arithmetic** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Explain float overflow behavior: naturally produces ±infinity** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Document that this is the desired behavior for bounding box expansion** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  (ensures all vertices are contained even with extreme coordinates)

- **Update all 28 call sites and test names** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  Rationale
  "Saturating" implies integer-style clamping to min/max bounds, but:

- **Floats don't saturate - they naturally produce ±infinity on overflow** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **The old naming suggested these functions did something special, when** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  they're just plain +/- operations with overflow-to-infinity semantics

### Removed

- **Bad cells are about to be deleted, but were being counted as if they** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  would remain, causing every interior facet to be flagged as over-sharing

- **Eliminates Vec allocation per facet (N allocations saved)** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Remove unwrap\_or(0) pattern in favor of explicit error assertion** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

### Fixed

- **fix: Handle degenerate configurations and improve test robustness** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  This commit addresses several issues related to degenerate point
  configurations and improves the robustness of property-based tests:

  Duplicate Vertex Handling

- **Filter degenerate configurations in convex hull proptests** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  (collinear/coplanar points with no boundary facets)

- **Fix debug-only variable compilation with #\[cfg(debug\_assertions)\]** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  Serialization Test Fixes

- **Address JSON floating-point precision limitations (not a bug)** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **fix: Add rollback on cell creation failure and fix property test** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  Implement atomic insertion semantics by adding rollback mechanisms when
  cell creation fails during vertex insertion. This prevents TDS
  corruption from partial insertions that leave dangling references.

  Key changes:

- **fix: Fix preventive facet filter and UUID/construction\_state bugs** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  Fix critical bug in preventive facet filtering where all valid interior
  boundary facets were incorrectly rejected, and address UUID duplicate
  detection and construction_state accuracy issues.

  Preventive Facet Filter Fix (CRITICAL)

- **Fixed filter\_boundary\_facets\_by\_valid\_facet\_sharing to discount bad** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  cell contributions before checking facet sharing limits

- **refactor: Improve error handling and performance in insertion algorithm** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  Add early exit for empty facet handles, optimize deduplication, clarify
  documentation, and restrict test helper visibility.

  Early Exit for Empty Input

- **Improves deduplication performance and consistency with codebase** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  Documentation Updates

- **Improves consistency with other hot-path containers** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

  Documentation Clarification

- **Fix test\_create\_cells\_from\_boundary\_facets to assert error on empty input** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **Fix test\_create\_cells\_from\_facet\_handles\_duplicate\_handles to assert error** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **This is actually the correct behavior for bbox expansion** [`a6ec3fa`](https://github.com/acgetchell/delaunay/commit/a6ec3fa)

- **fix(changelog): normalize markdown headers and protect cron expressions** [`1f070dd`](https://github.com/acgetchell/delaunay/commit/1f070dd)

  Fixes markdown formatting issues in commit message bodies:

  1. Normalize header levels to ####
  - Convert all markdown headers (# through ######) to #### in commit bodies
  - Maintains consistent hierarchy: ## Release > ### Section > #### Detail
  - Prevents conflicts with changelog structure (## for releases, ### for sections)
  - Satisfies markdownlint MD001 rule (no heading level jumps)
  - Previous approach (adding 2 levels) created h3→h5 jumps that violated MD001

  2. Protect cron expressions from markdown interpretation
  - Add _protect_cron_expressions() to wrap cron patterns in backticks
  - Detects quoted strings with asterisks and digits (e.g., `0 2 * * 0`)
  - Prevents markdown from treating * as emphasis markers
  - Example: `0 2 * * 0` → `0 2 * * 0`

  Changes:
  - scripts/changelog_utils.py: Add protection and normalization functions
  - CHANGELOG.md: Regenerated with consistent #### headers and protected cron syntax

  All quality checks pass (cargo fmt, clippy, ruff, markdownlint).

- **fix(changelog): prevent duplicate commit entries in generated changelog** [`dbcfb87`](https://github.com/acgetchell/delaunay/commit/dbcfb87)

  Fixes two bugs in changelog_utils.py that caused duplicate content:

  1. Reused changes_section_index causing multiple insertions
  - Mark changes_section_index as used (-1) after insertion to prevent
  the same index from being reused for duplicate insertions
  - Add missing pending_expanded_commits.clear() in _finalize_pending_commits

  2. Expanded PR commits duplicating entries from Fixed Issues section
  - Track expanded commit SHAs in self.expanded_commit_shas set
  - Skip commit lines whose SHAs were already expanded from PRs
  - Store both full and short SHA formats to catch all duplicates
  - Clear tracking set per release to avoid cross-release conflicts

  Root cause: auto-changelog lists squash commits in both "Merged Pull
  Requests" and "Fixed Issues" sections. PR expansion was processing
  the same commit twice—once from the PR entry and again from the
  commit entry.

  Result: CHANGELOG.md now has no duplicate entries. Commit c707b09
  that previously appeared twice now appears only once in the correct
  section.

## [v0.5.2](https://github.com/acgetchell/delaunay/compare/v0.5.1...v0.5.2) - 2025-10-17

### ⚠️ Breaking Changes

- **Now returns descriptive InsertionError with cell/vertex key context** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

### Merged Pull Requests

- Refactor/phase 4 [`#109`](https://github.com/acgetchell/delaunay/pull/109)

- Feature/geometry quality metrics [`#107`](https://github.com/acgetchell/delaunay/pull/107)

### Added

- **refactor: fix PartialEq implementation and add cells\_values() convenience method** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)
  - API
    - Introduce StorageMap type alias with conditional compilation
    - Add public re-export of StorageMap to avoid private type in public API
    - Add TODO comments for future API abstraction work
    - Added \`cells\_values()\` method to simplify the common pattern \`cells().map(|(\_, cell)| cell)\`
    - Add TdsCorruption error variant to BadCellsError for better diagnostics
    - Add Cell::clear\_vertex\_keys() method for safer deserialization
    - Add Cell::ensure\_neighbors\_buffer\_mut() method (cell.rs)
    - Created GitHub issue #110 to track trait bounds simplification
    - \*\*Add Cell::eq\_by\_vertices() method\*\* (src/core/cell.rs)
  - Behavior
    - Added descriptive error messages for better debugging
    - Add seed logging for reproducibility in CI logs
    - Add debug\_assert! in with\_config() to validate visibility\_threshold\_multiplier
  - Tests
    - test(storage): add comprehensive SlotMap vs DenseSlotMap testing infrastructure
    - Add 17 comprehensive tests for comparison functionality
    - Add dimensional invariants to neighbor access tests (≤D+1 facets)
    - Add environment gating for large-scale tests (RUN\_LARGE\_SCALE\_TESTS)
    - \*\*Add completed\_ok pytest fixture\*\
    - Add quality metric test for storage backends
    - Added \_ensure-uv dependency to test-python and validate-toml recipes
    - Adds 6 unit tests covering various scenarios
    - Added test coverage for TDS corruption and NoCells error paths
    - 918 library tests (6 new tests added)
    - 204 doc tests (2 new doctests added)
    - Add macro-generated dimensional tests (2D-5D) covering insertion,
    - Add explicit \`!multiplier\_f64.is\_finite()\` check before negative test
  - Other
    - Added 5D benchmark suite: \[500, 1K\] points (~30-60 min)
    - Added docs/phase4.md: Comprehensive Phase 4 plan and progress tracking
    - Added profiling tools to spell check dictionary (dhat, callgrind, cachegrind)
    - Add \`dense-slotmap\` feature flag to Cargo.toml
    - Add Phase 4 benchmark targets (bench-phase4, bench-phase4-large,
    - Added compare-storage-backends entry point to pyproject.toml
    - Added denseslotmap and levelname to cspell dictionary
    - Add large\_scale\_performance benchmark suite with configurable parameters
    - Add storage backend comparison script (compare-storage-backends) to run
    - Add just commands for Phase 4 workflows:
    - Add compare\_storage\_backends.py script with SlotMap/DenseSlotMap comparison
    - Implement JSON-based Criterion output parsing with regex fallback
    - Added "diagnosability" to spell check dictionary
    - Add ensure\_neighbors\_buffer() helper to reduce neighbor initialization boilerplate
    - Add environment variable controls for benchmark tuning (sample size, warmup, measurement time)
    - Add profiling mode determination rationale
    - Add .gitignore entries for macOS profiling artifacts
    - Added explicit zero-vertex check before subtraction
    - \*\*Use copied() for Vertex (implements Copy)\*\
    - \*\*Add self-referential neighbor checks\*\
    - \*\*Add profiling commands to perf-help\*\
    - \*\*Add uv dependency guards\*\
    - New \_ensure-uv helper prevents cryptic errors when uv is missing
    - \*\*Add profile-mem recipe for memory profiling\*\
    - Add static assertion for DEGENERATE\_CELL\_THRESHOLD = 0.5
    - Add proper error handling for neighbor buffer size validation (4 locations)
    - Add insert\_cell\_unchecked() helper (#\[doc(hidden)\] pub) for benchmark use
    - Add directive to always use git --no-pager when reviewing changes
    - Add proper bounds checking for neighbor indices with error handling
    - Add MSRV documentation for const panic/assert requirements
    - Add deprecation notice to insert\_cell\_unchecked() with detailed safety
    - Add bench\_config() supporting environment variable configuration:
    - Add bench-quick command for fast validation (~30 sec with minimal samples)
    - Add early return for empty triangulation in vertex\_violates\_delaunay\_property
    - All cells now properly created within TDS context with valid keys
    - Added explicit check for Some(mf) if mf == T::zero() case
    - Added enforcement check in setup recipe to fail early if uv not installed
    - Enables semantic comparison of cells from different TDS instances
    - Added calculate\_margin<T>() function to avoid code duplication
    - Added note about intentional neighbor overwrites in set\_neighbor\_with\_validation()
    - Add saturating arithmetic helpers (saturating\_sub\_for\_bbox, saturating\_add\_for\_bbox) to prevent overflow panics
    - Add warning messages for unparseable benchmark configuration env vars
    - Add staleness check in is\_point\_outside\_hull to prevent using
    - Add descriptive error message showing actual vs expected vertex count

- **feat(geometry,core): add comprehensive quality metric tests and improve facet fixing** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)
  - Behavior
    - Add safety constants and better debug messages
    - Add BENCH\_PRINT\_MEM env var to control memory logging
  - Tests
    - test(geometry): Add comprehensive tests for quality metrics and utility
    - Add 708 lines of new tests for radius\_ratio and normalized\_volume
    - Add 9 property-based tests (proptest) for geometric invariances:
    - Add 22 deterministic unit tests covering:
  - Other
    - Added "inradius" to cspell.json
    - Added academic references to REFERENCES.md (Knupp, Parthasarathy, etc.)
    - Add special case for 1D inradius calculation to prevent division by zero
    - Add "sysinfo" to cspell dictionary
    - Add hybrid scoring when only partial quality scores available
    - Add topology rebuild after cell removals when no duplicates found
    - Add degeneracy checks to simplex\_volume for 1D, 2D, 3D cases
    - Add "unscored" to spell-check dictionary
    - Add early return optimization when validation passes
    - Add degeneracy checks: return errors instead of zero for degenerate facets
    - Add memory unit verification: log "bytes → KiB" conversion on first call
    - Separate TDS memory from setup overhead: add tds\_delta field to
    - Add 'callsites' and 'overcounted' to cspell dictionary

- **chore(docs): update CHANGELOG, add storage comparison tooling** [`49f5eb5`](https://github.com/acgetchell/delaunay/commit/49f5eb5)

  - Generate comprehensive CHANGELOG.md with AI-categorized Phase 4 entries
  - Add legitimate technical terms to cspell.json dictionary (invariances, kibibytes, unparseable)
  - Document storage backend comparison scripts in code_organization.md and scripts/README.md
  - Add Slurm-based storage comparison script for SlotMap vs DenseSlotMap benchmarking

### Changed

- **refactor(benchmarks): Phase 4 benchmark consolidation and elevation** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Consolidate benchmark suite and elevate large_scale_performance.rs as the
  primary Phase 4 SlotMap evaluation benchmark. Reduces duplication and
  establishes clear benchmarking strategy for SlotMap vs DenseSlotMap comparison.

  #### Benchmark Consolidation (Steps 6-9)

  #### Deprecated benchmarks

- **triangulation\_creation.rs: Replaced with deprecation notice** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Zero external usage (no workflows/scripts/justfile references)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Directs users to ci\_performance\_suite.rs (CI) and** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  large_scale_performance.rs (Phase 4)

  #### Removed redundant benchmarks

- **Rationale: profiling\_suite.rs already provides comprehensive memory profiling** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Centralized in assign\_neighbors\_performance.rs with comprehensive distributions** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  (random, grid, spherical) and scaling analysis

  #### Phase 4 Primary Benchmark (Step 9)

  Elevated large_scale_performance.rs as Phase 4 primary:

- **Complete dimensional coverage: 2D, 3D, 4D, 5D** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Configurable 4D scaling via BENCH\_LARGE\_SCALE env var** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Default: \[1K, 3K\] for local development (~2-3 hours total)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Large scale: \[1K, 5K, 10K\] for compute cluster (~4-6 hours)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **All Phase 4 metrics: construction, memory, iteration, queries, validation** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  #### Documentation Updates

- **Updated examples: Increased point counts to 100 for better demonstration** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Updated justfile, CONTRIBUTING.md, and README.md with Phase 4 references** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  #### Quality Validation

- **All benchmarks compile successfully** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **cargo fmt, clippy (pedantic/nursery/cargo) passing** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Markdown lint and spell check passing** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **781 tests still passing** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Related to Phase 4 SlotMap abstraction roadmap (docs/OPTIMIZATION_ROADMAP.md).
  Target: 10-15% iteration performance improvement with DenseSlotMap.

- **Update all TDS storage fields and methods to use StorageMap** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Update profiling benchmark workflow to use new profiling\_suite** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Update code organization docs with current benchmark structure** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Update Phase 4 status docs (Steps 11-12 completed)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **37 comprehensive tests covering 2D-5D dimensions** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Construction tests: Verify basic TDS creation with each backend** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Iteration tests: Test vertex/cell traversal (DenseSlotMap's strength)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Neighbor access tests: Test pointer chasing performance (2D-5D)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Large-scale tests: Stress backends with realistic workloads (2D-5D)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Serialization tests: Verify data structure preservation (2D-5D)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Data storage tests: Verify vertex/cell user data handling (2D-5D)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Automated benchmark execution for both backends** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Criterion output parsing and analysis** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Markdown report generation with:** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Performance comparison tables** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Summary statistics (average, best/worst case)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Interpretation and recommendations** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Reproduction instructions** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Development mode support for faster iteration** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Available as: uv run compare-storage-backends** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Configuration Updates:

- **bench-phase4-quick: Quick validation tests (~90s)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **bench-phase4: Standard benchmarks (~2-3 hours)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **bench-phase4-large: Large-scale benchmarks (~4-6 hours)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **compare-storage: Compare backends (~4-6 hours)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **compare-storage-large: Large-scale comparison (~8-12 hours)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Mark all storage\_backend\_compatibility tests as #\[ignore\] to prevent** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  slow tests (92s total) from running in regular CI - must run explicitly
  with `-- --ignored` flag

  The storage backend compatibility tests validate correctness across all
  dimensions but are now opt-in to keep regular test runs fast.

- **Generate comprehensive markdown comparison reports with statistics** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Support development mode and custom benchmark filters** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Test Refactoring:

- **Refactor storage\_backend\_compatibility.rs with 7 test generation macros** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Reduce test file from 686 to ~530 lines while maintaining 29 tests** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Document expected resource usage (memory/runtime) per dimension** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Code Quality:

- **Update deprecation rationale for triangulation\_creation.rs** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Documentation:

- **Update benches/README.md with completed just targets (Phase 4)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Clarify GitHub capitalization consistently across docs** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Update benchmark deprecation messaging with intentional split rationale** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  All quality checks pass: 840 Rust tests, 442 Python tests (17 new), formatting, linting.

- **\*\*cell.rs\*\*: Clarify serialization scope in module docs (manual serde for uuid/data only,**
  [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  vertex/neighbor keys reconstructed by TDS). Add nil UUID validation at deserialization
  time for fail-fast error handling. Fix deprecation version mismatch (v0.6.0 consistently).

- **\*\*vertex.rs\*\*: Optimize serialization by omitting \`data\` field when None, reducing JSON**
  [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  payload size while maintaining backward compatibility.

- **\*\*compare\_storage\_backends.py\*\*:** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Broaden benchmark name regex to support scoped names with hyphens/colons/slashes** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Refactors: Improves cell/facet/vertex test coverage with macros** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Introduces macros for dimension-specific tests in cell, facet,
  and vertex modules, reducing code duplication and improving test
  coverage for 2D-5D cases. Includes roundtrip serialization and
  UUID validation.

  Optimizes cell serialization by omitting the "data" field when
  the data is None, and ensures backward compatibility for
  deserialization of explicit null data.

- **Replace \`.values()\` calls with \`.map(|(\_, v)| v)\` pattern** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Replace \`.get()\` with proper accessor methods (get\_cell, get\_vertex\_by\_key)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Replace \`.keys()\` with \`.map(|(key, \_)| key)\` or \`.count()\` where appropriate** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Replace all "SlotMap" references with generic "storage map" terminology** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Abstract away implementation details from public API documentation** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Maintain implementation-agnostic documentation** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Problem\*\*: Used \`unwrap\_or\_default()\` when comparing cells, swallowing errors and**
  [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  causing false positives

- **\*\*Solution\*\*: Compare cells by vertex coordinates instead of UUIDs, with explicit** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  error handling

- **\*\*Rationale\*\*: Different TDS objects have different vertex UUIDs even for identical** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  geometries; coordinate-based comparison is correct and prevents false positives from
  hidden errors

  #### New Convenience Method

- **Provides direct iterator over cell references without keys** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  #### Additional Improvements

- **Various code cleanups and optimizations throughout the codebase** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Make vertex key lookups strict (fail on missing keys instead of silent errors)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Benchmarking:

- **Extend large-scale benchmarks to include 4D ≥ 5000 points with longer measurement times** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Tighten memory benchmark conditions in CI workflow** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Update proptest to use accurate vertex count methods** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  All quality checks pass with pedantic/nursery/cargo warnings enabled.

- **Set construction\_state to Constructed after first D-simplex creation** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Propagate TDS corruption errors instead of swallowing them** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Update memory\_scaling benchmark references to profiling\_suite** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Workflow Enhancements:

- **Clarify profiling trigger conditions with detailed comments** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Document tag push uses development mode to avoid CI timeouts** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Simplify memory benchmark gating logic** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Update OPTIMIZATION\_ROADMAP.md Phase 4 to feature-flag approach** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Quality metrics (radius\_ratio, normalized\_volume) were using absolute** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  coordinate magnitudes for scale, causing valid simplices to be flagged
  as degenerate when translated far from origin

- **Changed to use average edge length (translation-invariant measure)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **A simplex at (1e9, 1e9) with unit edges now correctly has epsilon ~1e-8** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  instead of ~10, preventing false degeneracy detection

- **Affected: src/geometry/quality.rs** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Empty triangulations returned i32::MIN instead of -1 due to saturating\_sub** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Affected: src/core/triangulation\_data\_structure.rs** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Changed from silently skipping missing vertices to surfacing TDS corruption** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Affected: src/core/traits/insertion\_algorithm.rs, src/core/algorithms/bowyer\_watson.rs**
  [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  #### Performance Optimizations

- **\*\*Replace O(D) UUID membership checks with O(1) HashSet lookups\*\*** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **is\_facet\_visible\_from\_vertex now uses FastHashSet for facet vertex UUIDs** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **More efficient for higher dimensions (D > 2)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Affected: src/core/traits/insertion\_algorithm.rs** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Use O(1) number\_of\_cells() instead of cells().count()\*\*** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Replaced iterator counting with direct length access in showcase tests** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Affected: tests/robust\_predicates\_showcase.rs** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Changed from cloned() per clippy suggestion** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Affected: src/core/triangulation\_data\_structure.rs** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  #### Testing Improvements

- **Storage backend tests now assert neighbors don't reference themselves** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Affected: tests/storage\_backend\_compatibility.rs** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Tighten large-scale test gate\*\*** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Now requires exact RUN\_LARGE\_SCALE\_TESTS=1, not just any truthy value** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Prevents accidental CI execution** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Affected: tests/storage\_backend\_compatibility.rs** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Replace unwrap() with expect() in test code\*\*** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Affected: src/core/algorithms/bowyer\_watson.rs** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  #### Documentation & Tooling

- **Documented profile, profile-dev, and new profile-mem commands** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Affected: justfile** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Applied to bench-baseline, bench-compare, changelog, python-lint, etc.** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Affected: justfile** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Runs profiling\_suite with count-allocations feature** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Affected: justfile** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Clarified that neighbors are reconstructed, not serialized** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Affected: src/core/cell.rs** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Normalize benchmark README terminology\*\*** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Consistently use "vertices" instead of mixing "points"/"pts"/"vertices"** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Affected: benches/README.md** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Step 3 checkboxes now match "Completed" status** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Affected: docs/phase4.md** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Simplify .gitignore trace patterns\*\*** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Changed \*.trace and \*.trace/\*\* to clean \*.trace/ pattern** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Affected: .gitignore** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Affected: .github/workflows/profiling-benchmarks.yml** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  #### Test Infrastructure

- **Reduces CompletedProcess mock duplication in storage backend tests** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Affected: scripts/tests/test\_compare\_storage\_backends.py** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Tests now check backend names directly instead of emoji symbols** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **More robust across terminals/fonts** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Affected: scripts/tests/test\_compare\_storage\_backends.py** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  #### Testing

  All 1,546 tests passing (902 lib + 202 doc + 442 Python)
  All examples run successfully
  All linting clean (fmt, clippy, ruff, cspell, shellcheck)
  All benchmarks compile successfully

- **Change facet\_vertices from Vec to SmallBuffer in lenient facet map** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  (eliminates per-facet heap allocations)

- **Keep cells\_mut() as pub with stronger safety documentation** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  (required by benchmarks and integration tests)

  Encapsulation Improvements:

- **Move neighbor buffer initialization logic into Cell type** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Better separation of concerns between modules** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Error Handling (bowyer_watson.rs):

- **Log warnings for errors instead of silently treating as hull extension** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Prevent silent breakage if threshold value changes** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Documentation and Workflow Fixes:

- **Update benchmark documentation** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Replace hard-coded line numbers in error messages with descriptive references** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Replace debug assertions with production-ready error returns** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  triangulation_data_structure.rs:

- **Make debug assertions trait-friendly: use partial\_cmp() instead of is\_finite()** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  for generic CoordinateScalar types without Float trait requirement

- **Restrict cells\_mut() visibility to pub(crate) to prevent accidental misuse** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Update cell.rs doctest to use public clear\_all\_neighbors() API** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Update storage\_backend\_compatibility test to use get\_cell\_by\_key\_mut()** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Update microbenchmarks.rs to use insert\_cell\_unchecked() helper** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Mark Phase 4 Step 6 tasks as completed in docs/phase4.md** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  WARP.md:

- **benches/microbenchmarks.rs: Cache benchmark seed to reduce repeated** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  environment variable parsing; fix misleading comment about mutable
  TDS requirement (insert_cell_unchecked, not cells_mut)

- **src/core/cell.rs: Use idiomatic flatten() for nested Option handling** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  in Cell deserialization

- **src/core/triangulation\_data\_structure.rs: Use saturating arithmetic** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  for facet map capacity to prevent overflow; add clarifying comment
  for facet check ordering; simplify dim() method logic; optimize
  get_cell_vertices() to validate and collect in single pass

- **refactor: apply code review improvements across core modules** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Implement code review suggestions to improve code quality, clarity, and
  performance across benchmarks and core triangulation modules.

  Benchmarks (microbenchmarks.rs):

- **Enhance validation benchmarks with black-box optimization guards** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Document Vertex Copy trait behavior for clarity** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Core modules:

- **Simplify dim() using saturating\_sub for cleaner arithmetic** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Refactor ensure\_neighbors\_buffer\_mut() to use get\_or\_insert\_with** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Cache margin factor cast to avoid repeated conversions** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Use saturating arithmetic for capacity calculations in TDS and insertion** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  algorithm to prevent overflow (cells.len() * (D+1))

- **Replace silent continue with explicit error in cavity boundary detection** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  when bad_cell_key missing - surfaces structural errors for diagnosability

- **Preallocate exact capacity in get\_cell\_vertices() (use cell\_vertices.len()** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  instead of D+1)

  API Improvements:

- **Restrict Cell::clear\_neighbors() to pub(crate) to enforce TDS validation** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Document Cell serialization field count optimization to clarify intentional** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  redundant is_some() check

  Benchmark Enhancements:

- **Replace Once with OnceLock for benchmark seed caching (simpler, more** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  idiomatic)

- **Update bench-dev to use environment variables for Criterion tuning** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Enhance help text documenting benchmark configuration options** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Code Quality:

- **Use direct f64 const comparison instead of to\_bits() (stable since 1.83.0)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Use inline format args for clippy compliance** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  All changes maintain backward compatibility and pass full test suite
  (902 Rust tests + 205 doc tests + 442 Python tests).

- **These bounds were unnecessary as code only uses owned value division (T / T)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Affected files: insertion algorithms, Bowyer-Watson implementations, facet cache,** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  boundary analysis, convex hull, and geometric utilities

  #### Migrate cell tests from deprecated cell! macro

- **Migrated 40+ test functions in src/core/cell.rs to use Tds::new()** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Test categories: trait implementations, dimensional tests (1D-5D), geometric** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  properties, validation, and PartialEq comprehensive tests

  #### Fix critical integer margin calculation bug

- **Root cause: cast::<f64, T>(0.1) returns Some(0) for integers, not None** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Now correctly handles None, Some(0) (integers), and Some(mf) (floats)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  #### Improve justfile and benchmark clarity

- **Clarified vertex reuse comment in incremental construction benchmarks** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Breaking changes: None - all changes are internal improvements
  Test coverage: All 902 unit tests + 202 doc tests + 442 Python tests pass

- **Uses Vertex::PartialEq (coordinate-based) instead of vertex keys** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Includes comprehensive documentation with 2 doctests** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Refactor Tds::PartialEq\*\* (src/core/triangulation\_data\_structure.rs)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Simplified from ~70 lines to ~40 lines** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Now uses Cell::eq\_by\_vertices() for consistent behavior** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Both vertices and cells now compared using Vertex::PartialEq** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **More maintainable: cell comparison logic centralized in Cell** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Extract margin calculation helper\*\* (src/core/traits/insertion\_algorithm.rs)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Handles both float and integer coordinate types** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Prevents drift between implementation and tests** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Simplify double is\_some() check\*\* (src/core/cell.rs)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Refactored Cell serialization to check data.is\_some() once** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **More explicit and avoids redundant checks** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  #### Testing & Quality

- **Changed coplanar test to use tds.is\_valid() instead of cell count** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Benchmark improvements\*\* (benches/microbenchmarks.rs)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Gated seed printing behind PRINT\_BENCH\_SEED env var** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Improved black\_box usage for validation benches** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Documentation improvements\*\*** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Enhanced Cell::eq\_by\_vertices documentation with examples** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  All changes maintain backward compatibility and pass:

- **Clippy pedantic/nursery/cargo checks** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **refactor: consolidate and deduplicate tests using dimensional macros** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Replace redundant dimension-specific tests with macro-generated tests (2D-5D coverage)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Optimize PartialEq for Tds by sorting cells by UUID instead of coordinate vectors** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Update all tests to use new APIs and maintain 919 passing unit tests** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  All tests pass, no functionality changes.

- **refactor: reorganize and streamline Bowyer-Watson tests, improve benchmarks** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Reorganize test suite in bowyer_watson.rs for better clarity and
  maintainability while removing redundant tests (97 → 93 tests):

- **Organize tests into logical categories: diagnostic/invariant, trait** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  implementation, regression, and error handling

  Enhance robust_bowyer_watson.rs:

- **Replace invalidate\_cache\_atomically() with invalidate\_facet\_cache()** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  for consistent cache management API

- **Clamp negative visibility threshold multipliers to zero to prevent** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  invalid threshold calculations

- **Convert performance test to functional test with proper assertions** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Improve benchmarks (microbenchmarks.rs):

- **Trim seed strings before parsing to avoid allocation overhead** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Clarify benchmark comments for seed handling** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Add convex_hull.rs improvements:

- **Adjust FacetCacheProvider trait bounds (use std::iter::Sum, require** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  DeserializeOwned)

  All tests pass (923 lib tests, 204 doc tests, 442 Python tests).

- **Replace direct field access with FacetCacheProvider trait methods:** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\`hull.facet\_to\_cells\_cache.load()\` → \`hull.facet\_cache().load()\`** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\`hull.cached\_generation.load()\` → \`hull.cached\_generation().load()\`** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Replace direct facet access with public API:** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\`&hull.hull\_facets\[0\]\` → \`hull.get\_facet(0).unwrap()\`** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\`hull.hull\_facets.len()\` → \`hull.facet\_count()\`** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\`hull.hull\_facets.iter()\` → \`for i in 0..hull.facet\_count()\`** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  These changes expand API compatibility (fewer bounds) and ensure tests
  use proper public interfaces instead of internal fields.

  All tests pass (923 lib tests, 204 doc tests, 442 Python tests).

- **\*\*Explicit NaN check in visibility threshold calculation\*\*** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Prevents NaN from silently propagating to threshold calculation** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Updates comment to clarify handling of invalid multipliers (NaN or negative)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Replace silent \`continue\` with proper error return for incomplete cells** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **If all vertex keys exist but cell has <D+1 vertices, this indicates** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  malformed cell structure (TDS corruption), not geometric degeneracy

- **Change \`unwrap\_or(0) == tds.generation()\` to \`is\_some\_and(|&g| g == tds.generation())\`**
  [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Default hull (with creation\_generation unset) now correctly returns false** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  for any TDS, aligning with documented "invalid/uninitialized hull" intent

- **Rename \`test\_get\_or\_build\_facet\_cache\` → \`test\_try\_get\_or\_build\_facet\_cache\`**
  [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Rename \`test\_find\_bad\_cells\_handles\_tds\_corruption\` →** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  `test_find_bad_cells_no_false_corruption_errors` to match actual behavior

  All changes maintain backward compatibility and pass existing test suite
  (923 lib tests + 204 doc tests + 442 Python tests).

- **perf: optimize allocations and relax trait bounds** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Apply code review optimizations for better performance and flexibility:

- **\*\*Move config validation to construction time\*\* (robust\_bowyer\_watson.rs)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Simplifies threshold calculation from 13 lines to 1 line** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Zero runtime overhead (debug\_assert compiles to nothing in release builds)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Reduce heap allocations\*\* (convex\_hull.rs)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Use SmallBuffer for facet\_points in visibility checks** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Keeps typical dimensions (≤7D) on stack, avoids heap allocation** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Avoid unnecessary Vertex materialization\*\* (convex\_hull.rs)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Map directly to Point<T, D> instead of .copied() full Vertex** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Reduces memory copying by ~50% (only point data, not UUID/metadata)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Improves cache locality in centroid calculations** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **FacetCacheProvider trait and implementations don't serialize/deserialize** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **build\_facet\_to\_cells\_map() only works with vertex keys (no serde)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Relaxes trait bounds: U/V: DataType (was DataType + DeserializeOwned)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Allows trait implementation for non-deserializable types** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  All changes maintain backward compatibility and pass existing test suite
  (923 lib tests + 204 doc tests + 442 Python tests).

- **\*\*radius\_ratio\*\*: Computes circumradius/inradius ratio (lower = better)** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Optimal value ≈ D for equilateral D-simplices** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **\*\*normalized\_volume\*\*: Scale-invariant volume metric (higher = better)** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Normalizes volume by edge length^D** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **\*\*simplex\_volume\*\*: D-dimensional simplex volume calculation** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Optimized formulas for 1D-3D (cross product, triple scalar product)** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Gram matrix method for 4D+ (numerically stable)** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **\*\*inradius\*\*: Inscribed sphere radius for D-dimensional simplices** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Formula: inradius = D × volume / surface\_area** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Uses facet\_measure for surface area computation** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **\*\*hypot\*\*: Numerically stable Euclidean norm for D-dimensional vectors** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Uses std::f64::hypot for 2D** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Scaled computation for higher dimensions to avoid overflow/underflow** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  All utilities include:

- **Safe coordinate conversion with proper error propagation** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Dimension-specific optimizations (1D-3D explicit formulas)** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Comprehensive doc comments with mathematical background** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Extensive test coverage (1D-5D across multiple geometries)** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  #### Topology Repair Enhancement

  Updated `fix_invalid_facet_sharing()` to use quality metrics:

- **When multiple cells share a facet, selects the two highest-quality cells** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  using radius_ratio (lower = better, equilateral has ratio ≈ D)

- **Falls back to deterministic UUID ordering if quality computation fails** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  for any cell (ensures robustness even with degenerate cells)

- **Iterative repair (max 10 iterations) to handle cascading issues** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Gracefully tolerates intermediate inconsistent states during repair** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Debug output for troubleshooting complex repair scenarios** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  #### Test Coverage

  Added 22 new tests:

- **10 tests for simplex\_volume, inradius, facet\_measure utilities (1D-4D)** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **12 tests for quality metrics (radius\_ratio, normalized\_volume)** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Tests across 2D-3D for various simplex types** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Scale-invariance verification** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Correlation testing between metrics** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  All 803 library tests pass.

  #### Dictionary Updates

- **Organized by ascending dimension for clarity** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  New tests in src/geometry/quality.rs:

- **Basic functional tests: 12 tests covering radius\_ratio and normalized\_volume across 2D-5D**
  [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Property-based tests: 7 tests using proptest for scale, translation, rotation invariance, lower bounds, positivity, and correlation**
  [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Total: 23 new tests, organized by function then ascending dimension** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  Quality improvements:

- **Updated cspell dictionary with academic author names** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **All 803 Rust tests + 425 Python tests passing** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **All quality checks (clippy pedantic/nursery, fmt, docs, spell) passing** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  Relates to #105 - geometric quality measures for cell selection

- **Replace factorial function calls with inline f64 computation loops** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  to avoid usize overflow and precision loss beyond 2^53-1

- **Use \`safe\_usize\_to\_scalar\` for safe casting in factorial calculations** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Reflection invariance in 2D** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Aspect ratio monotonicity** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Quality ranking transitivity** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Normalized volume upper bounds** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Degeneracy detection for near-collinear simplices** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **3D rotation invariance** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Edge cases: collinear points, near-duplicate vertices, mixed scales** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Dimension-specific: 6D simplices, extreme aspect ratios (2D-4D)** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Sliver detection: classic slivers, needle/cap-shaped cells** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Error paths: invalid cell keys, QualityError trait validation** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Quality rankings: consistency checks and threshold validation** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Special configurations: right triangles, isosceles simplices** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Update tests to expect errors for collinear points** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  Proptest improvements:

- **Optimize memory tracking with static System and selective refresh** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Upgrade sysinfo from 0.32 to 0.37.2 for benchmark memory tracking** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Update Cargo.lock with transitive dependency changes** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  Benchmark improvements (large_scale_performance):

- **Optimize memory tracking with static System and selective process refresh** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Refactor hybrid cell selection to explicitly build keep set** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Check 2D line segments for coincident points (length < epsilon)** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Check 3D triangles for collinear points (area < epsilon)** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Check 4D+ Gram matrix for zero determinant (coplanar points)** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **refactor(bench,geometry): improve benchmark accuracy and reduce test noise** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  Benchmark improvements (large_scale_performance):

- **Optimize validation benchmark: pre-collect cell keys to avoid** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  re-enumeration overhead in hot loop

- **Report both total and TDS-only memory deltas for clearer profiling** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  Geometry util improvements (util.rs):

- **Gate debug println statements with TEST\_DEBUG env var to reduce CI noise** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Simplify factorial calculation in facet\_measure\_gram\_matrix: use safe** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  u8 conversion instead of safe_usize_to_scalar per iteration

- **Avoid clippy::cast\_precision\_loss warnings with lossless f64::from(u8)** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Update CHANGELOG.md with recent commits** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Prevents silent failures where epsilon falls back to zero, disabling degeneracy detection**
  [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Align epsilon threshold from 1e-10 to 1e-12 in inradius for consistency with simplex\_volume**
  [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Affects degeneracy checks in simplex\_volume (1D, 2D, 3D cases) and inradius functions** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

### Deprecated

- **Deprecated \`Cell::facet\_views()\` instance method in favor of static \`facet\_views\_from\_tds()\`**
  [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Deprecate cell! macro and Tds::get\_cell\_by\_key() in favor of safer APIs** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Suppress deprecated macro warnings in benchmark code** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Code quality:

- **Deprecate contains\_vertex in favor of contains\_vertex\_key for consistency** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Migrate tests from deprecated API\*\*** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Replace all uses of deprecated \`get\_or\_build\_facet\_cache()\` with** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  `try_get_or_build_facet_cache().expect()` for proper error handling

### Removed

- **memory\_scaling.rs: Deleted (422 lines)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **triangulation\_vs\_hull\_memory.rs: Deleted (390 lines)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Removed \[\[bench\]\] entries from Cargo.toml** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  #### Deduplicated microbenchmarks

- **Removed duplicate assign\_neighbors benchmarks from microbenchmarks.rs (2D-5D)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Updated benches/README.md: Removed deprecated benchmarks, updated overview** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Remove redundant generic array serialization constraints from where clauses** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*traits/facet\_cache.rs\*\*: Remove Serialize from docstring example trait bounds to match**
  [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  broader trait bound relaxations.

  Python Script Improvements (scripts/):

- **Remove misleading "Memory: Peak RSS" metric from report (script only parses timing)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **refactor(phase4): fix iterator API and remove storage implementation details** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Complete Phase 3A cleanup by fixing iterator API usage and abstracting
  storage implementation details from public documentation.

  Iterator API Fixes:

- **Remove redundant \`.iter()\` calls on already-iterating methods** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Remove duplicative #\[must\_use\] attributes (inherited from Iterator trait)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Logic & Import Fixes:

- **Remove #\[cfg(test)\] from Vertex import (used in non-test code)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Remove unused type aliases and mark helper functions appropriately** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Remove redundant trait bounds (\[f64; D\]: Copy + Sized)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Removed misleading claim about Cell storing vertex UUIDs** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Removed editorial aside from table** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Remove trailing whitespace from workflow\*\*** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Remove emoji coupling from assertions\*\*** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Remove redundant neighbor length check in set\_neighbors\_by\_key()** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  (already validated in validate_neighbor_topology)

- **Remove duplicate >2 cells per facet check in assign\_neighbors()** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  (early guard sufficient)

- **Remove redundant test for vertices\_mut() (only tested .len())** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Remove ensure\_neighbors\_buffer() helper from insertion\_algorithm.rs** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Remove redundant local imports of InSphere/insphere predicates** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Remove 9 legacy wrapper functions (cleaner than dead\_code annotations)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Remove redundant debug\_asserts for coordinate comparability** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Remove unused std::cmp::min import** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Removed redundant division trait bounds from 50+ method signatures** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Removed #!\[allow(deprecated)\] attribute from test module** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Simplified validation black\_box comments and removed unnecessary wrapping** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Remove 7 duplicate 3D-only tests from insertion\_algorithm.rs now covered by dimensional macros**
  [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Remove overlapping tests in triangulation\_data\_structure.rs and convex\_hull.rs** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Remove redundant tests: debug\_bowyer\_watson\_simple,** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  debug_bowyer_watson_step_by_step, test_algorithm_buffers_are_reused,
  test_insertion_strategy_standard_branch

- **Consolidate and simplify remaining tests: remove verbose println** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  statements, streamline assertions, add clear section headers

- **Remove unnecessary trait bounds (ComplexField, One,** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Serialize/Deserialize) from main impl

- **refactor: remove unused generic bounds and fix encapsulation violations** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Remove unnecessary generic bounds that over-constrain APIs:

  bowyer_watson.rs:

- **Remove redundant \`where T: NumCast\` from determine\_insertion\_strategy** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  (already present in impl block at line 259)

  robust_bowyer_watson.rs:

- **Remove \`ordered\_float::OrderedFloat<f64>: From<T>\` bounds** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  (11 occurrences across impl blocks and methods - never used)

- **Remove \`\[f64; D\]: DeserializeOwned + Serialize + Sized\` bounds** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  (never used for array serialization)

- **Remove unused \`Serialize\` import** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  convex_hull.rs:
  Fix encapsulation violations in test module (40+ occurrences):

- **Remove \`#\[allow(deprecated)\]\` attributes (no longer needed)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Remove defensive runtime clamping in hot path (fallback\_visibility\_heuristic)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Eliminates one clone() allocation by using .into\_vec()** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Remove unnecessary DeserializeOwned bounds\*\* (facet\_cache.rs)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Remove unused \`peroxide::statistics::ops::factorial\` import** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Remove stale proptest regression files** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **docs: Remove outdated TODOs and update documentation references** [`a4213e1`](https://github.com/acgetchell/delaunay/commit/a4213e1)

  Cleaned up outdated TODOs and documentation references across the codebase:

  Code cleanup:
  - Remove outdated Phase 3 cache migration TODOs from bowyer_watson.rs
  - Remove deprecated Cell method references and old commented code from cell.rs
  - Update issue reference from #86 to #105 in triangulation_data_structure.rs
  - Remove outdated test TODO comments from convex_hull.rs

  Documentation updates:
  - Update docs/README.md to reference existing files (property_testing_summary.md, topology.md) instead of non-existent optimization guides
  - Update docs/OPTIMIZATION_ROADMAP.md to reference archived Phase 2/3 documentation in docs/archive/ instead of removed files
  - Update docs/code_organization.md project structure tree to reflect current files:
  - Add proptest files (proptest_point.rs, proptest_predicates.rs, proptest_triangulation.rs)
  - Add docs/archive/ directory with historical documentation
  - Add property_testing_summary.md and topology.md
  - Update test counts from 772/774 to current 781 tests across all documentation

  All changes are internal cleanup with no functional impact. All 781 tests passing.

### Fixed

- **Fix missing backticks in SlotMap/DenseSlotMap doc comments** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  This enables performance comparison between SlotMap and DenseSlotMap storage strategies for future optimization work.

- **Feature flag verification: Confirm correct backend activation** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Comparison Tool (scripts/compare_storage_backends.py):

- **fix(phase4): fix Phase 4 evaluations** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Major improvements to Phase 4 SlotMap evaluation infrastructure:

  Storage Backend Comparison:

- **Fix run\_cargo\_command usage in compare\_storage\_backends.py** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Fix documentation typos in phase4.md and TDS comments** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **fix: improve serialization, documentation, and linting across core and scripts** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Core Library Improvements (src/):

- **Fix unused variable linting errors (exception variables, regex captures, test diffs)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Fix winner comment to match implementation (no red emoji for slower backend)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*tests/test\_compare\_storage\_backends.py\*\*: Fix unused \`diffs\` variable in test**
  [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Fix \`.len()\` calls on iterators to use \`.count()\`** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Fix assertion operator precedence: \`!x == 0\` → \`assert\_ne!(x, 0)\`** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Fix Result handling in examples for vertex\_uuids/vertex\_uuid\_iter** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Documentation:

- **Fixed serialization to use \`map()\` + \`collect::<Result<\_, \_>>()\` instead of \`filter\_map()\`**
  [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **refactor: improve TDS robustness, benchmarking, and code quality** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Core improvements:

- **Fix clippy errors: uninlined format args, missing doc backticks, unnecessary closures** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Fix spelling in documentation comments** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **refactor: improve TDS robustness and profiling workflow clarity** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Core Changes:

- **Fix facet map overflow risk by detecting >2 cell shares early** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Fix deserialization to fail fast on topology rebuild errors** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Benchmark Improvements:

- **Fix BENCH\_LARGE\_SCALE to properly handle false/0 values** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Update examples/README.md with correct benchmark command** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **fix: critical quality metric bug and code review improvements** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  #### Critical Fixes

- **\*\*Fix translation-dependent epsilon in quality metrics\*\* (CRITICAL)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Fix dim() underflow for empty triangulations\*\*** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Fix is\_vertex\_interior to return Result\*\*** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Callers updated to handle Result (fallback to HullExtension on error)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Fix Cell serialization documentation\*\*** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Fixed memory command to use memory\_profiling filter** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Fix phase4.md status inconsistency\*\*** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Fixed CI whitespace check failures** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **refactor: optimize TDS, improve encapsulation, and fix workflow issues** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Core Optimizations (triangulation_data_structure.rs):

- **Improve is\_vertex\_interior error handling** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Return InsertionStrategy::Fallback on errors for explicit handling** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Compile-Time Safety (insertion_algorithm.rs):

- **Guard integer optimization (degenerate\_count \* 2 > total)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Fix cron schedule in profiling-benchmarks.yml** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  (change from `0 2 1-7 * 0` to `0 2 * * 0` with day-of-month guard)

- **Fix Step 4 status inconsistency in docs/phase4.md** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **refactor: apply code review fixes for robustness and API safety** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Apply comprehensive improvements from code review feedback addressing
  maintainability, generic programming, and API safety concerns.

  Key changes:

  insertion_algorithm.rs:

- **Fix duplicate cell detection to use stable UUID ordering instead of** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  implementation-defined VertexKey ordering

- **refactor: improve code clarity and robustness across core modules** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **src/core/traits/insertion\_algorithm.rs: Simplify degenerate cell** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  threshold check with integer arithmetic; remove unused import;
  extract set_neighbor_with_validation() helper to reduce duplication

- **Document strict vs. recovery-friendly error handling patterns** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Changes maintain backward compatibility while improving code clarity,
  reducing debug build overhead, and making error handling more explicit.

  All 902 library tests pass. Clippy clean with pedantic lints.

- **refactor: improve error handling, safety, and benchmark configurability** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Apply code review feedback to enhance safety and flexibility:

  Core Safety Improvements:

- **Simplify dim() method while preserving correct -1 return for empty** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  triangulations

- **fix: remove unnecessary trait bounds and migrate tests from deprecated cell! macro (#110)**
  [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  This commit addresses multiple code quality improvements and bug fixes:

  #### Fixes Issue #110: Remove unnecessary `for<'a> &'a T: Div<T>` bounds

- **Fixed type mismatches (&Cell vs Cell) in equality comparisons** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Fixed bug in is\_vertex\_likely\_exterior where integer types would receive** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  zero margin instead of range/10 with minimum 1

- **Fixed 6 misleading seed caching comments in benchmarks** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Fix test assertion brittleness\*\* (src/core/algorithms/robust\_bowyer\_watson.rs)** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Allows empty/partial triangulations for degenerate inputs** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Fixed non-deterministic duplicate cell setup** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Fix benchmark to use clone and insert\_cell\_unchecked to avoid dangling keys** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **refactor: improve error handling and NaN detection consistency** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

  Address code review feedback with three key improvements:

- **\*\*Consistent TDS corruption error handling\*\*** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **\*\*Fix default hull validation semantics\*\*** [`4ecc21f`](https://github.com/acgetchell/delaunay/commit/4ecc21f)

- **Detects sliver and near-degenerate cells** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Avoids numerical issues with very small cells** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  Both metrics use the new geometric utility functions and provide
  comprehensive error handling for degenerate cases.

  #### New Geometric Utilities (`src/geometry/util.rs`)

- **Error handling for degenerate cases** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Fixed numeric literal separators for clippy compliance** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  Closes #105 (improve cell retention criteria using geometric quality)

- **simplex\_volume: 6 tests covering 1D-4D simplices, degenerate cases** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **inradius: 4 tests covering 2D-3D with degenerate handling** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Error handling: 1 test for error message formatting** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Fixed suboptimal\_flops warnings using mul\_add for better performance** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **refactor(geometry): improve numerical robustness in Gram matrix volume calculations** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Apply clamping pattern for small negative Gram determinants (numerical tolerance)** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Scale stability across many orders of magnitude** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Precision: f32 vs f64 comparison** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Fix quality function trait bounds: use \`Div<Output = T>\` instead of** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  `for<'a> &'a T: Div<T>` for cleaner generic constraints

  Facet fixing improvements (Tds):

- **Improve quality-based cell selection in fix\_invalid\_facet\_sharing** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Prefer scored cells over unscored cells with deterministic UUID fallback** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Improve error handling and iteration tracking** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Return errors instead of zero for degenerate simplices** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Fix insphere distant point test to use circumcenter/circumradius** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Improve test robustness for edge cases** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  Benchmarks:

- **Fix memory delta computation with proper i128 clamping** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  Dictionary:

- **fix(deps,bench,core,geometry): upgrade sysinfo and improve code quality** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  Dependency updates:

- **Fix sysinfo API: use nothing() instead of deprecated new()** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Fix validation throughput: report actual cells validated, not input points** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Correct memory unit labels: use KiB (kibibytes) instead of KB** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Simplify facet map fallback with cleaner unwrap\_or\_else** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Prefer quality-scored cells over unscored with deterministic fallback** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  Geometry util improvements (facet_measure):

- **Update tests to expect errors for degenerate cases** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Fix test cases using collinear or near-degenerate configurations** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

  All 840 Rust tests + 425 Python tests pass.

- **fix(docs,geometry): update changelog and fix spell check errors** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Fix safe\_usize\_to\_scalar usage in volume\_from\_gram\_det** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **refactor(geometry): improve epsilon conversion robustness in degeneracy checks** [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

- **Replace \`unwrap\_or\_else(T::zero)\` with proper error handling for epsilon conversions**
  [`c707b09`](https://github.com/acgetchell/delaunay/commit/c707b09)

## [v0.5.1](https://github.com/acgetchell/delaunay/compare/v0.5.0...v0.5.1) - 2025-10-16

### Merged Pull Requests

- Refactor/complete phase 3 [`#103`](https://github.com/acgetchell/delaunay/pull/103)

- Changed: Replaces fxhash with rustc-hash for performance [`#101`](https://github.com/acgetchell/delaunay/pull/101)

- Update/utilities and roadmap [`#100`](https://github.com/acgetchell/delaunay/pull/100)

### Added

- **Added \`test\_categorize\_explicit\_prefix\_all\_forms\` for comprehensive coverage** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)
  - API
    - Add trait bound documentation for ComplexField requirement
    - doc\_markdown: Add backticks around \`FacetView\` API reference
  - Tests
    - Added: Implements property-based testing framework
    - Adding comprehensive property-based tests to verify
    - Added regression test \`test\_categorize\_explicit\_prefix\_takes\_precedence\`
    - Added \`test\_categorize\_explicit\_prefix\_takes\_precedence\` for regression
    - All 106 Python tests pass (added 2 new test methods)
  - Other
    - Refactor Vertex, add Phase 3 checklist
    - Implementing dimension checks with error handling.
    - Tentatively execute insertion algorithm (may create cells)
    - Add topology mathematical terms to cspell dictionary
    - Add cspell dictionary entries for technical terms
    - too\_long\_first\_doc\_paragraph: Add paragraph break after NOTE
    - Check for explicit category prefixes first (Fixed:, Added:, Removed:, etc.)
    - Reorder keyword priority: action verbs (add/remove/fix) before
    - Match both short forms (fix:, add:) and past tense (fixed:, added:)

### Changed

- **Changed(core): Starts migration of Cell to key-based storage \[ci skip\]** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  Starts the migration of the `Cell` struct to store `VertexKey` and `CellKey`
  instead of full objects for improved memory efficiency and cache
  locality.

  Big refactor with architectural decisions, I'm going to sleep on it.

- **Changed: Refactor Cell to use key-based storage (internal) \[skip ci\]** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  Refactors the Cell struct to use VertexKey/CellKey references
  instead of full objects for improved memory efficiency and cache
  locality.

  This is an internal change as part of Phase 3A refactoring.

  Impact: Reduces memory footprint and improves performance.

  Migration: Cell API now requires TDS context for vertex access.
  Cell::vertices() removed (use vertex_keys() + TDS lookup).

  See docs/phase_3a_implementation_guide.md for details. This doesn't yet compile, but too big to leave on my local system.

- **Changed: Updates Phase 3A docs, migrates traits/algorithms. \[ci skip\]** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  Updates documentation to reflect the completion of facet tests
  in `src/core/facet.rs` and the transition to Phase 3C work, which
  involves migrating traits and algorithms to remove deprecated Facet
  references.

  Phase 3C migration is now underway, focusing on updating trait
  method signatures in `InsertionAlgorithm` and refactoring the
  `ConvexHull` module.

  Not quite compiling yet.

- **Changed: Refactors core TDS for key-based storage** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  Refactors the core Triangulation Data Structure (TDS) to use
  key-based storage for vertices and cells.

  This change improves performance by reducing memory footprint
  and enabling more efficient data access. Facet is refactored and
  neighbor relationships are updated to use CellKeys instead of
  UUIDs.

  Includes updates to documentation, examples, and tests to align
  with the new key-based architecture.

  Fixes #84

  Note: This is a non-public API change.
  Refs: #101

- **Changed: Completes Phase 3 refactoring, key-based storage** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  Completes the Phase 3 structure refactoring by migrating the
  remaining code to use key-based storage and lightweight facet
  handles. This includes updating the `InsertionAlgorithm` trait
  and refactoring the `ConvexHull` module. All 772 tests pass.

  Phase 3C tasks were completed as part of the comprehensive Phase
  3A refactor. All documentation has been archived.

  Fixes #97

- **Changed: Improves robustness of Bowyer-Watson algorithm** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  Addresses edge cases in the Bowyer-Watson algorithm by
  enhancing facet visibility checks and adding duplicate
  vertex rejection, preventing triangulation failures.
  Also includes performance optimizations via vertex caching.

- **Changed: Refactors facet handling for performance and clarity** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  Refactors facet handle usage to enhance performance and improve
  code clarity across multiple modules. The changes involve:

- **Replacing raw \`(CellKey, u8)\` tuples with a dedicated \`FacetHandle\`** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  struct, improving type safety and readability.

- **Optimizing facet-to-cells map to directly store \`FacetHandle\`** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  instances, reducing tuple size and improving memory efficiency.

- **Improving boundary facet identification in cavity computation** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  by scanning only facets of bad cells instead of building a
  global facet-to-cells map.

- **Enhancing handling of point coordinates, NaN values, and vertex** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  ordering for improved stability.

- **creation\_generation (OnceLock<u64>): immutable snapshot for validity checks** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **cached\_generation (Arc<AtomicU64>): mutable for cache state management** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  Previously, a single generation field was used for both purposes. After TDS
  mutation + invalidate_cache(), the generation would reset to 0, allowing cache
  rebuild to update it to match the new TDS generation. This made is_valid_for_tds()
  incorrectly return true while facet handles still referenced stale topology.

  Insertion Algorithm Transactional Rollback:
  Implement "Validate Tentative Commit" pattern for atomic vertex insertion:

- **Capture pre-insertion state (vertex count, cell count, generation)** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **Validate topology constraints (neighbors, incident cells)** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **On validation failure: rollback\_vertex\_insertion() atomically:** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **Bumps generation to invalidate dependent caches** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **Logs rollback details for debugging bulk operations** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  This ensures TDS remains in a consistent state even when insertion fails
  partway through topology construction, preventing corrupted triangulations.

  API Consistency:

- **Replace to\_array() calls with coords() for uniform coordinate access** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **refactor(core): optimize facet key derivation and convex hull visibility** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  Major changes:

- **Rename \`derive\_facet\_key\_from\_vertices\` to \`derive\_facet\_key\_from\_vertex\_keys\`**
  [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  to better reflect its vertex-key-based operation

- **Update all callsites across core algorithms and convex hull module** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **Optimize convex hull visibility testing with lazy vertex materialization** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **Reorganize ConvexHull impl blocks to separate simple accessors from complex operations** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  Performance improvements:

- **Reduce vertex fetches and UUID lookups in hot path by deriving facet keys directly from vertex keys**
  [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **Batch cache loading in \`find\_visible\_facets\` to avoid redundant atomic loads** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **Materialize vertices only when needed (after cache lookup and validation)** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **Better cache locality through key-based operations** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  API changes:

- **Split \`is\_facet\_visible\_from\_point\` into public API and internal cache-aware helper**
  [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **Move accessor methods (facet\_count, get\_facet, facets, is\_empty, etc.) to minimal impl block**
  [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **Update OPTIMIZATION\_ROADMAP.md with current status** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **Improve inline comments explaining optimization rationale** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  Files changed: 9 files with 814 insertions(+), 691 deletions(-)

- **empty\_line\_after\_doc\_comments: Move empty line inside doc comment** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **Changelog update with Phase 3 commits** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **Fall back to keyword-based categorization only when no prefix is found** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **All 424 Python tests pass** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **Validated with ruff linting and formatting** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  This ensures changelog entries are categorized by explicit intent rather
  than incidental keywords, improving accuracy of Keep a Changelog formatting.

- **Fall back to keyword-based categorization only when no prefix is found** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **Validated with ruff linting and formatting** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  This ensures changelog entries are categorized by explicit intent rather
  than incidental keywords, improving accuracy of Keep a Changelog formatting.

- **Changed: Replaces fxhash with rustc-hash for performance** [`3c56251`](https://github.com/acgetchell/delaunay/commit/3c56251)

  Replaces the `fxhash` crate with `rustc-hash` for improved
  performance in hash-based collections. This change enhances the
  speed of internal data structures by utilizing a faster hashing
  algorithm.

  Adds detailed logging for performance comparisons to better
  understand benchmark results and potential regressions.

- **Changed: Replaces fxhash with rustc-hash for performance** [`3c56251`](https://github.com/acgetchell/delaunay/commit/3c56251)

  Replaces the fxhash hashing algorithm with rustc-hash.

  rustc-hash provides improved performance characteristics for the
  delaunay triangulation algorithm, leading to faster overall execution.

  Refs: #100

- **Changed: Updates cspell dictionary and changelog scripts** [`353a46e`](https://github.com/acgetchell/delaunay/commit/353a46e)

  Updates the cspell dictionary to include new words and remove obsolete
  entries, ensuring consistent spell-checking across the project.

  Enhances changelog utilities with new ANSI color codes for terminal
  output, improved git root detection, and fixes for long title formatting.

- **Changed: Updates utilities and development workflows** [`353a46e`](https://github.com/acgetchell/delaunay/commit/353a46e)

  Refactors the build system, CI, and benchmarking tooling for
  improved development workflows. This includes updates to
  the spellcheck dictionary, workflow configurations, and
  the introduction of a `justfile` for task automation.
  These changes streamline common development tasks
  and improve overall project maintainability.

- **Changed: Improves utility script robustness and tooling** [`353a46e`](https://github.com/acgetchell/delaunay/commit/353a46e)

  Enhances the robustness of several utility scripts by ensuring they
  gracefully handle cases where no files are found. This prevents errors
  and improves the overall user experience.

  Updates tooling to explicitly track file renames in spell check,
  ensuring proper file handling.

- **Changed: Improves development workflows with \`just\`** [`353a46e`](https://github.com/acgetchell/delaunay/commit/353a46e)

  Migrates from `cargo alias` commands to `just` for improved
  workflow management and consistency across development tasks.

  Updates documentation and examples to use `just` commands,
  simplifying common operations and enhancing the developer
  experience.  Removes the `.cargo/config.toml` alias definitions.

- **Changed: Adjusts regression threshold for CI variability** [`353a46e`](https://github.com/acgetchell/delaunay/commit/353a46e)

  Increases the performance regression threshold from 5% to 7.5%
  to account for increased variability observed in the CI environment.
  This reduces false positive regression alerts.

### Removed

- **Removes the vertex and UUID mapping** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **Scans for and removes all cells referencing the failed vertex** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **Remove unused std::f32/f64 imports in geometry/util.rs** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **"Fixed: Correctly count removed cells in Bowyer-Watson" was categorized** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  as "### Removed" instead of "### Fixed"

- **The word "removed" in the description triggered incorrect categorization** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  Solution:

- **"Fixed: Correctly count removed cells in Bowyer-Watson" was categorized** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  as "### Removed" instead of "### Fixed"

- **The word "removed" in the description triggered incorrect categorization** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

### Fixed

- **Fixed: Correctly count removed cells in Bowyer-Watson** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  Addresses an issue in the Bowyer-Watson algorithm where cell
  removal was overcounted due to duplicate entries in the bad cells
  list. This fix deduplicates the bad cells to ensure accurate
  counting.

  Also, optimizes facet handling during cell creation by ensuring all
  facet data is extracted before any cells are created, providing
  atomic behavior with rollback capabilities in case of failure.
  This prevents inconsistent triangulation states and ensures data
  integrity.

  Additionally, removes an unused parameter from the
  `is_facet_visible_from_vertex_robust` function and streamlines facet
  creation using `SmallBuffer` for efficiency.

  The convex hull code is also updated to check for a stale hull to
  prevent errors.

- **fix: stale hull detection and add transactional rollback** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  ConvexHull Stale Detection Fix:
  Fix critical bug where ConvexHull could silently revalidate after
  invalidate_cache() by implementing two-generation design:

- **Fix markdown linting in docs/topology.md** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  Reported-by: CodeRabbit AI Review

- **docs: fix clippy warnings in util.rs doc comments** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  Resolves three clippy lints in src/core/util.rs:

- **Improved facet index error handling in util.rs** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

- **fix(scripts): prioritize explicit prefixes in changelog categorization** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  Fixes a bug where commits with explicit category prefixes (e.g., "Fixed:")
  were incorrectly categorized based on incidental keywords in their message.

  Problem:

- **fix(scripts): prioritize explicit prefixes in changelog categorization** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  Fixes a bug where commits with explicit category prefixes (e.g., "Fixed:")
  were incorrectly categorized based on incidental keywords in their message.

  Problem:

- **Regex patterns like ^fixed?: matched "fixe:" but not "fix:"** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

  Solution:

- **Allow optional whitespace before colon (e.g., "fix :", "fixed :")** [`2db8acd`](https://github.com/acgetchell/delaunay/commit/2db8acd)

## [v0.5.0](https://github.com/acgetchell/delaunay/compare/v0.4.4...v0.5.0) - 2025-09-20

### Merged Pull Requests

- Refactor/phase 3 [`#90`](https://github.com/acgetchell/delaunay/pull/90)

- Test/improve coverage [`#89`](https://github.com/acgetchell/delaunay/pull/89)

### Added

- **Adds a rollback mechanism during vertex insertion to guarantee TDS consistency if the insertion fails.**
  [`b8a2024`](https://github.com/acgetchell/delaunay/commit/b8a2024)
  - API
    - Introduces a \`rollback\_vertex\_insertion\` method to ensure consistent
  - Tests
    - Added: Comprehensive tests for robust triangulation algorithm
  - Other
    - Improves handling of near-degenerate cases by adding a configurable visibility threshold multiplier.
    - Added: Improves triangulation robustness and atomicity

### Changed

- **Changed: Improve boundary facet iteration performance** [`2a9b655`](https://github.com/acgetchell/delaunay/commit/2a9b655)

  Improves the performance of boundary facet iteration by
  implementing a lazy iterator, avoiding pre-allocation
  of a vector. Also, leverages `FacetView` to avoid
  repeated vertex lookups. Affects triangulation data
  structures and convex hull construction.

- **Changed: Temporarily allows deprecated warnings** [`2a9b655`](https://github.com/acgetchell/delaunay/commit/2a9b655)

  Allows deprecated warnings to facilitate the migration from Facet to
  FacetView. This is a temporary measure to avoid build failures during
  the transition period. Internal change.

- **Changed: Improves triangulation robustness and efficiency** [`2a9b655`](https://github.com/acgetchell/delaunay/commit/2a9b655)

  Refactors the triangulation algorithm to use `FacetView` handles,
  reducing memory allocation and improving performance, particularly
  during vertex insertion in the Bowyer-Watson algorithm.

  Updates boundary facet handling for more efficient visibility
  determination and cell creation. Removes deprecated `Facet` deserialization.

- **Changed: Optimize Bowyer-Watson with facet caching** [`2a9b655`](https://github.com/acgetchell/delaunay/commit/2a9b655)

  Improves Bowyer-Watson algorithm performance by implementing facet
  caching in `IncrementalBowyerWatson` and `RobustBowyerWatson`.
  This eliminates redundant facet mappings. Introduces breaking
  changes to boundary analysis APIs, now using iterators and
  returning `Result` for error handling consistency. Refer to
  migration guide in docs for API updates. Internal methods now
  use `FacetView` for better performance and reduced memory footprint.

- **Changed: Improves RobustBowyerWatson performance and API** [`2a9b655`](https://github.com/acgetchell/delaunay/commit/2a9b655)

  This commit improves the performance of the
  RobustBowyerWatson algorithm by caching facet-to-cell
  mappings and optimizing boundary analysis.

  It also enhances the API for boundary analysis, providing
  more consistent error handling and migration patterns,
  and modifies Tds to use empty() rather than new(&[]).
  RobustBowyerWatson is now Default.

- **Changed: Improves facet handling and fixes minor issues** [`2a9b655`](https://github.com/acgetchell/delaunay/commit/2a9b655)

  Refactors facet handling for robustness and efficiency:

- **Uses FacetView instead of Facet where possible.** [`2a9b655`](https://github.com/acgetchell/delaunay/commit/2a9b655)

- **Safely converts usize to u8 for facet indices.** [`2a9b655`](https://github.com/acgetchell/delaunay/commit/2a9b655)

- **Improves boundary facet detection.** [`2a9b655`](https://github.com/acgetchell/delaunay/commit/2a9b655)

- **Improves: Cell and Vertex performance via refactoring** [`2a9b655`](https://github.com/acgetchell/delaunay/commit/2a9b655)

  Refactors Cell and Vertex structures for significant performance
  gains by using SmallVec for zero-allocation, UUID/Key hybrid
  caching, and FastHash collections.

  This substantially reduces memory overhead, improves cache
  locality, and accelerates neighbor traversal and cell construction.
  Includes comprehensive documentation outlining the design,
  performance analysis, and migration strategy.

- **Changed: Improves triangulation robustness and performance** [`2a9b655`](https://github.com/acgetchell/delaunay/commit/2a9b655)

  Extensive improvements enhancing the triangulation algorithm's
  robustness and performance. This includes better handling of
  degenerate cases, faster hash sets, stack allocation for vertex
  points, and a rollback mechanism to guarantee TDS consistency.
  Additionally, it updates the Rust toolchain, benchmarks, and
  fixes various error paths and edge cases. (Internal Change)

- **Changed: Clarifies data type constraints for vertices** [`b8a2024`](https://github.com/acgetchell/delaunay/commit/b8a2024)

  Updates the documentation and adds a test case to clarify the
  limitations and alternatives for using string-like data with
  vertices, as only Copy data types are supported. This includes
  recommendations for using numeric IDs with external lookups,
  character codes, and custom Copy enums. (Internal Change)

- **Changed: Improves performance by using faster hash sets** [`b8a2024`](https://github.com/acgetchell/delaunay/commit/b8a2024)

  Replaces `HashSet` with `FastHashSet` in `Cell`, `Facet`,
  `Vertex`, and `util` modules to improve performance by using
  a faster hash set implementation for checking duplicate
  vertices.

  Also replaces `Vec` with `SmallBuffer` in `InsertionBuffers`
  for `bad_cells_buffer`, `boundary_facets_buffer`,
  `vertex_points_buffer`, and `visible_facets_buffer` in
  `insertion_algorithm` module for performance gains.

  Refactors code for deserialization of `Cell` and `Facet` by
  removing unnecessary imports and standardizing the
  deserialization visitor pattern.

- **Changed: Improves algorithm tests and coverage** [`b8a2024`](https://github.com/acgetchell/delaunay/commit/b8a2024)

  Enhances the algorithm test suite by adding new tests and
  improving coverage for both the standard and robust
  Boyer-Watson implementations. This includes testing
  default implementations, insertion strategies, facet
  cache providers, and error handling paths to ensure more
  robust and reliable algorithms. Additionally, adds
  `repr` to the cspell dictionary and excludes coverage
  reports from git tracking.

- **Changed: Updates rust toolchain to 1.90 and benchmarks** [`b8a2024`](https://github.com/acgetchell/delaunay/commit/b8a2024)

  Updates the rust toolchain version to 1.90 across
  Cargo.toml, clippy.toml, and rust-toolchain.toml.
  Also, regenerates performance benchmark results in
  PERFORMANCE_RESULTS.md with updated times,
  reflecting the new toolchain and potentially minor
  performance variations. Minor adjustments to
  benchmarking utility commands. Internal change.

- **Changed: Improves robustness and completeness of tests** [`b8a2024`](https://github.com/acgetchell/delaunay/commit/b8a2024)

  Enhances the test suite for triangulation and convex hull
  functionality, focusing on error handling, degenerate cases,
  and performance. This includes improved coverage for numeric
  edge cases, visibility checks, and cache management.
  (Internal change: test suite improvement)

- **Prevents potential overflow issues during bounding box expansion by clamping the margin calculation for integer types.**
  [`b8a2024`](https://github.com/acgetchell/delaunay/commit/b8a2024)

- **Uses stack allocation with SmallVec for vertex points to reduce memory allocations in \`find\_bad\_cells\` and \`vertex\_outside\_circumcircle\` for**

  **faster performance.**

- **Handles cases with potentially empty facets conservatively to avoid crashes.** [`b8a2024`](https://github.com/acgetchell/delaunay/commit/b8a2024)

- **Optimizes vertex insertion, neighbor and incident cell assignments.** [`b8a2024`](https://github.com/acgetchell/delaunay/commit/b8a2024)

- **Updates regexes for gitleaks allowlist.** [`b8a2024`](https://github.com/acgetchell/delaunay/commit/b8a2024)

- **Changed: Updates docs, adds Claude config ignore, cspell** [`7a1e51f`](https://github.com/acgetchell/delaunay/commit/7a1e51f)

  Updates documentation with progress on Phase 1/2 optimizations,
  justfile usage, development workflow and command examples.

  Adds .claude/ to .gitignore to exclude user-specific Claude AI
  settings.

  Adds "Makefiles" to cspell.json to prevent spell check on
  Makefiles.

  Refs: #72, #73

- **ci: Increase profiling to 6 hour max runtim [skip ci]** [`52c7dfd`](https://github.com/acgetchell/delaunay/commit/52c7dfd)

- **Update documentation for v0.4.4 (skip ci)** [`696f740`](https://github.com/acgetchell/delaunay/commit/696f740)

### Removed

- **Refactor Facet struct for memory efficiency and remove Default trait** [`2a9b655`](https://github.com/acgetchell/delaunay/commit/2a9b655)

  Refactors the `Facet` struct into a lightweight `FacetView`
  for ~18x memory reduction by referencing the triangulation
  data structure (TDS) instead of storing redundant data.

  Deprecates the heavyweight `Facet` struct and introduces
  `FacetView` to minimize memory footprint. The old struct is
  marked as deprecated and will be removed in v1.0.0.

  Adds an `empty()` constructor to `Tds` for clarity when
  creating empty triangulations. Also removes unnecessary
  `Default` bounds from generic parameters.

  These changes primarily impact internal data structures and
  algorithms.

- **Removes doctests from code coverage reports.** [`b8a2024`](https://github.com/acgetchell/delaunay/commit/b8a2024)

### Fixed

- **Fixed: Corrects FacetView example and Vertex doc** [`2a9b655`](https://github.com/acgetchell/delaunay/commit/2a9b655)

  Updates FacetView example to be runnable by adding a function
  wrapper and including necessary imports. Also adds a missing import
  in the Vertex documentation example.

- **Fixed: Corrects facet cache handling and visibility checks** [`2a9b655`](https://github.com/acgetchell/delaunay/commit/2a9b655)

  Addresses potential race conditions in facet cache retrieval by adding a loop to retry cache loading after invalidation.

  Replaces direct facet access with handle-based access in visibility checks, ensuring thread safety and data integrity.

- **Corrects RobustBowyerWatson spelling.** [`2a9b655`](https://github.com/acgetchell/delaunay/commit/2a9b655)

  These changes enhance performance, fix minor inconsistencies, and
  prevent potential errors during triangulation.

  Changed: Internal: Refactors facet and circumsphere tests.
  Adds comprehensive tests for usize_to_u8 conversion.

- **Fixed: Handles facet construction errors in Bowyer-Watson** [`2a9b655`](https://github.com/acgetchell/delaunay/commit/2a9b655)

  Improves error handling during robust Bowyer-Watson cavity mapping when facet construction fails, providing a more specific
  `TriangulationValidationError::InconsistentDataStructure` error with detailed context instead of a generic `ExcessiveBadCells` error.

  Also updates documentation, lints, and dependency versions.

- **Fixed: Addresses various error paths and edge cases** [`b8a2024`](https://github.com/acgetchell/delaunay/commit/b8a2024)

  Addresses various error paths and edge cases in triangulation,
  convex hull, and predicates modules.

  These changes increase the overall reliability and robustness of
  the library. They include handling degenerate cases, invalid input,
  numerical precision issues, and potential overflow scenarios.
  Improved testing coverage.

- **Fix and consolidate tests** [`b8a2024`](https://github.com/acgetchell/delaunay/commit/b8a2024)

- **Improves robustness and stability of TDS operations** [`b8a2024`](https://github.com/acgetchell/delaunay/commit/b8a2024)

  Enhances the robustness and stability of triangulation data structure (TDS) operations by addressing several potential issues.

- **Fixes potential issues with exterior vertex insertion in the robust Bowyer-Watson algorithm, improves point deserialization, and avoids double counting in**

  **statistics.**

- **Fixed: Correctly handle simplex orientation for insphere tests** [`b8a2024`](https://github.com/acgetchell/delaunay/commit/b8a2024)

  Corrects `insphere` tests by considering simplex orientation to
  interpret determinant sign for more accurate results. This
  resolves issues with lifted matrix formulations in various dimensions.

  Adds comprehensive tests for insphere predicates across dimensions
  2D to 5D, including error and edge cases, ensuring correctness.
  Adds debug output for circumradius tests.

## [v0.4.4](https://github.com/acgetchell/delaunay/compare/v0.4.3...v0.4.4) - 2025-09-13

### Merged Pull Requests

- Refactor/phase 2 optimizations [`#86`](https://github.com/acgetchell/delaunay/pull/86)

- Changed: Optimizes internal collections with key-based access [`#83`](https://github.com/acgetchell/delaunay/pull/83)

- Feature/migrate uuids to slotmap [`#77`](https://github.com/acgetchell/delaunay/pull/77)

- Fix/benchmarks [`#76`](https://github.com/acgetchell/delaunay/pull/76)

### Added

- **Added #\[allow(deprecated)\] annotations to test functions that verify deprecated methods:**
  [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)
  - Tests
    - Added #\[allow(deprecated)\] annotations to test helper functions:
  - Other
    - Adding validation checks to prevent invalid facet indices.
    - Adds additional facet key error context with UUIDs.

- **Fixes a potential out-of-bounds access in \`is\_facet\_visible\_from\_vertex\_robust\` by adding a check to ensure the facet index is within the valid**

  **range. This prevents potential panics and data structure corruption.**

- **Adds further robustness to the facet cache by retrying cache retrieval if it's invalidated concurrently**
  [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

- **Add generation.fetch\_add(1) to both insert\_vertex\_with\_mapping and insert\_cell\_with\_mapping**
  [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

- **Implements facet index consistency checks in tests to catch neighbor assignment errors.** [`34ae023`](https://github.com/acgetchell/delaunay/commit/34ae023)
  - API
    - Added: derive\_facet\_key\_from\_vertices and FacetCacheProvider trait
  - Other
    - Added: Optimize cell vertex UUID retrieval with iterator
    - Added: Introduces \`bench\` feature for performance analysis
    - Adds visibility threshold tuning via \`RobustPredicateConfig\`.
    - Implements early exit proximity scan in high-density vertex check.

### Changed

- **Changed: Improves triangulation performance and robustness** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  Refactors internal data structures to use SlotMap keys, improves boundary facet detection and facet cache concurrency with RCU, fixes numerical robustness
  issues, and adds a bench feature for performance analysis. Includes numerous bug fixes,
  performance improvements, and enhanced error handling. All public API changes are backwards compatible.

- **Changed: Complete Phase 2 Key-Based Internal APIs (internal)** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  Completes the Phase 2 optimization of internal APIs by
  refactoring functions to use CellKeys/VertexKeys and eliminating
  UUID lookups in most hot paths.

  Optimizes neighbor operations and validation with key-based
  methods, maintains backward compatibility with UUID-based public
  APIs, and adds key-based accessor methods. Moves remaining work
  to Phase 3: Cell structure refactoring to store VertexKeys directly.

  Phase 2 achieved 20-40% performance gains in neighbor
  operations.

  Refs: #73

- **Changed: Completes Phase 2 optimizations** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  Marks Phase 2 "Key-Based Internal APIs" as complete in the
  optimization roadmap. This includes the FacetCacheProvider
  implementation for Bowyer-Watson algorithms, significantly
  reducing facet mapping computation time. Updates related
  documentation and code to reflect the completed status.

- **Changed: Improve facet map error handling in boundary methods** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  Updates boundary methods to use `try_build_facet_to_cells_hashmap`
  for stricter error handling. If building the facet map fails, the
  methods now fall back to an empty map instead of panicking. This
  improves the robustness of boundary calculations. (Internal change)

- **Changed: Improves triangulation robustness and performance** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  Completes Phase 2 optimizations by implementing the
  FacetCacheProvider for Bowyer-Watson algorithms, which
  eliminates redundant facet mapping computations and improves
  error handling in boundary methods. Also includes
  general improvements to triangulation performance and
  robustness.

- **Changed: Improves triangulation error handling and robustness** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  Consolidates and enhances error handling in triangulation and
  insertion algorithms for better robustness. Introduces
  `InsertionError` enum to encapsulate various failure scenarios
  during vertex insertion, enabling more granular error reporting
  and recovery.

  Refactors boundary analysis APIs to return `Result` for improved
  error propagation, aligning with the new error handling strategy.
  This involves breaking API changes to `BoundaryAnalysis` trait and
  its implementations, requiring migration to handle `Result` types.

- **Using RCU for thread-safe cache building.** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

- **Improving boundary facet computation.** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

- **Updating documentation to reflect API changes.** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  These changes enhance the reliability and performance of the Bowyer-Watson algorithm, especially when dealing with large triangulations and concurrent
  operations.

- **Changed: Improves triangulation performance and robustness** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  Refactors internal data structures to use SlotMap keys, improves boundary facet detection and facet cache concurrency with RCU, fixes numerical robustness
  issues, and adds a bench feature for performance analysis. Includes numerous bug fixes,
  performance improvements, and enhanced error handling. All public API changes are backwards compatible.

- **Changed: Complete Phase 2 Key-Based Internal APIs (internal)** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  Completes the Phase 2 optimization of internal APIs by
  refactoring functions to use CellKeys/VertexKeys and eliminating
  UUID lookups in most hot paths.

  Optimizes neighbor operations and validation with key-based
  methods, maintains backward compatibility with UUID-based public
  APIs, and adds key-based accessor methods. Moves remaining work
  to Phase 3: Cell structure refactoring to store VertexKeys directly.

  Phase 2 achieved 20-40% performance gains in neighbor
  operations.

  Refs: #73

- **Changed: Completes Phase 2 optimizations** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  Marks Phase 2 "Key-Based Internal APIs" as complete in the
  optimization roadmap. This includes the FacetCacheProvider
  implementation for Bowyer-Watson algorithms, significantly
  reducing facet mapping computation time. Updates related
  documentation and code to reflect the completed status.

- **Changed: Improve facet map error handling in boundary methods** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  Updates boundary methods to use `try_build_facet_to_cells_hashmap`
  for stricter error handling. If building the facet map fails, the
  methods now fall back to an empty map instead of panicking. This
  improves the robustness of boundary calculations. (Internal change)

- **Changed: Improves triangulation robustness and performance** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  Completes Phase 2 optimizations by implementing the
  FacetCacheProvider for Bowyer-Watson algorithms, which
  eliminates redundant facet mapping computations and improves
  error handling in boundary methods. Also includes
  general improvements to triangulation performance and
  robustness.

- **Changed: Improves triangulation error handling and robustness** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  Consolidates and enhances error handling in triangulation and
  insertion algorithms for better robustness. Introduces
  `InsertionError` enum to encapsulate various failure scenarios
  during vertex insertion, enabling more granular error reporting
  and recovery.

  Refactors boundary analysis APIs to return `Result` for improved
  error propagation, aligning with the new error handling strategy.
  This involves breaking API changes to `BoundaryAnalysis` trait and
  its implementations, requiring migration to handle `Result` types.

- **All code now compiles and passes clippy checks** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

- **count\_boundary\_facets, count\_internal\_facets, count\_invalid\_facets** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

- **test\_facet\_cache\_provider\_implementation** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

- **test\_fallback\_recovery\_mechanisms** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

- **test\_comprehensive\_algorithm\_paths** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

- **test\_boundary\_condition\_validation** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

- **test\_cache\_invalidation\_and\_recovery** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  Results:

- **✅ Code compiles cleanly** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

- **Changed: Updates facet cache access in tests** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  Updates tests to use `try_get_or_build_facet_cache` with `.expect`
  for clearer error handling and test success assertion, ensuring
  cache building always succeeds during testing. This change enhances
  test reliability by explicitly handling potential cache building
  failures.

- **Improves threshold calculation for visibility checks, clamping** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  non-finite values to prevent NaN/Inf comparisons.

- **Optimizes cell key deduplication using pre-sized hash sets.** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

- **Changed: Optimizes internal collections with key-based access** [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

  Migrates internal collections to use direct key-based access instead of UUID lookups. This change enhances performance by eliminating UUID-to-key mapping
  overhead in internal algorithms,
  improving memory efficiency and cache locality. (Internal change)

- **Changed: Improves facet cache concurrency with RCU** [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

  Updates facet cache to use RCU (Read-Copy-Update) for atomic read-modify-write operations, enhancing concurrency and reducing potential race conditions when
  updating the cache. This change ensures that the cache is updated atomically, preventing data
  corruption and improving the overall stability of the triangulation process. Also, re-exports `Entry` for `FastHashMap` to allow atomic check-and-insert
  operations via the Entry API. It also improves vertex insertion by leveraging `Entry` to avoid redundant
  checks and ensure thread safety. The error handling for duplicate UUIDs is updated to use the Entry API for atomic insertion and provides a more informative
  error message that includes the entity type. Additionally, it refactors duplicate cell removal to use the Entry API for atomic check-and-insert operations,
  ensuring thread safety and preventing race conditions.

  Changed: Internal: Renames `entity_type` field to `entity` for clarity
  Changed: Internal: Adds `EntityKind` enum for vertex and cell types
  Changed: Internal: Improves debugging output for skipped cells

  Refs: #86

- **Improves initial simplex selection by sorting vertices for deterministic behavior** [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

- **This ensures facet caches are invalidated when topology changes through these methods** [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

- **Prevents potential stale cache usage when these internal methods are called directly** [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

- **Maintains consistency with other topology-changing operations in the codebase** [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

- **Changed: Improve facet cache building with RCU for concurrency** [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

  Improves the facet cache building process by introducing a helper method `build_cache_with_rcu` that uses Read-Copy-Update (RCU) to minimize duplicate work
  under high contention. Also refactors the cell creation logic to handle potential errors and ensure vertex registration. Adds concurrent test to confirm only
  one thread builds the cache.

- **Changed: Improves facet cache invalidation and bounding box** [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

  Refactors facet cache to use a generation counter for invalidation and improves bounding box margin calculation, ensuring that caches are rebuilt when
  underlying data changes. This change introduces a
  `generation()` method and bumps the generation on mutations, which improves the facet cache and convex hull algorithm staleness detection.

  Also fixes an integer margin calculation bug in bounding box expansion logic for vertex inclusion and adjusts validation to allow the propagation
  of cell errors.

- **Changed: Refactors UUID usage to SlotMap keys internally** [`34ae023`](https://github.com/acgetchell/delaunay/commit/34ae023)

  Refactors the internal implementation to replace UUID lookups with direct SlotMap key operations for improved performance.
  This change maintains 100% backward compatibility for the public API, which continues to use UUIDs. It also updates the serialization logic to reconstruct the
  UUID-to-key mappings on deserialization. This is an internal change.

  Refs: Fixes #73

- **Changed: Improves triangulation performance, internal refactor** [`34ae023`](https://github.com/acgetchell/delaunay/commit/34ae023)

  Refactors internal UUID handling to use SlotMap keys directly, improving triangulation performance by reducing hash lookups.
  Maintains API compatibility by preserving UUIDs in public interfaces and serialization. Optimizes collections and algorithms for key-based operations. Removes
  bimap dependency.
  Includes new refactoring documentation. (Internal change)

  Refs: Fixes #72, 73

- **Changed: Improves benchmark handling and triangulation performance** [`34ae023`](https://github.com/acgetchell/delaunay/commit/34ae023)

  Improves benchmark regression reporting, baseline handling, and fixes various documentation errors. Simplifies internal APIs and optimizes collection usage
  for performance gains.
  Also refactors UUID usage to SlotMap keys internally.

- **Changed: Improve robustness and caching in Bowyer-Watson** [`34ae023`](https://github.com/acgetchell/delaunay/commit/34ae023)

- **Scales \`InsertionBuffers\` capacity with dimension for better memory management.** [`34ae023`](https://github.com/acgetchell/delaunay/commit/34ae023)

- **Improves boundary facet detection by validating vertex count.** [`34ae023`](https://github.com/acgetchell/delaunay/commit/34ae023)

- **Includes documentation updates for facet caching and performance benchmarking.** [`34ae023`](https://github.com/acgetchell/delaunay/commit/34ae023)

- **Changed: Improves boundary facet detection performance** [`34ae023`](https://github.com/acgetchell/delaunay/commit/34ae023)

  Improves performance of boundary facet detection by caching cell facets to avoid redundant computations when multiple boundary facets reference the same cell.
  Also simplifies facet
  visibility checks and adds additional verification of facet mapping consistency.

- **Changed: Improve baseline artifact handling in benchmarks** [`a090e1e`](https://github.com/acgetchell/delaunay/commit/a090e1e)

  Refactors the benchmark regression test to reliably locate and process baseline files downloaded from artifacts. It now uses alphabetical sorting to
  deterministically select the baseline file
  when multiple tag-specific files are available.
  This change ensures consistent baseline selection and improves regression test accuracy.
  Also changes to the regression summary, which is an internal change.

- **Changed: Improve benchmark regression reporting and baseline handling** [`a090e1e`](https://github.com/acgetchell/delaunay/commit/a090e1e)

  Improves benchmark regression reporting by consistently setting BASELINE_ORIGIN environment variable. Modifies the regression check
  to avoid early return on failure, allowing for consistent reporting
  of results.

  Updates documentation and adds a test case.

- **Changed: Refactors baseline preparation for GitHub Actions** [`a090e1e`](https://github.com/acgetchell/delaunay/commit/a090e1e)

  Consolidates environment variable writing for baseline preparation into a helper function to reduce redundancy.

  Improves baseline file selection by prioritizing stable
  (non-prerelease) versions when multiple files match.

  Changes error output stream to stderr.

- **Changed: Enhance baseline commit extraction and env vars** [`a090e1e`](https://github.com/acgetchell/delaunay/commit/a090e1e)

  Enhances the baseline commit extraction process to determine the source (baseline file or metadata) and sets BASELINE_COMMIT_SOURCE
  accordingly.

  Also, mirrors GitHub Actions environment variables written to GITHUB_ENV into the current process. This makes them immediately available without needing to
  re-read the file.

  Finally, when multiple baseline files exist, prefers the newest file based on modification time.

- **Changed: Improves benchmark regression and baseline handling** [`a090e1e`](https://github.com/acgetchell/delaunay/commit/a090e1e)

  Refactors benchmark regression reporting and baseline artifact handling for more robust performance comparisons in CI. This includes improved error handling,
  baseline selection, and environment variable management.

  Reduces verbosity of memory scaling benchmarks and fixes various documentation errors. Simplifies internal APIs and optimizes collection usage for performance
  gains.

- **Changed: Reduce verbosity of memory scaling benchmarks** [`82c1789`](https://github.com/acgetchell/delaunay/commit/82c1789)

  Reduces benchmark output verbosity by introducing a quiet mode controlled by the `CRITERION_QUIET_MODE` environment variable.
  This helps to keep the output clean, especially in automated benchmark runs. Also increases sampling size for 5D benchmarks to the minimum criterion sampling
  size to avoid errors.
  Additionally, fixes a typo in `cspell.json` and `CHANGELOG.md`.

### Deprecated

- **Replacing deprecated lenient methods with strict, error-returning equivalents.** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

- **✅ Test code explicitly allows deprecated methods where needed for compatibility testing** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

- **✅ Production code uses modern non-deprecated methods** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  This maintains backward compatibility testing while ensuring production code
  uses the recommended non-deprecated API methods.

### Removed

- **Removed unused TriangulationValidationError import** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

- **Removed: Unused KeyBasedNeighborMap collection** [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

  Removes the `KeyBasedNeighborMap` collection as it was unused, incorrectly defined, and unnecessary for the planned migration.

  This simplifies the codebase by eliminating an obsolete data structure.

  The actual neighbor storage is handled directly in `Cell.neighbors` which will be updated in Phase 1. `CellNeighborsMap` is used for temporary neighbor
  collections during algorithms.

### Fixed

- **Improves Bowyer-Watson triangulation robustness** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  Addresses potential data structure corruption during vertex insertion by improving facet cache handling.

  This change introduces strict error handling in facet cache operations, preventing silent failures and ensuring triangulation validity. It also migrates
  boundary analysis methods to utilize the cache for performance and consistency.

  The updates include:

- **Fix merge conflict resolution and method names** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

- **Resolved remaining merge conflict in robust\_bowyer\_watson.rs find\_visible\_boundary\_facets method**
  [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

- **Fixed method names to use correct TDS API (build\_facet\_to\_cells\_map instead of try\_build\_facet\_to\_cells\_hashmap)**
  [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

- **Fix all clippy errors and deprecated method calls** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  Fixed Issues:

- **Corrected method names: build\_facet\_to\_cells\_hashmap → build\_facet\_to\_cells\_map** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

- **✅ All clippy warnings resolved (cargo clippy --tests -- -D warnings)** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

- **Fixed: Improves convex hull visibility checks** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  Refactors facet visibility checks in convex hull algorithm to
  improve error handling and robustness. It replaces `FacetError`
  with `ConvexHullConstructionError` for better error context.

  Improves thread safety with cache invalidation/rebuild and adds
  tests for concurrent cache access and error propagation.

- **Fixed: Robust triangulation improves stability and error handling** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

  Addresses potential issues in triangulation by enhancing
  robustness and error handling. This change includes:

- **Improves AdjacentCellResolutionFailed error handling.** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

- **Simplifies robust triangulation fallback logic.** [`f592dd8`](https://github.com/acgetchell/delaunay/commit/f592dd8)

- **Fixed: Propagates facet errors and avoids UUID lookups** [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

  Fixes a potential issue where facet errors were not propagated during boundary facet retrieval, ensuring errors are correctly handled.

  Improves performance by avoiding redundant UUID→Key lookups in internal data structures, especially within performance-critical algorithms related to cell and
  vertex management. This change
  optimizes data access patterns for `SlotMap` integration and enhances memory efficiency.

- **Fixed: Improves boundary facet retrieval robustness** [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

  Addresses potential errors during boundary facet retrieval by hardening checks for cell and facet existence. This prevents out-of-bounds access and ensures
  that missing cells or vertices do not cause unexpected failures during triangulation processing.
  Also, simplifies logic for single-cell facets.

- **Fixed: Correctly identify boundary facets with key-based access** [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

  Fixes an issue where boundary facets were not correctly identified when using key-based access to cells, leading to incomplete or incorrect boundary
  representations.

  This change ensures that facet sharing is validated correctly by using the new key-based access methods, which improves performance
  and reduces the risk of errors. It also introduces a stricter validation method and a fallback mechanism to handle cases where vertex keys are missing.

- **Fixed: Improves boundary facet creation error handling** [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

  Improves error handling during boundary facet creation by introducing specific error types for invalid facet indices and missing cells. This change helps to
  quickly identify data corruption issues in the triangulation structure.

- **Fixed: Improves robustness of bad cell detection** [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

  Improves the reliability of bad cell detection in Bowyer-Watson by handling degenerate cases and potential errors. This prevents panics and improves the
  overall stability of the triangulation process, including adding error handling for empty triangulations.

  Adds more error handling to the cell duplicate removal and ensures it gets propagated correctly.

- **Fixed: Improves bad cell detection and TDS robustness** [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

  Addresses potential issues in bad cell detection during vertex insertion by improving circumsphere containment checks and boundary facet handling, preventing
  premature termination and improving overall robustness of the triangulation process.  Also guards against duplicate UUIDs during vertex and cell insertion.

- **Fixed: Correctly propagates errors from vertex insertion** [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

  Propagates errors that may occur during vertex insertion within the robust Bowyer-Watson algorithm. This ensures that any failures in
  adding a vertex to the triangulation data structure are properly handled and reported, preventing inconsistent states.

  Also, improves degenerate cell detection by refining the logic for determining when the number of degenerate cells makes the results unreliable. It introduces
  a threshold to avoid false positives.

  Finally, enhances facet cache management, adding ordering constraints to prevent torn reads, ensuring cache and generation updates are consistent.

- **Fixed: Corrects visibility computation and degenerate cell handling** [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

- **Improves handling of degenerate cells during bad cell detection. Now utilizes a dedicated \`TooManyDegenerateCellsError\` struct and adjusts the error**

  **handling logic to use the robust method as a fallback when too many degenerate cells are encountered, preventing potential infinite loops and improving**
  **stability.**

- **fix: add generation bumps to insert\_vertex/cell\_with\_mapping methods** [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

- **Fixed: Prevents stale generation storage in facet cache** [`b9a9491`](https://github.com/acgetchell/delaunay/commit/b9a9491)

  Fixes a potential issue where a stale generation value could be stored in the facet cache due to a race condition during cache building. This ensures that the
  generation is only stored if the cache is actually present, preventing incorrect cache invalidation.

  Also, adds a check for out-of-bounds facet indices when building the cavity boundary during insertion, and returns an error if an invalid index is
  encountered. This prevents potential panics due to out-of-bounds access and provides a more informative error message, improving debugging.

  Updates facet cache reset to use Release ordering to ensure consistency with Acquire loads by readers.

- **Fixed: Boundary facet check uses correct facet key** [`34ae023`](https://github.com/acgetchell/delaunay/commit/34ae023)

  The `is_boundary_facet` method was using an incorrect method to retrieve the facet key, causing boundary detection to fail in some cases. This commit fixes
  the issue by ensuring that
  `is_boundary_facet` uses the same method to compute the facet key as the `build_facet_to_cells_hashmap` method, resolving the inconsistency. Additionally,
  this commit improves the robustness of tests by explicitly checking the number of confirmed boundary facets, ensuring that all expected facets are correctly
  identified.

- **Fixed: Improves facet visibility and data handling** [`34ae023`](https://github.com/acgetchell/delaunay/commit/34ae023)

  Addresses an edge case in centroid calculation for large facet vertex counts, enhancing numerical stability. Also, refactors facet visibility checks and
  improves data structure consistency by streamlining facet-to-cells mapping, and optimizes UUID-to-Key
  lookups.

- **Fixed: Correctly identifies boundary facets in triangulation** [`34ae023`](https://github.com/acgetchell/delaunay/commit/34ae023)

  Fixes an issue where boundary facets were not being correctly identified due to inconsistent facet key generation.

  The `is_boundary_facet` method now uses a helper function `facet_key_for_facet` to ensure consistent facet key calculation when checking if a facet belongs to
  only one cell. This resolves incorrect boundary determination.

  Also includes a new test case to validate the helper function.

- **Fixed: Corrects facet key handling in Bowyer-Watson** [`34ae023`](https://github.com/acgetchell/delaunay/commit/34ae023)

  Fixes an issue where facets are skipped during Bowyer-Watson insertion if vertex keys are not found in the TDS.

  Ensures facets are only processed if all vertex keys are successfully resolved. Also, fixes indexing errors when accessing facets and improves boundary facet
  detection.

  Updates tests to use iterator patterns for clarity and
  conciseness. Adds a benchmark-only test for boundary facet detection in larger triangulations.

- **Refactors robust Bowyer-Watson algorithm for enhanced stability and performance.** [`34ae023`](https://github.com/acgetchell/delaunay/commit/34ae023)

- **Fixed: Prevents false positives in convex hull visibility test** [`34ae023`](https://github.com/acgetchell/delaunay/commit/34ae023)

  Adds an epsilon-based threshold to the fallback visibility test in the convex hull algorithm to prevent false positives due to numeric noise near the hull
  surface. This improves the robustness of the
  convex hull computation in degenerate cases.

  Also, this commit modifies facet cache to use Acquire/Release ordering for atomic operations to ensure data consistency across threads. Additionally, adds a
  debug assertion to validate facet vertex counts.

- **Fixed: Adjusts epsilon threshold for convex hull calculation** [`34ae023`](https://github.com/acgetchell/delaunay/commit/34ae023)

  Addresses potential false positives in convex hull calculations due to numeric noise by refining the epsilon threshold calculation. The calculation now
  ensures a small relative epsilon (1e-12 scale) is applied to handle near-surface points more robustly. Also adds a missing import for FacetCacheProvider to
  the test module.

- **Fixed: Correctly identifies boundary facets in rare cases** [`34ae023`](https://github.com/acgetchell/delaunay/commit/34ae023)

  Addresses a potential out-of-bounds access when determining boundary facets. This could occur when a facet index was incorrect or a cell ID was not found in
  the slot map.

  Also, improves the robustness of the convex hull visibility test by adjusting the epsilon factor calculation and simplifies the test loop. This ensures
  accurate visibility determination even in the presence of numeric noise.

- **Fixed: Boundary facet edge case and improved debugging** [`34ae023`](https://github.com/acgetchell/delaunay/commit/34ae023)

  Fixes a potential edge case where boundary facets with degenerate geometry could cause incorrect visibility testing results.

  Adds additional debug assertions and logging to aid in diagnosing boundary facet issues.

  Improves facet key lookup performance in tests by pre-allocating hashmap capacity.

- **Fixed: Improves numerical robustness in visibility test** [`34ae023`](https://github.com/acgetchell/delaunay/commit/34ae023)

  Addresses potential numeric instability issues in the fallback visibility test within the convex hull algorithm. Replaces `from_f64` with `NumCast::from` for
  safer numeric conversions and
  adds an epsilon-based threshold adjustment. Also, corrects calculation of capacity for facet map.

- **Fixed: Improves facet boundary detection reliability** [`34ae023`](https://github.com/acgetchell/delaunay/commit/34ae023)

  Addresses an issue where boundary facet detection could fail due to incorrect facet key derivation. This commit ensures that facet keys are derived from facet
  vertices, resolving inconsistencies and improving reliability. Adds debug assertions to help detect and diagnose issues. Caches facets per cell to avoid
  repeated allocation, improving performance.

- **Fix benchmarking by quieting output** [`a090e1e`](https://github.com/acgetchell/delaunay/commit/a090e1e)

- **Fix benchmarking by improving file handling** [`a090e1e`](https://github.com/acgetchell/delaunay/commit/a090e1e)

  Improves the baseline file handling logic in `prepare_baseline` to support tag-specific (`baseline-v*.txt`) and generic (`baseline*.txt`) baseline file names.
  It now also converts
  tag-specific baseline files to `baseline_results.txt` for
  consistency. The commit extraction logic has also been improved,
  with functions to extract SHA from baseline and metadata files. These improvements ensure that the regression tests can automatically leverage baseline
  artifacts generated by the `generate-baseline` workflow.

- **Fixed: Extracts baseline tag and prefers highest semver version** [`a090e1e`](https://github.com/acgetchell/delaunay/commit/a090e1e)

  Fixes the logic for extracting the baseline commit SHA from artifact files. It now propagates the baseline tag to the workflow environment, enabling
  version-aware baseline selection.

  It also prioritizes tag files with the highest semver version when
  multiple tagged baseline files exist, ensuring the most relevant
  baseline is selected.

- **Fixed: Handles baseline copy errors and improves baseline selection** [`a090e1e`](https://github.com/acgetchell/delaunay/commit/a090e1e)

  Fixes an issue where errors during baseline file copying were not properly handled. Now, if copying the baseline file fails, the script sets environment
  variables to indicate the failure and prints an error message to stderr.

  Also improves baseline file selection by preferring stable releases over pre-releases when both exist, and selects the highest pre-release if no stable
  release is available. This ensures more accurate and
  reliable benchmark comparisons.

  Additionally, includes the baseline source file name in the Github environment variables for better traceability.  Also, more lines are read from the baseline
  file when printing baseline metadata.

- **Fixed: Handles baseline summary read errors gracefully** [`a090e1e`](https://github.com/acgetchell/delaunay/commit/a090e1e)

  Addresses a potential issue where the benchmark regression helper would fail if it couldn't read the baseline summary file. Now, it gracefully handles such
  errors, prints a warning to stderr, and
  continues, ensuring the rest of the baseline preparation process can proceed, setting relevant environment variables.

  Also, fixes baseline tag propagation to workflow environments and ensures cargo bench commands capture output.

- **Fixed: Correctly detects stable baseline versions** [`a090e1e`](https://github.com/acgetchell/delaunay/commit/a090e1e)

  Fixes an issue where prerelease versions of baseline files were incorrectly preferred over stable versions when both had the same semantic version. This
  ensures that stable baselines are always selected when available.

  Also captures output when running performance benchmarks.

- **Fixed: Handles multiline env vars and sanitizes baseline tags** [`a090e1e`](https://github.com/acgetchell/delaunay/commit/a090e1e)

  Fixes issues with multiline environment variables by using heredoc format in GITHUB_ENV. Sanitizes baseline tags to prevent command injection by replacing
  unsafe characters and capping the
  tag length. Also, improves baseline file selection by using `packaging.version` for semver comparisons, handling prereleases and invalid versions gracefully.

- **Fixed: Sanitize environment variables written to GITHUB\_ENV** [`a090e1e`](https://github.com/acgetchell/delaunay/commit/a090e1e)

  Ensures that environment variables written to the GITHUB_ENV file and the process environment are properly sanitized by removing carriage return and newline
  characters. Also handles None values correctly by converting them to empty strings. This prevents issues caused by unescaped characters in downstream
  processes.

- **Improves Bowyer-Watson triangulation robustness** [`f9f2a12`](https://github.com/acgetchell/delaunay/commit/f9f2a12)

  Addresses potential data structure corruption during vertex insertion by improving facet cache handling.

  This change introduces strict error handling in facet cache operations, preventing silent failures and ensuring triangulation validity. It also migrates
  boundary analysis methods to utilize the cache for performance and consistency.

  The updates include:
  - Replacing deprecated lenient methods with strict, error-returning equivalents.
  - Using RCU for thread-safe cache building.
  - Adding validation checks to prevent invalid facet indices.
  - Improving boundary facet computation.
  - Updating documentation to reflect API changes.

  These changes enhance the reliability and performance of the Bowyer-Watson algorithm, especially when dealing with large triangulations and concurrent
  operations.

## [v0.4.3](https://github.com/acgetchell/delaunay/compare/v0.4.2...v0.4.3) - 2025-09-12

### Merged Pull Requests

- Release/v0.4.3 [`#75`](https://github.com/acgetchell/delaunay/pull/75)

- feat: Memory profiling system and performance optimizations (v0.4.3) [`#68`](https://github.com/acgetchell/delaunay/pull/68)

### Added

- **docs: Add planned optimization work for issues #72, #73, #74** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)
  - API
    - Create StableKeyCollection trait for flexibility
  - Other
    - Add memory profiling system section with allocation tracking details
    - Add command examples for count-allocations feature
    - Implement SmallVec for stack allocation of small collections
    - Enable collection swapping and specialized optimizations
    - Add detailed code examples and migration strategies

- **feat: Add memory profiling system and performance optimizations for v0.4.3** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)
  - API
    - Add domain-specific collection types and small buffer optimizations
  - Tests
    - Added: Comprehensive profiling benchmarks and memory stress tests
    - Adds CI performance suite for regression testing.
  - Other
    - Add allocation counter infrastructure with count-allocations feature flag
    - Implement memory tracking for triangulation and convex hull operations
    - Add profiling benchmarks in GitHub Actions workflow
    - Add comprehensive memory analysis examples across dimensions (2D-5D)
    - Adds triangulation creation benchmarks for dimension scaling.
    - Adds coverage checks in CI.
    - Improves benchmark stability by capping point-generation to \`usize::MAX\` and handling edge-cases in percentile calculations.  Adds throughput

### Changed

- **chore(release): release v0.4.3** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **Bump version to v0.4.3** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **Update changelog with latest changes** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **Update documentation version references** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

  Note: Performance profiling results will be added in a follow-up commit if needed.

- **docs: Update code\_organization.md for v0.4.3 memory profiling features** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **Update architectural principles to include memory profiling focus** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **Update file descriptions to reflect memory profiling capabilities** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **Include configuration details for profiling features** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

  This aligns the documentation with the memory profiling system and
  performance optimizations introduced in v0.4.3.

- **Issue #72: Optimize collections with FastHashMap and SmallBuffer** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **Replace HashMap with FxHashMap for 15-30% performance improvements** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **Optimize validation functions with faster collections** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **Issue #73: Switch to using CellKeys and VertexKeys for internal functions** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **20-40% performance improvement in neighbor operations** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **Maintain backward compatibility with UUID-based public APIs** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **Issue #74: Abstract SlotMap collection type** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **Future-proof architecture for alternative implementations** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **Update implementation timeline with concrete phases (Q1-Q4 2026)** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **Include performance benefits and technical specifications** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **Updates documentation for v0.4.3** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **Changed: Improves documentation clarity and adds examples** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

  Refactors documentation for improved clarity, adds usage examples, and updates references to reflect recent changes in algorithms and data structures.
  Includes updates to numerical robustness guides and optimization recommendations.
  The tree printing script is added for automatic directory structure synchronization.

- **Update changelog** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **Changed: Refactors benchmark workflow using Python utils (internal)** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

  Streamlines benchmark workflow by replacing complex bash scripts with Python utility functions. This simplifies maintenance, improves code readability, and
  reduces the risk of errors.

  The changes encompass baseline generation, comparison, commit extraction, skip determination and result display within GitHub Actions workflows.

- **Large-scale triangulation performance analysis (10³-10⁶ points)** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

- **Multiple point distributions (random, grid, Poisson disk)** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

- **Memory allocation tracking (with \`count-allocations\` feature)** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

- **Query latency analysis** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

- **Multi-dimensional scaling (2D-5D)** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

- **Algorithmic bottleneck identification** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

  It's integrated into GitHub Actions with scheduled runs and manual triggering, along with uploading profiling results and baselines.

  The memory stress test runs independently to exercise allocation APIs and memory scaling under load.

  Also, ignores the "benches/**" directory in codecov, and adds the profiling suite to the README.md.

- **Optimize collections with FxHashMap/FxHashSet for better performance** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

- **Update WARP.md guidelines and project documentation** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

- **Changed: Improves benchmark workflow and memory profiling** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

  Refactors benchmark workflows for better performance profiling, improves memory allocation tracking, and enhances numerical stability.

  Updates profiling benchmarks to track actual point counts and adds safety cap to prevent out-of-memory errors.

  Switches `Cell` neighbor storage to `Option` for
  correct positional semantics.
  Changes ConvexHull caching to `ArcSwapOption`.
  These are internal changes to improve performance
  and robustness of the library.

- **Changed: Enhance profiling benchmarks for performance analysis** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

  Enhances profiling benchmarks with improved memory allocation tracking, optimized query benchmarks, complete dimensional coverage (2D-5D), and environment
  variable control for faster
  iteration. It provides more comprehensive performance analysis for optimization work. This also introduces error handling for grid generation in benchmarks.

- **Changed: Improves benchmark utils with timeout and error handling** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

  Enhances benchmark utilities to include timeout handling for cargo bench commands, preventing indefinite execution. Introduces `ProjectRootNotFoundError` for
  clearer error reporting when `Cargo.toml` is missing. Exports `BENCHMARK_REGRESSION_DETECTED` to GITHUB_ENV for better CI integration. Protects against
  division by zero in throughput calculations.

- **Changed: Enhances benchmark suite for detailed analysis** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

  Extends benchmark suite to include 5D circumsphere containment tests and edge cases across all dimensions, improving the profiling suite for more granular
  performance analysis.

  Adds memory profiling with 95th percentile stats and
  optimizes query benchmarks with precomputed simplices, while also introducing env vars for CI tuning.

- **Improves benchmark suite with new tests and refactoring** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

  Adds new benchmarks for triangulation creation and circumsphere containment, providing more comprehensive performance analysis.
  Refactors existing benchmark code to reduce duplication and improve maintainability. Updates code coverage configuration and adds mypy
  cache to gitignore.

- **Changed: Improves benchmark setup and coverage reporting** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

  Updates benchmark tooling for more consistent and reliable performance measurements.  Switches to tarpaulin.toml for configuration, excludes examples from
  coverage, and seeds random number generators in benchmarks to reduce variance and improve regression detection.

- **Enhances profiling benchmarks with memory usage and query** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

  latency analysis.

- **Refactors circumsphere benchmarks with seeded generation for** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

  reproducible results.

- **Excludes test files from semgrep error-prone checks.** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

- **Improves benchmarks and CI** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

  Refactors memory measurement, improves CI coverage reporting, and fixes benchmark issues.

- **Refactors memory measurement and random point generation into utility modules for reuse across examples and benchmarks, promoting code sharing and**

  **consistency.**

- **Enhances CI coverage reporting by verifying the absence of \`benches/\` and \`examples/\` paths in coverage reports, ensuring that benchmark and example**

  **code does not skew coverage metrics of the core library code.**

- **Improves reporting in memory analysis tools.** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

### Removed

- **Refactor internal APIs to eliminate UUID-to-key lookups** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **Clean up examples by removing test functions (convert to pure demonstrations)** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

### Fixed

- **Fixes documentation errors** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **More doc fixes** [`1062551`](https://github.com/acgetchell/delaunay/commit/1062551)

- **Fixes benchmarks** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

  Refactors and expands the benchmark suite for more comprehensive
  performance analysis. Includes:

- **Fixes: Benchmarks and CI improvements** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

  Addresses reliability issues in CI and benchmark suite.

  Explicitly configures tarpaulin to generate coverage reports with explicit arguments instead of relying on the config file, which was causing failures in some
  environments.

  Configures criterion benchmarks via environment variables and implements timeout handling to prevent hangs.

  Fixes a usize to scalar conversion precision issue and adds edge case handling to benchmarks.

- **Fix import issues** [`2eeb6db`](https://github.com/acgetchell/delaunay/commit/2eeb6db)

  Refactors import statements for improved code readability and maintainability.
  Configures ruff to enforce consistent import ordering and removes unnecessary local imports.

  Updates WARP.md with current ruff-based import checking guidance.

## [v0.4.2](https://github.com/acgetchell/delaunay/compare/v0.4.1...v0.4.2) - 2025-09-04

### Merged Pull Requests

- Refactor/benchmarks [`#65`](https://github.com/acgetchell/delaunay/pull/65)

- Docs/release v0.4.2 [`#60`](https://github.com/acgetchell/delaunay/pull/60)

- Test/benchmarking [`#59`](https://github.com/acgetchell/delaunay/pull/59)

- Fix/squashed commit body parsing [`#58`](https://github.com/acgetchell/delaunay/pull/58)

### Added

- **Adds 5D triangulation benchmarks** [`d2e2f86`](https://github.com/acgetchell/delaunay/commit/d2e2f86)

- **Adds new benchmarks for memory scaling and triangulation vs hull memory usage** [`d2e2f86`](https://github.com/acgetchell/delaunay/commit/d2e2f86)

- **Adds more specialized tests** [`d2e2f86`](https://github.com/acgetchell/delaunay/commit/d2e2f86)

  These changes enhance code quality, testability, and documentation accuracy, promoting better development practices.

- **Introduces a \`.codacy.yml\` file to configure code analysis using Ruff, Pylint, Clippy, rustfmt, and other linters, standardizing code quality checks**
  [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)
  - Tests
    - Improves CI and adds Python script testing
  - Other
    - Introducing \`uv\` package manager for Python dependencies
    - Adds documentation for code organization.
    - Adding a comprehensive Codacy configuration for Rust, Python, Shell, Markdown, YAML, JSON, and security analysis.

### Changed

- **Refactors benchmarks for CI performance suite** [`d2e2f86`](https://github.com/acgetchell/delaunay/commit/d2e2f86)

  Consolidates and optimizes benchmarks into a CI performance suite for faster and more comprehensive regression detection.

- **Replaces \`small\_scale\_triangulation.rs\` with \`ci\_performance\_suite.rs\`** [`d2e2f86`](https://github.com/acgetchell/delaunay/commit/d2e2f86)

- **Modifies benchmark jobs to use the CI performance suite** [`d2e2f86`](https://github.com/acgetchell/delaunay/commit/d2e2f86)

- **Refactors and expands benchmark suite** [`d2e2f86`](https://github.com/acgetchell/delaunay/commit/d2e2f86)

  Significantly expands and refactors the benchmark suite to include comprehensive performance measurements across dimensions 2D-5D.

  Introduces microbenchmarks for core algorithms like Bowyer-Watson triangulation, neighbor assignment, and duplicate cell removal.  Adds memory usage and
  validation benchmarks to assess allocation patterns and correctness.

  Updates point generation to be more consistent and reproducible using a util module.  Provides targeted benchmarks for incremental construction, measuring
  vertex addition performance.

  These enhancements provide deeper insights into performance bottlenecks and scaling behavior across different dimensions.

- **Refactors and expands benchmark suite** [`d2e2f86`](https://github.com/acgetchell/delaunay/commit/d2e2f86)

  Improves the benchmark suite by refactoring random point generation, enhancing CI performance benchmarks, and adding memory analysis capabilities.
  This change standardizes point generation using a central utility function, improving consistency and maintainability.

- **Refactors baseline generation workflow** [`d2e2f86`](https://github.com/acgetchell/delaunay/commit/d2e2f86)

  Streamlines the baseline generation workflow by relocating the baseline results file to the artifact directory directly within the generation script. This
  change simplifies artifact preparation and cleanup, ensuring consistency and reducing redundancy in file handling.

  Additionally, updates Ruff configuration and usage across the project for improved code quality and formatting.

- **Improves changelog title formatting with edge cases** [`d2e2f86`](https://github.com/acgetchell/delaunay/commit/d2e2f86)

  Adds tests to cover edge cases in changelog title formatting, specifically focusing on line wrapping with very short length
  limits. It also fixes a bench command to include the workspace.

  These tests ensure the commit link is split correctly across multiple lines and bolding is omitted when the line length is insufficient.

- **Improves test reliability and documentation** [`d2e2f86`](https://github.com/acgetchell/delaunay/commit/d2e2f86)

  Updates a test to mock JSON loading more effectively, preventing potential issues with file access during testing.

  Refines documentation in WARP.md to improve clarity and consistency, including:

- **Updates clippy command with more pedantic lints** [`d2e2f86`](https://github.com/acgetchell/delaunay/commit/d2e2f86)

- **Clarifies cspell usage and terminology** [`d2e2f86`](https://github.com/acgetchell/delaunay/commit/d2e2f86)

- **Clarifies run\_all\_examples.sh execution** [`d2e2f86`](https://github.com/acgetchell/delaunay/commit/d2e2f86)

- **Improves CI performance and changelog utils** [`d2e2f86`](https://github.com/acgetchell/delaunay/commit/d2e2f86)

  Enhances CI workflow by recommending branch strategies to avoid unnecessary performance testing.

  Refines changelog title formatting to handle long titles and ensure proper markdown escaping.

  Updates WARP guidance to clarify the use of automated tools and code validation procedures.

- **Documentation updates for upcoming v0.4.2** [`f10aba3`](https://github.com/acgetchell/delaunay/commit/f10aba3)

  Updates README to the `scripts/` directory detailing the purpose, usage, and dependencies of each utility script.

  Updates WARP.md to focus on AI guidance

  Also adds minor spell check fixes.

- **Refactors examples and enhances testing structure** [`f10aba3`](https://github.com/acgetchell/delaunay/commit/f10aba3)

  Refactors the example directory and enhances the testing framework to improve code organization and maintainability.

- **Moves the \`test\_alloc\_api.rs\` and \`test\_circumsphere.rs\` examples to the \`tests/\` directory and renames them to \`allocation\_api.rs\` and**

  **\`circumsphere\_debug\_tools.rs\`, respectively, to reflect their role as debugging and testing utilities.**

- **Updates documentation to reflect these changes.** [`f10aba3`](https://github.com/acgetchell/delaunay/commit/f10aba3)

- **Refactors examples and updates documentation** [`f10aba3`](https://github.com/acgetchell/delaunay/commit/f10aba3)

  Renames `implicit_conversion.rs` to `into_from_conversions.rs` and updates its content to better reflect the use of `Into`/`From` traits for coordinate
  conversions.

  This change improves clarity and modernizes the example to align with current Rust best practices. Also updates documentation across multiple files to reflect
  the rename and new example.

- **Improves benchmark comparisons and tooling** [`f10aba3`](https://github.com/acgetchell/delaunay/commit/f10aba3)

  Refactors the benchmark comparison process to use the baseline artifact directly instead of copying it to a temporary location.

  This change avoids unnecessary file operations and simplifies the workflow.
  It also introduces average regression calculation for more accurate performance analysis, taking individual benchmark variations into account.
  Adds new pytest-based tests for the benchmark comparison tool to improve reliability.

  Cleans up temporary baseline files after artifact generation to prevent clutter and potential conflicts.
  Updates the WARP.md documentation to reflect recent changes and adds guidance on shell script formatting.
  Also updates the all examples script to improve error handling and example discovery.

- **Changes benchmarks to use geometric mean** [`f10aba3`](https://github.com/acgetchell/delaunay/commit/f10aba3)

  Enhances benchmark reporting with geometric mean for time changes and commit SHA resolution from metadata.

  Adds Clippy configuration and improves Rust code quality checks.

  Refactors example running to improve discovery and handling of Cargo examples, including timeout support.

  Updates WARP.md with more detailed instructions on code quality and style conventions, including formatting, linting, spell checking, and JSON validation.

- **Improves benchmark comparison and example handling** [`f10aba3`](https://github.com/acgetchell/delaunay/commit/f10aba3)

  Enhances benchmark comparison by normalizing time units, using geometric mean for averaging changes, and guarding against non-positive ratios.

  Adds robustness to example script by checking for example directory and adding timeout and kill signals.

  Also includes minor fixes to metadata handling and test assertions.

- **Modifies benchmark workflows to correctly identify baseline results files and set environment variables accordingly.**
  [`f10aba3`](https://github.com/acgetchell/delaunay/commit/f10aba3)

- **Enhances example execution script to handle timeouts with or without \`timeout\` command, ensuring consistent behavior across environments.**
  [`f10aba3`](https://github.com/acgetchell/delaunay/commit/f10aba3)

- **Updates shell script formatting guidelines in WARP.md to enforce tab indentation.** [`f10aba3`](https://github.com/acgetchell/delaunay/commit/f10aba3)

- **Updates example script and documentation** [`f10aba3`](https://github.com/acgetchell/delaunay/commit/f10aba3)

  Updates the example script to support time units in `EXAMPLE_TIMEOUT`.

  Removes the unnecessary creation of the results directory in the example script.

  Clarifies shell script formatting requirements in the documentation.

  Adds tracking issues for future improvements.

  Fixes #61

- **Simplifies benchmark workflow and reporting** [`fda43d7`](https://github.com/acgetchell/delaunay/commit/fda43d7)

  Refactors the benchmark workflow to rely solely on release baselines for performance comparison.

  This removes the generation of fallback baselines during pull request workflows, streamlining the process and ensuring comparisons are made against accurate,
  full-setting benchmarks.

  Updates the reporting to provide clearer guidance on how to enable performance regression testing via release tags.

  Increases baseline artifact retention from 1 year to 90 days to match repository maximum.

- **Improves performance baseline artifact retrieval** [`fda43d7`](https://github.com/acgetchell/delaunay/commit/fda43d7)

  Modifies the workflow to improve the way performance baseline artifacts are located.

  The workflow now first attempts to find baseline artifacts associated with release tags by searching recent successful workflow runs of
  'generate-baseline.yml'.

  If no release-tagged baseline is found, it falls back to searching for any recent baseline artifact generated by the same workflow, regardless of its origin
  (e.g., manual trigger).

  This ensures that a baseline is found even if a tagged release is not available, or the baseline was manually generated.
  It also changes the failure message if no baseline is found, and provides improved instructions on how to generate a baseline.

- **Improves benchmark baseline handling** [`fda43d7`](https://github.com/acgetchell/delaunay/commit/fda43d7)

  Ensures that expired artifacts are ignored when searching for performance baselines. This prevents the benchmark workflow from erroneously using outdated
  data.

  Adds more detailed logging about the baseline source, differentiating between baselines from artifacts and releases. The origin of the baseline (release or
  artifact) is now included in the
  comparison output and summary.

- **Improves baseline artifact lookup efficiency** [`fda43d7`](https://github.com/acgetchell/delaunay/commit/fda43d7)

  Optimizes the benchmark workflow by caching baseline artifacts from recent successful workflow runs. This significantly reduces the number of API calls
  required to locate the correct baseline, particularly for release baselines. It also falls back
  to the most recent baseline artifact if no release baseline is found.

  Also, the `compare` command is executed using an `if` statement that determines whether the benchmark utils is installed as a
  module or an entrypoint to avoid errors.

- **Improves benchmark workflow reliability** [`fda43d7`](https://github.com/acgetchell/delaunay/commit/fda43d7)

  Limits the number of workflow runs fetched to avoid excessive API calls and ensures that only unique, non-expired baseline artifacts are cached, enhancing the
  reliability and efficiency of the benchmark workflow.

  Fixes a bug where oldest benchmarks were used - GitHub lists newest first, so first one should be preferred.

- **Improves benchmark baseline artifact retrieval** [`fda43d7`](https://github.com/acgetchell/delaunay/commit/fda43d7)

  Optimizes the retrieval of baseline artifacts by pre-computing expected release baseline names and short-circuiting the search when a release baseline is
  found.

  This significantly reduces the number of API calls and speeds up the process, especially when release baselines are available.

  Also exports the `BASELINE_TAG` to the environment, making it available for subsequent steps.

- **Enhances changelog generation and release process** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

  Migrates changelog tooling to Python for robustness and maintainability.
  Introduces utilities for parsing, extracting, and manipulating changelog data.
  Improves commit message formatting, tag creation, and overall release workflow.
  The new Python tooling replaces the previous shell scripts, offering more robust error handling, testability, and maintainability.

  The changes add a `pyproject.toml` file.

- **Automates performance regression testing** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

  Sets up an automated performance testing workflow that generates baselines on new releases, downloads the latest baseline artifact for PRs and main branch
  commits, and reports performance regressions.

  The workflow uses Python utilities for parsing benchmark results and comparing against the baseline.
  It also includes hardware compatibility checks and warnings.
  The shell scripts are updated to wrap the Python implementation.

- **Automates performance regression testing** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

  Modernizes the benchmarking process by replacing shell scripts with Python utilities for improved cross-platform compatibility and maintainability.

  This includes:

- **Automating performance baseline generation and comparison in CI workflows** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

- **Enhancing hardware detection with new Python utilities** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

- **Improving changelog generation and git tagging with Python scripts** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

  The changes focus on migrating from shell-based automation to Python-based automation, enabling better cross-platform compatibility, improved error handling,
  and seamless integration with GitHub Actions.

- **Improves CI/CD and code quality tooling** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

  Enhances the project's CI/CD pipeline and code quality analysis by:

- **Refactors CI workflows to use the \`astral-sh/setup-uv\` GitHub Action for installing \`uv\`, simplifying setup and improving reliability.**
  [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

- **Simplifies the SARIF upload process in the Codacy workflow by using environment variables for repository and commit information.**
  [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

- **Updates the CONTRIBUTING.md guide with the latest development setup, python tool migration, project structure documentation, and Codacy integration.**
  [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

- **Updates Python dependency configurations and files.** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

- **Enhances CI/CD and code quality analysis** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

  Refactors CI/CD workflows for improved performance and reliability, modernizes code quality checks with Ruff and other linters, and updates tooling scripts
  for better maintainability. This includes:

- **Refactoring the benchmarks workflow to improve baseline detection.** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

- **Updating the Codacy workflow to compute branch ref for PRs.** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

- **Modernizing Python scripts by replacing shell commands with \`uv run\`.** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

- **Improving changelog generation.** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

- **Refactors code quality and benchmark tooling** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

  Improves code quality checks by adjusting Codacy configurations, skipping false positives, and enabling duplication detection.

  Enhances benchmark workflow by extracting baseline results and ensuring correct directory structure.

  Updates documentation with correct module naming and deserialization examples.

- **Retires pylint in favor of ruff for linting** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

  Refactors the project to exclusively use ruff for Python linting and formatting, replacing pylint.

  This change streamlines the linting process, leveraging ruff's improved performance, comprehensive checks, and better pyproject.toml support.

  This improves code quality and maintainability with a single, consistent tool.

- **Improves changelog generation and CI workflows** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

  Enhances changelog generation by improving project root detection, fixing date formatting, and adding commit message trailer skipping.

  Updates CI workflows to improve benchmark skipping logic, enable fixing of ruff lint issues, and adjust baseline generation permissions.

  These changes improve the reliability and automation of the changelog generation process and CI pipelines.

- **Improves benchmark and codacy workflows** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

  Enhances benchmark workflows by sanitizing release tags for artifact naming and enabling `--dev` mode for generated baseline comparisons.
  This ensures accurate baseline matching and consistent benchmark settings.

  Simplifies the codacy workflow by preselecting the SARIF file for upload, avoiding unnecessary splitting.

  Includes fallback calls to `python -m` for benchmark scripts to ensure cross-platform compatibility.

- **Streamlines performance comparison report generation.** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

- **Enhances hardware information gathering.** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

- **Improves command-line interface.** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

- **Still more work on benchmark workflow** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

  Enhances the benchmark workflow to handle large repositories by using pagination when retrieving releases.

  Adds robustness by skipping draft/prerelease releases and handling missing baseline commits gracefully.

  Improves hardware comparison reporting and expands cspell dictionary and ignore paths.

  Updates ruff line length and streamlines examples in WARP documentation.

### Removed

- **Removes allocation counting from \`ci\_performance\_suite\` benchmarks** [`d2e2f86`](https://github.com/acgetchell/delaunay/commit/d2e2f86)

- **Removes redundant documentation validation step** [`d2e2f86`](https://github.com/acgetchell/delaunay/commit/d2e2f86)

- **Removes outdated examples and clarifies the purpose of remaining examples in the README.**
  [`f10aba3`](https://github.com/acgetchell/delaunay/commit/f10aba3)

- **Removes the \`tag-from-changelog.sh\` script, delegating the tagging functionality to the Python implementation within \`changelog\_utils.py\`.**
  [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

- **Removing legacy shell scripts.** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

### Fixed

- **Fixes benchmark and regression reports,** [`f10aba3`](https://github.com/acgetchell/delaunay/commit/f10aba3)

  Refactors benchmark scripts to improve baseline commit SHA resolution and report top regressions.

  Adds timeout functionality to example scripts, including support for `gtimeout` on macOS, and introduces an `EXAMPLE_TIMEOUT` environment variable.

  Updates tests and documentation accordingly.

- **Fixes benchmark and example scripts** [`f10aba3`](https://github.com/acgetchell/delaunay/commit/f10aba3)

  Refactors benchmark artifact handling and example execution for better reliability and clarity.

- **Corrects an issue in circumsphere tests, boundary detections.** [`f10aba3`](https://github.com/acgetchell/delaunay/commit/f10aba3)

- **Fix pesky shell script linting** [`f10aba3`](https://github.com/acgetchell/delaunay/commit/f10aba3)

- **Fixes benchmarks and Codacy integration** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

  Enhances the benchmark workflow to reliably locate baseline artifacts by paginating through workflow runs. It also retries baseline generation with a fallback
  command.

  Adds logic to skip benchmarks if the current commit matches the baseline or no relevant code changes are detected, providing clearer skip reasons.

  Improves Codacy integration by sanitizing tool names for SARIF file processing and ensuring a SARIF file is selected for upload even if splitting fails.

  It also introduces concurrency control for baseline generation, and enhances artifact naming for better organization.

- **Refactors and fixes benchmark and code analysis scripts** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

  Refactors benchmark scripts for clarity and robustness.

- **Fixes dimension parsing and handles missing tools gracefully.** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

  Removes unnecessary dependency installation from benchmark workflow.
  Simplifies Codacy SARIF file selection.
  Updates WARP documentation with correct uv command for Windows.
  Adds missing word to cspell dictionary.

### Security

- **Enhances security and benchmarking workflows** [`ea87521`](https://github.com/acgetchell/delaunay/commit/ea87521)

  Improves security by sanitizing GitHub context variables in benchmark workflows to prevent code injection.

  Refines Codacy configuration to focus on high-severity security issues and reduces false positives. Also, improves SARIF file handling in the Codacy workflow
  by creating empty files when necessary to prevent workflow failures and ensuring proper file uploads.

  Updates benchmark comparison logic to handle zero values and clarifies time/throughput change outputs.
  Also updates benchmark test times to use 's' suffix.

## [v0.4.1](https://github.com/acgetchell/delaunay/compare/v0.4.0...v0.4.1) - 2025-08-23

### Merged Pull Requests

- Release/0.4.1 fixed [`#57`](https://github.com/acgetchell/delaunay/pull/57)

- Docs/update documentation citations benchmarks [`#55`](https://github.com/acgetchell/delaunay/pull/55)

- Refactors coordinate traits for improved geometry [`#54`](https://github.com/acgetchell/delaunay/pull/54)

### Added

- **Add 'metacharacters' to cspell dictionary** [`d1589c0`](https://github.com/acgetchell/delaunay/commit/d1589c0)

- **Add blank line before fenced code block** [`d1589c0`](https://github.com/acgetchell/delaunay/commit/d1589c0)

- **Pins \`tarpaulin\` version in code coverage workflow and adds a cache restore key for improved caching.**
  [`5fb31b1`](https://github.com/acgetchell/delaunay/commit/5fb31b1)
  - API
    - Adds boundary analysis trait example
  - Other
    - Adds citation metadata and references
    - Enables automatic Rust toolchain management
    - Adds common directories to \`.cspell.json\` to prevent spellcheck errors in those directories.

- **Adds categorization of entries into Added, Changed, Fixed, and Removed sections for better organization.**
  [`c1fe7ee`](https://github.com/acgetchell/delaunay/commit/c1fe7ee)
  - Other
    - Implements PartialOrd for Point with OrderedFloat
    - Introduces more robust parsing of squashed PRs to extract commit message bodies.
    - Adds categorization (Added/Changed/Fixed/etc.) to AI-generated commits.
    - Implements multi-format bullet support and paragraph preservation during PR expansion.

- **Adds DOI badge to README** [`a5f0f51`](https://github.com/acgetchell/delaunay/commit/a5f0f51)

  Adds a DOI badge to the README to provide a persistent identifier for the project.

### Changed

- **Escape all regex metacharacters in tag script (not just dots)** [`d1589c0`](https://github.com/acgetchell/delaunay/commit/d1589c0)

  Fixes version matching for SemVer with prerelease/build metadata

- **Wrap long line to stay within 160 char limit** [`d1589c0`](https://github.com/acgetchell/delaunay/commit/d1589c0)

- **All recent tooling improvements now documented in v0.4.1** [`d1589c0`](https://github.com/acgetchell/delaunay/commit/d1589c0)

- **Improves benchmarking and documentation** [`5fb31b1`](https://github.com/acgetchell/delaunay/commit/5fb31b1)

  Moves benchmark runs to a larger macOS instance for more reliable results.

  Removes unused coordinate traits and updates the CONTRIBUTING.md file to reflect this change.

  Adds "xlarge" to the cspell dictionary.

  Adds documentation for `hardware_info.sh` and `tag-from-changelog.sh` scripts to the scripts README.

- **Improves boundary analysis with trait implementation** [`5fb31b1`](https://github.com/acgetchell/delaunay/commit/5fb31b1)

  This change introduces a comprehensive example of the `BoundaryAnalysis` trait, showcasing its capabilities for triangulation boundary operations.

  It demonstrates multi-dimensional support, real-world use cases (perimeter, surface area, volume calculations), performance characteristics, and error
  handling. The new trait-based approach enhances modularity, testability, and extensibility of the boundary analysis functions.

  Also, updates example's README with performance considerations

- **Updates changelog and project metadata** [`5fb31b1`](https://github.com/acgetchell/delaunay/commit/5fb31b1)

  Updates the changelog to reflect recent changes, including refactoring, bug fixes, and the addition of new features.

  Adds citation metadata, including ORCID ID, and standardizes reference formatting across documentation. Updates example execution instructions.

- **Improves examples, scripts, and changelog generation** [`5fb31b1`](https://github.com/acgetchell/delaunay/commit/5fb31b1)

  Enhances the example execution script to include a help function and improve example discovery.

  Updates the changelog generation script to improve pattern matching for categorizing entries and to ensure `auto-changelog` is installed before use.

  Also updates example documentation, and includes package-lock.json and package.json in .gitignore.

- **Improves changelog generation and code review process** [`5fb31b1`](https://github.com/acgetchell/delaunay/commit/5fb31b1)

  Enhances changelog generation by categorizing entries with Keep a Changelog format, expanding squashed PRs, and improving date formatting.

  Improves the code review process by enabling ruff, flake8, and pylint for Python scripts and providing specific instructions for script reviews, improving
  code quality and maintainability.

  Also updates `.gitignore` to ignore `__pycache__` directories and updates several dependencies.
  Fixes issues with PowerShell deprecation.
  Updates contributing.md with orcid.

- **Enhances code quality, scripts, and documentation** [`5fb31b1`](https://github.com/acgetchell/delaunay/commit/5fb31b1)

  Improves code quality and consistency by disabling flake8 linter and adding spell check words.

  Enhances changelog generation script to categorize commits. Adds a WARP.md file.

  Updates scripts to extract hardware information, correct example executions, and address robustness of boundary analysis.

  Enhances documentation by reordering sections.

- **Improves benchmarking and changelog generation** [`5fb31b1`](https://github.com/acgetchell/delaunay/commit/5fb31b1)

  Enhances benchmark scripts for result parsing and comparison, including hardware compatibility checks.

  Updates changelog generation to expand squashed PR commits, categorize AI-generated commits, and improve formatting.

  Adds tooling recommendations and formatting for shell scripts.

- **Improves benchmark and CI scripts for accuracy** [`5fb31b1`](https://github.com/acgetchell/delaunay/commit/5fb31b1)

  Refactors benchmark scripts to use `awk` instead of `bc` for improved numerical calculations and removes the `bc` dependency.
  This ensures consistency across different platforms.

  Updates hardware information gathering for enhanced CPU detection, especially on Linux ARM systems.
  This includes using `lscpu` where available and providing fallbacks for compatibility.

  Updates CI workflows to install the correct Rust target on macOS and uses a specific version of `cargo-tarpaulin`.

  Addresses spell check errors and improves the tag-from-changelog script to handle more versioning patterns.

- **Enhances benchmark and script tooling** [`5fb31b1`](https://github.com/acgetchell/delaunay/commit/5fb31b1)

  Addresses several issues and introduces enhancements across benchmark infrastructure and related scripts, resulting in improved robustness and functionality.

- **Updates WARP.md to find and execute shellcheck and shfmt.** [`5fb31b1`](https://github.com/acgetchell/delaunay/commit/5fb31b1)

- **Enhances the \`tag-from-changelog.sh\` script to support hyperlink changelog syntax.** [`5fb31b1`](https://github.com/acgetchell/delaunay/commit/5fb31b1)

- **Improves benchmark and CI scripts** [`5fb31b1`](https://github.com/acgetchell/delaunay/commit/5fb31b1)

  Refactors benchmark scripts for robustness and clarity. Updates hardware info detection for better accuracy, especially in multi-socket systems.

  Improves CI workflow by adding timeout, error handling and skipping benchmarks when no relevant code changes are detected.
  Also, adds spellcheck cache to gitignore and adds forbid(unsafe_code) to lib.rs.

  Updates markdown linting and tag script validation.

- **Improves benchmark setup and hardware detection** [`5fb31b1`](https://github.com/acgetchell/delaunay/commit/5fb31b1)

  Refines benchmark setup to avoid unnecessary runs by checking for changes in relevant files.

  Enhances hardware information gathering by adding fallbacks to improve CPU core detection in various environments.

  Updates the spellcheck configuration by adding more exclusions.

- **Refactors coordinate traits for improved geometry** [`c1fe7ee`](https://github.com/acgetchell/delaunay/commit/c1fe7ee)

  Consolidates coordinate-related traits into a single module,
  enhancing code organization and simplifying trait bounds on
  geometric structures.

  This change introduces the `Coordinate` trait and supporting
  traits like `FiniteCheck`, `OrderedEq`, and `HashCoordinate`
  to provide a unified interface for coordinate operations.
  The refactor improves NaN handling, enables consistent hashing,
  and streamlines validation of coordinate values, ensuring
  mathematical correctness and type safety.

- **Renames \`hash\_coord\` to \`hash\_scalar\`** [`c1fe7ee`](https://github.com/acgetchell/delaunay/commit/c1fe7ee)

  Updates the `HashCoordinate` trait to use `hash_scalar` for clarity and consistency across different coordinate types.

  This change also includes minor updates to documentation and examples to reflect the renaming.

- **Improves Point serialization/deserialization for special floats** [`c1fe7ee`](https://github.com/acgetchell/delaunay/commit/c1fe7ee)

  Updates Point serialization to represent NaN as null, and positive/negative infinity as "Infinity" and "-Infinity" strings respectively in JSON.

  Updates deserialization logic to correctly parse these representations.

  This change ensures that Points with special floating-point values are serialized and deserialized consistently, maintaining compatibility with
  JSON standards. It also adjusts vertex ordering to handle special float values using `partial_cmp` to ensure consistent ordering.

  Updates `clap` dependency to the latest patch version.

- **Enhances changelog generation process** [`c1fe7ee`](https://github.com/acgetchell/delaunay/commit/c1fe7ee)

  Refactors the changelog generation script to enhance squashed PR commit expansion and categorize AI-generated commit messages according to Keep a Changelog
  format.

- **Updates Changelog and scripts** [`c1fe7ee`](https://github.com/acgetchell/delaunay/commit/c1fe7ee)

  Updates the changelog to standardize capitalization and formatting.

  Also, improves the changelog generation script by enhancing commit message parsing for squashed PRs and fixing a regex for commit line matching.
  Adds a missing term to the cspell dictionary.

- **Enhances changelog generation with categorization** [`c1fe7ee`](https://github.com/acgetchell/delaunay/commit/c1fe7ee)

  Improves the changelog generation script by categorizing commit messages into Added, Changed, Removed, and Fixed sections, aligning with the Keep a Changelog
  format for better readability and organization.

  Also updates the .auto-changelog file to include unreleased changes and improve commit SHA linking.

- **Enhances changelog generation and structure** [`c1fe7ee`](https://github.com/acgetchell/delaunay/commit/c1fe7ee)

  Improves the changelog generation script with the following enhancements:

- **Dynamically detects and uses the repository URL for commit links.** [`c1fe7ee`](https://github.com/acgetchell/delaunay/commit/c1fe7ee)

- **Refines entry parsing to improve accuracy.** [`c1fe7ee`](https://github.com/acgetchell/delaunay/commit/c1fe7ee)

- **Improves changelog generation for varied formats** [`c1fe7ee`](https://github.com/acgetchell/delaunay/commit/c1fe7ee)

  Enhances the changelog generation script to handle different changelog formats, specifically addressing the "Keep a Changelog" format.

  This change allows the script to correctly identify and process different sections (Added, Removed, Deprecated, Security) in addition to the existing
  "Changes" and "Fixed Issues" sections, thereby improving robustness and compatibility.

- **Improves changelog generation for varied formats** [`c1fe7ee`](https://github.com/acgetchell/delaunay/commit/c1fe7ee)

  Enhances the changelog generation script to better handle various Markdown formatting nuances, including preserving indentation in code blocks and lists
  within commit messages. This ensures accurate representation of structured content in the changelog.
  Additionally, removes redundant section break logic from the changelog generation script.

- **Update release date for v0.4.1 in CHANGELOG** [`13b4df2`](https://github.com/acgetchell/delaunay/commit/13b4df2)

### Removed

- **Removes incremental Delaunay triangulation refactor** [`c1fe7ee`](https://github.com/acgetchell/delaunay/commit/c1fe7ee)

  Removes the detailed documentation of the pure incremental Delaunay triangulation refactoring project from the WARP.md file, as the project has been
  successfully completed and the information is no longer needed in this document.

### Fixed

- **Fix changelog extraction regex to handle \[vX.Y.Z\] format with hyperlinks** [`d1589c0`](https://github.com/acgetchell/delaunay/commit/d1589c0)

- **Update changelog after tag script fix** [`d1589c0`](https://github.com/acgetchell/delaunay/commit/d1589c0)

- **chore(release): release v0.4.1 - fixed** [`d1589c0`](https://github.com/acgetchell/delaunay/commit/d1589c0)

- **Update changelog with latest changes after we fixed the tag-from-changelog.sh** [`d1589c0`](https://github.com/acgetchell/delaunay/commit/d1589c0)

- **fix: improve release tooling and documentation** [`d1589c0`](https://github.com/acgetchell/delaunay/commit/d1589c0)

- **Fix CHANGELOG.md line length issue for markdown linting** [`d1589c0`](https://github.com/acgetchell/delaunay/commit/d1589c0)

- **Update RELEASING.md to handle fixes during release process** [`d1589c0`](https://github.com/acgetchell/delaunay/commit/d1589c0)

  Addresses the changelog regeneration loop problem

- **docs: fix markdown formatting in RELEASING.md** [`d1589c0`](https://github.com/acgetchell/delaunay/commit/d1589c0)

- **docs: update changelog with release fixes** [`d1589c0`](https://github.com/acgetchell/delaunay/commit/d1589c0)

- **Include latest commits: regex escaping fix and markdown formatting** [`d1589c0`](https://github.com/acgetchell/delaunay/commit/d1589c0)

- **Fix line length issue in changelog entry** [`d1589c0`](https://github.com/acgetchell/delaunay/commit/d1589c0)

- **Corrects environment variable assignment in benchmark workflows for proper behavior.** [`5fb31b1`](https://github.com/acgetchell/delaunay/commit/5fb31b1)

- **Improves the error handling, unit handling, and overall stability of benchmark parsing scripts.**
  [`5fb31b1`](https://github.com/acgetchell/delaunay/commit/5fb31b1)

- **Updates \`generate\_baseline.sh\` to collect git commit info even when git isn't available and fixes an issue that prevented benchmarks from running in**

  **dev mode.**

- **Improves hardware comparison logic to reduce false positives and uses PowerShell for hardware detection on Windows.**
  [`5fb31b1`](https://github.com/acgetchell/delaunay/commit/5fb31b1)

- **Fix documentation** [`c1fe7ee`](https://github.com/acgetchell/delaunay/commit/c1fe7ee)

- **Improves word wrapping, whitespace handling, and error recovery.** [`c1fe7ee`](https://github.com/acgetchell/delaunay/commit/c1fe7ee)

  This enhancement provides more comprehensive release documentation and improved readability.

- **Fixes issues with PR description handling.** [`c1fe7ee`](https://github.com/acgetchell/delaunay/commit/c1fe7ee)

- **Enhances changelog generation robustness** [`c1fe7ee`](https://github.com/acgetchell/delaunay/commit/c1fe7ee)

  Improves the regular expression used to identify commit SHAs in squashed PR entries within the changelog generation script. This ensures that the script
  correctly identifies and processes commits with SHA lengths ranging from 7 to 40 characters, improving the overall accuracy and reliability of the changelog
  generation process.

## [v0.4.0](https://github.com/acgetchell/delaunay/compare/v0.3.5...v0.4.0) - 2025-08-23

### Merged Pull Requests

- Feature/convex hull [`#50`](https://github.com/acgetchell/delaunay/pull/50)

### Added

- **Implements a pure incremental Delaunay triangulation algorithm, removing the supercell approach and improving performance scaling.**
  [`2e31533`](https://github.com/acgetchell/delaunay/commit/2e31533)
  - Tests
    - Introduces point-in-hull testing and visibility determination
    - Adds extensive unit and integration tests to ensure
  - Other
    - Implements incremental Delaunay triangulation
    - Adds Bowyer-Watson algorithm documentation
    - Adds reusable buffers to the Bowyer-Watson algorithm, reducing memory allocation overhead.
    - Introduces robust geometric predicates to handle degenerate cases more effectively.
    - Implements comprehensive performance benchmarks to measure the impact of optimizations.
    - Adds utilities for matrix inversion and determinant calculations.

### Changed

- **Refactors TDS to use IncrementalBoyerWatson** [`2e31533`](https://github.com/acgetchell/delaunay/commit/2e31533)

  Completes the TDS refactoring to exclusively use the IncrementalBoyerWatson algorithm, removing legacy methods.

  This change improves the architecture by separating the data structure (TDS) from the triangulation algorithm. It also cleans up outdated code, including the
  find_bad_cells, find_boundary_facets, and vertex insertion methods, and moves algorithm-related buffers to the IncrementalBoyerWatson struct. Deserialization
  is updated, unused imports are resolved, and full test coverage is maintained.

- **Improves Bowyer-Watson algorithm with convex hull** [`2e31533`](https://github.com/acgetchell/delaunay/commit/2e31533)

  Adds a ConvexHull struct and integrates it into the
  Bowyer-Watson algorithm for improved efficiency and correctness in hull extension scenarios.

- **Leverages boundary facet analysis for convex hull construction.** [`2e31533`](https://github.com/acgetchell/delaunay/commit/2e31533)

- **Updates cspell dictionary with new terms.** [`2e31533`](https://github.com/acgetchell/delaunay/commit/2e31533)

  Resolves #48

- **Improves Delaunay triangulation with incremental Bowyer-Watson** [`2e31533`](https://github.com/acgetchell/delaunay/commit/2e31533)

  Completes the refactoring to a pure incremental Bowyer-Watson algorithm, providing better performance and code organization.

  The changes include updating the core algorithm implementation, integrating robust geometric predicates, and providing comprehensive testing and validation.

  Removes all legacy supercell code, simplifying the triangulation process and ensuring API compatibility.

  This enhancement makes the library production-ready with validated numerical stability and code organization, and lays the foundation for future deletion
  operations.

- **Ensures TDS consistency after insertion** [`2e31533`](https://github.com/acgetchell/delaunay/commit/2e31533)

  Adds tests to verify that the triangulation data structure (TDS) remains consistent after vertex insertion, covering both cavity-based and hull extension
  strategies.

  Also, enforces data structure finalization immediately after insertion to prevent inconsistencies.

- **Improves debugging and testing.** [`2e31533`](https://github.com/acgetchell/delaunay/commit/2e31533)

  Adds debug-only logging to identify duplicate cells in Bowyer-Watson algorithm tests.

  Suppresses `too_many_lines` clippy warning in integration tests to allow larger tests.

  Added separate document for making releases, moving from CONTRIBUTING.md since it's only for maintainers.

  Renumbered back to version 0.3.5, since we will change that during the release process.

- **Standardizes statistics tracking for algorithms** [`2e31533`](https://github.com/acgetchell/delaunay/commit/2e31533)

  Refactors triangulation algorithms to utilize a unified statistics tracking approach by leveraging the `InsertionAlgorithm` trait.

  This change ensures consistent tracking of vertices processed, cells created, and cells removed across different triangulation algorithms.

  Additionally, it centralizes statistics resetting and buffer clearing within the `reset` method for better maintainability.

- **Refactors triangulation data structure for performance** [`2e31533`](https://github.com/acgetchell/delaunay/commit/2e31533)

  Improves the robustness and performance of the Delaunay triangulation data structure.

  This commit introduces several key changes:

- **Optimizes validation methods with early termination and pre-computed mappings, leading to faster validation.**
  [`2e31533`](https://github.com/acgetchell/delaunay/commit/2e31533)

- **Uses arc-swap crate for lock-free atomic cache updates.** [`2e31533`](https://github.com/acgetchell/delaunay/commit/2e31533)

  These changes significantly enhance the performance and reliability of the Delaunay triangulation implementation.

- **Improves code quality and documentation** [`2e31533`](https://github.com/acgetchell/delaunay/commit/2e31533)

  Enhances code readability by adding examples and detailed documentation to the RobustBoyerWatson algorithm.

  Uses `Arc` consistently for thread-safe generation
  counters in concurrent contexts.

  Updates the geometry utilities module with clear examples for coordinate conversions and norm calculations.

  Adds "pointee" to cspell dictionary.

- **Handles non-finite floats in Point serialization** [`2e31533`](https://github.com/acgetchell/delaunay/commit/2e31533)

  Serializes NaN and infinite floating point values in `Point` structs to JSON `null` values, providing a more robust representation for data exchange.

  Deserializes JSON `null` values back to `NaN` values for `Point` structs.

  Adds consistency checks in the `insphere` predicate to improve numerical stability, falling back to more robust methods if inconsistencies are detected.

### Fixed

- **Improves fallback visibility test in degenerate cases** [`2e31533`](https://github.com/acgetchell/delaunay/commit/2e31533)

  for robust performance.

- **Improves numerical robustness in triangulation** [`2e31533`](https://github.com/acgetchell/delaunay/commit/2e31533)

  Addresses "No cavity boundary facets found" errors by introducing robust geometric predicates with adaptive tolerances, matrix conditioning, and symbolic
  perturbation.

  Adds a comprehensive numerical robustness guide.

  Provides configuration presets for different scenarios and integrates the robust predicates into the Bowyer-Watson algorithm.

  Fixes #47

- **Improves numerical robustness of triangulation** [`2e31533`](https://github.com/acgetchell/delaunay/commit/2e31533)

  Addresses numerical stability issues in Delaunay
  triangulation, including the "No cavity boundary facets found" error, by upgrading dependencies and incorporating robust geometric predicates with adaptive
  tolerances and matrix conditioning. Restructures core triangulation algorithms
  and introduces an insertion algorithm trait for enhanced flexibility. Adds comprehensive tests and documentation.

- **Bump MSRV to 1.89.0 and enhance robustness** [`2e31533`](https://github.com/acgetchell/delaunay/commit/2e31533)

  Increases the Minimum Supported Rust Version (MSRV) to 1.89.0 to align with current dependencies and features.

  Refactors internal algorithms to improve robustness and error handling, particularly in edge cases related to numeric precision and degenerate geometries.

  This includes changes to vertex perturbation and visibility testing to provide more reliable triangulation results.

- **Improves numerical robustness and code quality** [`2e31533`](https://github.com/acgetchell/delaunay/commit/2e31533)

  Refactors code for better numerical stability by replacing `NumCast::from` with `cast` for safer type conversions.

  This change addresses potential issues with floating-point precision and error handling, leading to more robust and reliable Delaunay triangulations.

  Also includes formatting and linter fixes, and updates CI workflow to include rustfmt and clippy checks to maintain code quality and consistency.  Adds
  perturbation test and enhances failure handling in degenerate cases.

- **Improves numerical stability and robustness** [`2e31533`](https://github.com/acgetchell/delaunay/commit/2e31533)

  Enhances geometric predicates and related utility functions to improve numerical stability and error handling. The changes address potential issues with
  coordinate conversions, singular matrices, and degenerate cases in calculations like circumcenter and insphere tests.

  The changes introduce `safe_scalar_to_f64`, `safe_coords_to_f64` and other safe conversion functions.
  It also adds `CircumcenterError` for detailed error reporting.
  Conversions from usize to coordinate scalar types are also now handled more safely, with checks to avoid precision loss.

  The convex hull algorithm is updated to use a facet-to-cells cache to optimize facet visibility tests.

  Adds new words to the spellcheck dictionary.

  A minor change to debug assertion handling avoids an unused variable warning in release builds.
  An example in the documentation was updated to use a 4D triangulation.

## [v0.3.5](https://github.com/acgetchell/delaunay/compare/v0.3.4...v0.3.5) - 2025-08-15

### Merged Pull Requests

- Updates delaunay crate to v0.3.5 [`#45`](https://github.com/acgetchell/delaunay/pull/45)

- docs: Update documentation [`#44`](https://github.com/acgetchell/delaunay/pull/44)

### Added

- **Introduces a new \`hardware\_info.sh\` script to collect detailed hardware information for benchmark comparisons.**
  [`73b5656`](https://github.com/acgetchell/delaunay/commit/73b5656)
  - Behavior
    - Addresses potential invalid facet sharing issues in the triangulation data structure, adding debug logging.
  - Other
    - Adds hardware information to the benchmark baseline files for more accurate comparisons.
    - Adds script to create git tags from changelog

### Changed

- **Updates delaunay crate to v0.3.5** [`73b5656`](https://github.com/acgetchell/delaunay/commit/73b5656)

  Bumps the delaunay crate version to 0.3.5.

  This commit includes several improvements:

- **Enhances benchmark comparison scripts to include hardware compatibility checks and warnings.**
  [`73b5656`](https://github.com/acgetchell/delaunay/commit/73b5656)

- **Improves benchmark and release scripts** [`73b5656`](https://github.com/acgetchell/delaunay/commit/73b5656)

  Refactors benchmark comparison script to handle different time and throughput units.

  Updates the release workflow in `CONTRIBUTING.md` to clarify the steps involved in generating and pushing a new release, including temporary tag usage and
  commit message guidelines.

  Enhances hardware information gathering in benchmark scripts to support more platforms (including PowerShell for Windows) and improve accuracy.  Also adds
  hardware comparison to benchmark output.

  Adds debugging output for removal of invalid cells

- **Improves changelog tag creation and validation** [`73b5656`](https://github.com/acgetchell/delaunay/commit/73b5656)

  Enhances the `tag-from-changelog.sh` script to extract changelog content by matching the specific version, supporting various changelog formats. It also
  incorporates validation and warning messages if no matching version is found.

  Updates the contributing guidelines with refined instructions for generating changelogs, pushing changes, and publishing to crates.io, including the use of
  atomic pushes.

  Adjusts triangulation validation to use `eprintln` for debug messages and prevent unused variable warnings in release builds.

- **Improves debug assertions for facet sharing** [`73b5656`](https://github.com/acgetchell/delaunay/commit/73b5656)

  Refactors debug assertions related to invalid facet sharing
  to improve clarity and efficiency by using `cfg!(debug_assertions)`
  instead of `#[cfg(debug_assertions)]` blocks. This change makes the
  code more readable and avoids potential issues with unused variables
  in release mode while maintaining the same debugging functionality.

- **docs: Update documentation** [`5bcf318`](https://github.com/acgetchell/delaunay/commit/5bcf318)

  Update workflow to generate CHANGELOG.md automatically using commit dates rather than tag dates.

  Fix documentation on bowyer-watson and varous other places.

  Add more examples for use in CONTRIBUTING.md.

- **docs: Refine documentation** [`5bcf318`](https://github.com/acgetchell/delaunay/commit/5bcf318)

  Refactors benchmark setup to improve clarity and reduce code duplication by introducing helper functions for clearing neighbors.

  Updates CI workflow to include tests and adds `ci` to the auto-changelog ignore pattern.

- **Improves changelog generation and formatting** [`5bcf318`](https://github.com/acgetchell/delaunay/commit/5bcf318)

  Refactors the changelog generation script to enhance commit message formatting, and categorize commit messages by type.

  Updates the changelog template to improve presentation, and ensure consistent date formatting and readability.

  Removes the commit message template and updates contributing guidelines to reflect conventional commits usage.

- **Refactors changelog generation for clarity** [`5bcf318`](https://github.com/acgetchell/delaunay/commit/5bcf318)

  Simplifies the changelog generation script by ensuring the "Changes" header is printed only once and streamlining the commit processing logic.

  This improves the script's readability and maintainability by removing redundant checks and simplifying the flow of execution.

- **docs: update CHANGELOG for v0.3.4** [`458d378`](https://github.com/acgetchell/delaunay/commit/458d378)

### Removed

- **Removes unused variable assignment** [`73b5656`](https://github.com/acgetchell/delaunay/commit/73b5656)

  Removes the direct assignment of the first argument to
  `TAG_VERSION`. This assignment was unused, as the variable was
  never referenced after its declaration.

### Fixed

- **Corrects minor spelling errors in the documentation.** [`73b5656`](https://github.com/acgetchell/delaunay/commit/73b5656)

- **Fix invalid category slug on crates.io** [`cafc7d7`](https://github.com/acgetchell/delaunay/commit/cafc7d7)

- **Fix too long keyword** [`0c8bc32`](https://github.com/acgetchell/delaunay/commit/0c8bc32)

## [v0.3.4](https://github.com/acgetchell/delaunay/compare/v0.3.3...v0.3.4) - 2025-08-15

### Merged Pull Requests

- Improves triangulation performance and validation [`#43`](https://github.com/acgetchell/delaunay/pull/43)

- Rename delaunay_core to core [`#42`](https://github.com/acgetchell/delaunay/pull/42)

- Rename project from d-delaunay to delaunay [`#41`](https://github.com/acgetchell/delaunay/pull/41)

- Update documentation, scripts, benchmarks [`#39`](https://github.com/acgetchell/delaunay/pull/39)

### Added

- **Introduces \`fix\_invalid\_facet\_sharing\` to remove problematic cells, resulting in more robust triangulation.**
  [`ab9cc99`](https://github.com/acgetchell/delaunay/commit/ab9cc99)
  - API
    - Implements \`find\_bad\_cells\` and \`find\_boundary\_facets\` methods as
  - Other
    - Enhances vertex addition logic and supercell creation, guaranteeing more valid triangulations.
    - Improves cell and facet handling, adds supercell errors

- **Adds dependency check for baseline extraction** [`9d934f7`](https://github.com/acgetchell/delaunay/commit/9d934f7)

  Ensures that the `check_benchmark_parser_dependencies` function
  is called before proceeding with baseline time extraction. This
  prevents errors if the required dependencies are not met.

### Changed

- **Improves triangulation performance and validation** [`635aee3`](https://github.com/acgetchell/delaunay/commit/635aee3)

  Adds performance improvements to triangulation construction and
  validation through caching, optimized algorithms, and memory
  management techniques.

  Includes comprehensive validation checks to ensure triangulation
  integrity and stability, particularly focusing on boundary handling
  and neighbor relationships. Integrates various benchmarking tests
  and updates documentation to reflect optimizations and enhancements.

  Adds a Code of Conduct and Contributing Guide.

- **Improves code of conduct and validation** [`635aee3`](https://github.com/acgetchell/delaunay/commit/635aee3)

  Updates the code of conduct timestamp automatically.

  Enhances triangulation data structure validation to detect invalid neighbor relationships, improving data integrity.

- **Rename delaunay\_core to core** [`ab9cc99`](https://github.com/acgetchell/delaunay/commit/ab9cc99)

- **Improves triangulation data structure implementation** [`ab9cc99`](https://github.com/acgetchell/delaunay/commit/ab9cc99)

  Refactors the triangulation data structure (TDS) implementation, enhancing its robustness and correctness. It introduces fixes to the Bowyer-Watson algorithm,
  addresses invalid facet sharing issues, and adds comprehensive validation and testing to ensure data structure integrity.

  Specifically:

- **Provides comprehensive tests covering various dimensions and edge cases.** [`ab9cc99`](https://github.com/acgetchell/delaunay/commit/ab9cc99)

- **Improves boundary facet detection and cell handling** [`ab9cc99`](https://github.com/acgetchell/delaunay/commit/ab9cc99)

  Refactors boundary facet detection for efficiency by reusing a precomputed map and using vector capacity.

  Introduces `clear_neighbors` method to the `Cell` struct, allowing for the resetting of cell neighbors.
  This is particularly useful in benchmarking scenarios where neighbor assignment needs to be isolated and measured.

  Fixes a minor documentation issue in the README.
  Adds `supercells` to the cspell dictionary to avoid false positives.
  Also introduces an enum to represent the errors that can occur when finding extreme coordinates.

- **Improves boundary facet handling and cell validation** [`ab9cc99`](https://github.com/acgetchell/delaunay/commit/ab9cc99)

  Updates the boundary facet methods to return a `Result` to handle potential facet creation errors.

  Adds validation and error handling to cell creation
  and ensures cells have the correct number of vertices.

  Enforces semantic ordering of neighbor relationships by ensuring that `cell.neighbors[i]` is the neighbor sharing the facet opposite to `cell.vertices[i]`.

  This improves data consistency and robustness of the triangulation data structure.

- **Improves cell and facet handling** [`ab9cc99`](https://github.com/acgetchell/delaunay/commit/ab9cc99)

  Refactors cell validation for clearer error reporting.

  Simplifies cell creation from facets by removing unnecessary Result and anyhow usage.

  Enhances facet key generation with a stable hashing algorithm, improving reliability and performance.

  Adds a new error variant `FacetError::VertexNotFound` for improved error handling when vertex UUIDs are missing from the vertex bimap, including comprehensive
  tests.

  Updates example to explicitly import the `BoundaryAnalysis` trait.

- **Rename project from d-delaunay to delaunay** [`d9daf45`](https://github.com/acgetchell/delaunay/commit/d9daf45)

- **Updates dependencies** [`d9daf45`](https://github.com/acgetchell/delaunay/commit/d9daf45)

  Bumps versions of several dependencies, including `anyhow`, `clap`, `thiserror`, and `uuid`, to their latest releases.

  Also, simplifies keywords in Cargo.toml, and fixes a typo in the code organization documentation.

- **Updates crate metadata and README** [`d9daf45`](https://github.com/acgetchell/delaunay/commit/d9daf45)

  Refreshes the crate's metadata in Cargo.toml, including description and repository information.

  Updates the README to reflect the project's history and current
  development location, including badges, historical documentation links,
  and clarifies the project's evolution from the original shape-rs
  repository.

  Adds project history to the crate-level documentation.

- **Updates metadata and documentation** [`d9daf45`](https://github.com/acgetchell/delaunay/commit/d9daf45)

  Refines crate metadata in Cargo.toml by streamlining categories.

  Improves README.md by updating repository and documentation links
  for clarity and accuracy.

- **Update documentation, scripts, benchmarks** [`9d934f7`](https://github.com/acgetchell/delaunay/commit/9d934f7)

- **Improves benchmark scripts and CI workflow** [`9d934f7`](https://github.com/acgetchell/delaunay/commit/9d934f7)

  Refactors benchmark scripts for better dependency management and error handling by adding dependency checks.

  Updates the CI workflow to consolidate permission settings and ensure smoother execution.

  Updates baseline benchmark results.

- **Improves benchmark parsing and reporting** [`9d934f7`](https://github.com/acgetchell/delaunay/commit/9d934f7)

  Refactors the benchmark parsing script to enhance accuracy and consistency.

  Updates the script to correctly extract dimension and point count from benchmark identifiers, and to capture and report the correct time unit (μs, ms, s) for
  each benchmark result.

  Removes old benchmark result comparison files and adds new baseline results for future comparisons.

- **Updates benchmark scripts for accuracy** [`9d934f7`](https://github.com/acgetchell/delaunay/commit/9d934f7)

  Refactors benchmark scripts to enhance accuracy and reliability.
  Updates the benchmark parsing logic to correctly handle nanosecond timings.
  Ensures proper handling of project directory changes during benchmark execution.

  Fixes inconsistencies in baseline generation and comparison.

- **Improves benchmark parsing and comparison scripts** [`9d934f7`](https://github.com/acgetchell/delaunay/commit/9d934f7)

  Normalizes time units in benchmark parsing scripts to ensure consistency by converting "us" to "μs". It also addresses potential issues by truncating the
  output file before writing, preventing append issues.

  The comparison script is updated to correctly detect and process nanosecond timings, improving the accuracy of benchmark comparisons.
  Negative values are now correctly displayed in the throughput changes.

  Adds missing words to cspell config.

### Fixed

- **Improves error handling in neighbor assignment** [`ab9cc99`](https://github.com/acgetchell/delaunay/commit/ab9cc99)

  Refactors `assign_neighbors` and `assign_incident_cells` methods to return `Result`
  and propagate `TriangulationValidationError` upon failure, improving error handling
  and robustness of the triangulation data structure.

  Adds more comprehensive tests for error handling in `assign_incident_cells` method
  and updates benchmark tests to ignore the return value from `assign_neighbors`.

- **Fix Benchmarks** [`9d934f7`](https://github.com/acgetchell/delaunay/commit/9d934f7)

## [v0.3.3](https://github.com/acgetchell/delaunay/compare/v0.3.2...v0.3.3) - 2025-08-05

### Merged Pull Requests

- Refactor/triangulation data structure 2 [`#37`](https://github.com/acgetchell/delaunay/pull/37)

- Refactor/triangulation data structure [`#36`](https://github.com/acgetchell/delaunay/pull/36)

### Added

- **Adds benchmarking and allocation tracking** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

  Introduces criterion benchmarks for small-scale triangulation, including 2D, 3D, and 4D implementations.

  Enables allocation tracking using the `allocation-counter` crate to measure memory usage during triangulation.

  Adds example to test allocation APIs and scripts for benchmarking and regression analysis.

- **Implements BoundaryAnalysis trait for Tds** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

  Introduces a `BoundaryAnalysis` trait to encapsulate boundary facet identification and analysis, enhancing modularity and testability.

  This change separates boundary-specific methods from the `Tds` struct, promoting cleaner code and easier extension with new algorithms. It also adds utility
  functions and moves existing helper functions to the utility module.

- **Adding \`into\_hashmap\` to efficiently convert a vector of cells into a hashmap.** [`8c7d05f`](https://github.com/acgetchell/delaunay/commit/8c7d05f)
  - Tests
    - Introducing \`facets\_are\_adjacent\` to test the adjacency of two facets.
  - Other
    - Adding \`facets\` to return the facets of a given cell.
    - Adding utility functions \`generate\_combinations\`
    - Adds concurrency control to CI workflows
    - Adds concurrency control to CodeQL workflow

### Changed

- **Refactors Tds to use SlotMap for vertices and cells** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

  Changes the internal storage of vertices and cells in the `Tds` (Triangulation Data Structure) from `HashMap` to `SlotMap`. This provides stable keys,
  efficient access, and improved performance, particularly for large triangulations.

  Introduces `VertexKey` and `CellKey` types for accessing `SlotMap` entries, and maintains `HashMap`s for UUID-to-key mappings to preserve external UUID-based
  access.  Also adds validation for these mappings to ensure consistency.

  Updates Bowyer-Watson triangulation logic to work with `SlotMap` and key-based access.  Removes duplicate cells, assigns neighbors, and assigns incident cells
  using the new data structure.

  Also fixes an issue where Uuids could collide when adding new vertices.

  This change enhances memory management and overall efficiency of the triangulation process.

- **Updates incident cell assignment logic** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

  Updates the incident cell assignment logic to correctly assign a cell to a vertex. It iterates over the vertex-to-cells mapping and assigns the first cell
  found to the vertex's incident cell.

- **Improves triangulation performance and reliability** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

  Enhances performance of key triangulation methods: Bowyer-Watson, neighbor assignment, and duplicate cell removal. Optimizes memory allocation and adds 2D
  triangulation benchmarks for comparison.
  Improves cell neighbor assignment by using facet-based neighbor identification, enhancing speed and memory efficiency.

  Adds pre-allocation and early-exit strategies to critical loops.
  These optimizations greatly reduce processing time, especially for large triangulations. Includes benchmark tests to measure impact.

  Fixes a regression in the neighbor assignment logic that prevented neighbor relationships from being properly constructed.

- **Optimizes triangulation with SlotMap and buffers** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

  Refactors the triangulation data structure (TDS) to use SlotMap for vertices and cells, improving performance by providing stable keys and efficient access.

  Introduces reusable buffers for intermediate data in the Bowyer-Watson algorithm to reduce memory allocations and improve performance. This includes buffers
  for bad cells, boundary facets, vertex points, and bad cell facets.

  Updates the extreme coordinate finding function to work directly with SlotMap, further enhancing efficiency.

- **Refactors TDS to use BiMaps for UUID mappings** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

  Replaces HashMaps with BiMaps for vertex and cell UUID to key mappings in the Triangulation Data Structure (TDS). This change improves performance and
  simplifies the codebase by providing bidirectional lookup capabilities.

  Adds custom serialization/deserialization logic to handle BiMap integration with Serde, ensuring data integrity during serialization and deserialization.

  Improves the validation logic to leverage the BiMap structure, resulting in more efficient and robust validation checks.

- **Improves assign\_neighbors performance** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

  Adds performance benchmarks for the `assign_neighbors` method to identify bottlenecks and confirm reduced overhead.

  Implements a facet key generation method using `VertexKeys` for more efficient neighbor assignment.  This avoids redundant calculations and allows neighbor
  assignments to happen more quickly.

  Adds a script to record baseline performance, and creates a baseline result to compare after optimizations.

- **Getting ready for benchmarks** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

- **Exposes \`cells\_mut\` and \`cells\` for \`Tds\`** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

  This commit introduces `cells` and `cells_mut` accessor methods for the `Tds` struct.

  The `cells` method provides immutable access to the underlying `SlotMap` of cells, enabling read-only operations.

  The `cells_mut` method offers mutable access for advanced use cases such as testing, with a warning against breaking triangulation invariants.

  This change also updates benchmark and example code to use these new accessor methods.

- **Improves boundary facet detection performance** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

  Optimizes the `is_boundary_facet` method by utilizing a precomputed facet-to-cells map.

  This avoids iterating through all cells to determine if a facet is on the boundary, resulting in significant performance gains.

- **Refactors test code for vertex slotmap creation.** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

  Introduces a helper function `create_vertex_slotmap` to reduce code duplication in tests that create `SlotMap` instances of vertices.
  This improves readability and maintainability of the test suite.

- **Improves vertex equality and hashing** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

  Refactors vertex equality and hashing to only consider coordinates, ensuring consistency between `PartialEq` and `Hash` implementations.

  This change addresses potential issues with using UUIDs or metadata in equality checks and hash calculations, as these are not relevant for
  determining vertex equivalence in geometric contexts.

  Additionally, facets adjacency detection is simplified by using `HashSet` for vertex comparison.

- **Improves example execution and cell hashing** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

  Refactors example execution to automatically discover and run examples, improving maintainability.

  Updates cell hashing to only consider sorted vertices, ensuring consistency with `PartialEq` and adhering to the Eq/Hash contract.  This prevents hash
  collisions when cell UUIDs, neighbor or data differ while vertices are identical, which is crucial for data structures relying on cell hashing.

  Adds `PartialEq` and `Eq` implementations for `Tds`, enabling comparison of triangulation data structures based on vertex and cell sets, facilitating testing
  and verification.

- **Improves code organization and structure** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

  Refactors the codebase to adhere to a consistent organizational pattern across key modules, enhancing readability and maintainability.

  This includes standardizing section sequences, comment separators, documentation, naming conventions, and testing patterns.

  Updates the triangulation data structure for improved clarity and efficiency, including the addition of helper functions and constants, along with
  corresponding documentation.

  Renames the optimization recommendations file to improve discoverability.

- **Handles scientific notation in benchmarks** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

  Ensures that benchmark comparison script correctly parses and compares values that are presented in scientific notation.
  This is done by converting scientific notation to decimal representation before comparison.

- **Improves triangulation optimization recommendations** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

  Updates documentation with recommendations for optimizing triangulation algorithms. It includes strategies to reduce temporary allocations by using custom
  hashing and spatial indexing.
  Removes commented-out code and adds notes indicating potentially
  missing implementations. Also, ensures the benchmark comparison
  script handles numeric values correctly.

- **Improves benchmark script and code quality** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

  Updates the benchmark comparison script to provide more user-friendly instructions for installing dependencies, suggesting the use of system package managers.

  Ensures `bc` calculations are performed with `scale=0` for integer results.

  Adds "winget" to the cspell dictionary.

  Clarifies how to run the allocation counting tests.

- **Simplify code prior to refactor** [`8c7d05f`](https://github.com/acgetchell/delaunay/commit/8c7d05f)

- **Improves cell and triangulation functionality** [`8c7d05f`](https://github.com/acgetchell/delaunay/commit/8c7d05f)

  Enhances the `Cell` and `Tds` implementations by adding utility functions and improving the Delaunay triangulation process. This includes:

- **Improving triangulation data structure with neighbor assignment.** [`8c7d05f`](https://github.com/acgetchell/delaunay/commit/8c7d05f)

- **Improving \`Tds\` documentation and examples.** [`8c7d05f`](https://github.com/acgetchell/delaunay/commit/8c7d05f)

- **Simplifies imports using prelude module** [`8c7d05f`](https://github.com/acgetchell/delaunay/commit/8c7d05f)

  Consolidates common imports through the `prelude` module for cleaner and more concise code in examples and benchmarks.

  Also, adds a `PartialEq` implementation for `FacetError`, and some minor validation handling improvements and adds a check to the vertex comparison sort.

- **Refactors supercell removal for efficiency** [`8c7d05f`](https://github.com/acgetchell/delaunay/commit/8c7d05f)

  Simplifies the supercell removal process by removing the supercell parameter, streamlining the logic.
  This change also removes duplicate calls to remove duplicate cells, further optimizing performance.

- **Improves boundary facet detection performance** [`8c7d05f`](https://github.com/acgetchell/delaunay/commit/8c7d05f)

  Optimizes boundary facet detection by reducing complexity from O(N²·F²) to O(N·F) using a HashMap-based approach.
  This change significantly improves performance for large triangulations by using a single-pass facet-to-cells mapping for efficient boundary identification.
  Includes benchmarks to verify performance gains.
  Also includes several minor changes such as prelude exports, documentation improvements, streamlining of supercell removal, and error handling enhancements.

- **Updates documentation comment** [`8c7d05f`](https://github.com/acgetchell/delaunay/commit/8c7d05f)

  Corrects a minor grammatical issue in the documentation comment
  for the `delaunay_core` module.

- **Refines test suite execution** [`8c7d05f`](https://github.com/acgetchell/delaunay/commit/8c7d05f)

  Updates test execution to run only the library tests initially, streamlining the testing process and reducing unnecessary overhead.
  This change optimizes the testing workflow by focusing on the core library functionality before running other test suites.

### Deprecated

- **Renames and deprecates Bowyer-Watson triangulation method.** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

  Renames `bowyer_watson_logic` to `bowyer_watson` to align with naming conventions.

  Improves error handling in `validate_cells` to provide more informative error messages, including a fallback for cell IDs if mapping is missing.

### Fixed

- **Fix clippy errors** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

- **Fix cargo clippy** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

- **Fix a bunch of CoderabbitAI-flagged warnings** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

- **Fix scripts** [`a2acfec`](https://github.com/acgetchell/delaunay/commit/a2acfec)

- **Fixing a cspell dictionary.** [`8c7d05f`](https://github.com/acgetchell/delaunay/commit/8c7d05f)

  These changes improve performance and provide additional utility for users.

- **Refactors supercell creation with error handling** [`8c7d05f`](https://github.com/acgetchell/delaunay/commit/8c7d05f)

  Improves robustness by adding error handling to supercell creation, which is critical for triangulation initialization.

  Specifically, it converts `unwrap()` calls during supercell construction to `map_err()` to return more informative errors, particularly when vertex creation
  fails.

  Adds a missing word to the cspell dictionary and links to triangulation algorithms in the README.

## [v0.3.2](https://github.com/acgetchell/delaunay/compare/v0.3.1...v0.3.2) - 2025-07-29

### Merged Pull Requests

- Refactors vertex and updates example [`#35`](https://github.com/acgetchell/delaunay/pull/35)

### Added

- **Adds Cell struct and related functionality** [`be56d57`](https://github.com/acgetchell/delaunay/commit/be56d57)

  Introduces the `Cell` struct to represent d-dimensional simplices, along with supporting types, builder, and macro.

  This commit provides core data structures and operations for managing geometric cells, including vertex management, neighbor tracking, optional data storage,
  and serialization support.
  It introduces CellValidationError for robust error handling.

  The `cell!` macro simplifies cell creation and a comprehensive test suite validates core functionality.

- **Improves facet struct and adds comprehensive tests.** [`be56d57`](https://github.com/acgetchell/delaunay/commit/be56d57)

  Refactors the facet struct for improved clarity and organization.

  Adds comprehensive unit tests covering various aspects such as creation, serialization, equality, ordering, dimensional properties, and error handling,
  ensuring robustness and reliability.

### Changed

- **Refactors vertex and updates example** [`be56d57`](https://github.com/acgetchell/delaunay/commit/be56d57)

  This commit introduces a new `vertex` module for managing vertices in d-dimensional space with associated metadata.
  It provides a `Vertex` struct, a `VertexBuilder`, and a convenience macro for simplified vertex creation.

  The test example is updated to use the new module and macro, replacing the old manual vertex creation.
  It also changes the repository URL in Cargo.toml.

- **Simplifies vertex creation with macro** [`be56d57`](https://github.com/acgetchell/delaunay/commit/be56d57)

  Refactors the `vertex!` macro to use `VertexBuilder` internally for simplified vertex creation.

  This change removes the `create_vertex` helper function and streamlines the macro to directly return a `Vertex` using the builder pattern. It also adds
  comprehensive deserialization tests, error handling and validation.

  Additionally, the commit includes `.gitignore` updates to exclude tarpaulin coverage reports and examples were adjusted to include an explicit type annotation
  for the `vertex!` macro.

- **Simplifies facet example and tests with macros** [`be56d57`](https://github.com/acgetchell/delaunay/commit/be56d57)

  Replaces verbose vertex and cell creation with concise macros in facet examples and tests.

  This change enhances readability and reduces boilerplate code, making the examples and tests easier to understand and maintain. It leverages the `vertex!` and
  `cell!` macros for more streamlined object construction.

- **Refactors and enhances testing framework** [`be56d57`](https://github.com/acgetchell/delaunay/commit/be56d57)

  Streamlines the test suite by removing redundant and outdated tests, improving focus on core functionalities.

  Adds targeted tests for facet deserialization error handling and extreme coordinate calculations. These tests increase coverage and robustness for JSON
  handling and boundary calculations.

- **Improves Coordinate trait and tests** [`be56d57`](https://github.com/acgetchell/delaunay/commit/be56d57)

  Refactors and expands tests for the Coordinate trait to ensure comprehensive coverage of different data types, dimensions, and edge cases.

  Removes the `origin()` method from the `Point` struct and relies on the trait implementation.

- **Releases version 0.3.2** [`be56d57`](https://github.com/acgetchell/delaunay/commit/be56d57)

  Updates the version to 0.3.2 and includes comprehensive improvements.

  Adds complete test coverage for coordinate traits, enhances the testing framework, and introduces `vertex!` and `cell!` macros.

  Streamlines coordinate traits, enhances facet structures, optimizes cell structures, and refactors the testing framework.

  Resolves clippy warnings, improves variable naming, and enhances code organization.

  Focuses on reducing code complexity while maintaining functionality, leading to improvements in compilation times and code maintainability.

- **Reformat CHANGELOG.md** [`be56d57`](https://github.com/acgetchell/delaunay/commit/be56d57)

  Reformats the CHANGELOG.md file.

  This commit primarily focuses on reformatting the CHANGELOG.md to improve readability and maintainability.

## [v0.3.1](https://github.com/acgetchell/delaunay/compare/v0.3.0...v0.3.1) - 2025-07-26

### Merged Pull Requests

- Improves CodeQL analysis for Rust projects [`#34`](https://github.com/acgetchell/delaunay/pull/34)

### Added

- **Enables autobuild for rust codeql analysis.** [`bdc206f`](https://github.com/acgetchell/delaunay/commit/bdc206f)

- **Adds new words to the spell checker dictionary.** [`bdc206f`](https://github.com/acgetchell/delaunay/commit/bdc206f)

### Changed

- **Improves CodeQL analysis for Rust projects** [`bdc206f`](https://github.com/acgetchell/delaunay/commit/bdc206f)

  Configures CodeQL to properly analyze Rust projects by setting up the Rust toolchain, caching dependencies, and building the project with all features. This
  ensures a more comprehensive analysis and reduces build times.
  Also updates dependencies in Cargo.lock and adds metadata to Cargo.toml.

- **Configures code analysis and linter settings** [`bdc206f`](https://github.com/acgetchell/delaunay/commit/bdc206f)

  Updates the code analysis and linting configuration for improved code quality.

  Specifically:

- **Reduces the timeout for GitHub Actions linter to prevent long running processes.** [`bdc206f`](https://github.com/acgetchell/delaunay/commit/bdc206f)

- **Disables eslint to streamline the linting process and avoid conflicts.** [`bdc206f`](https://github.com/acgetchell/delaunay/commit/bdc206f)

- **Disables autobuild for Rust CodeQL analysis** [`bdc206f`](https://github.com/acgetchell/delaunay/commit/bdc206f)

  Configures CodeQL analysis for Rust to skip the autobuild step.

  This avoids potential build failures and allows for more controlled
  analysis using pre-built artifacts or custom build steps,
  leading to more reliable and faster analysis results.

### Fixed

- **Updates dependencies and improves numerical stability** [`bdc206f`](https://github.com/acgetchell/delaunay/commit/bdc206f)

  Updates the `d-delaunay` dependency to version 0.3.1.

  Improves the numerical stability of the `hypot` function by using the standard library's `f64::hypot` function for the 2D case and a generalized hypot
  calculation for higher dimensions, preventing potential overflow and underflow issues.
  Also utilizes `mul_add` for point generation in benchmarks for better performance and accuracy.

  Removes the manual build step for Rust in the CodeQL workflow and instead relies on the default automatic build process, simplifying the configuration.

- **Improves distance calculation consistency and performance** [`bdc206f`](https://github.com/acgetchell/delaunay/commit/bdc206f)

  Standardizes distance calculations using utility functions (`hypot`, `squared_norm`), enhancing numerical stability and code maintainability.

  This change results in measurable performance gains across various methods, most notably a 2.8% improvement in `insphere_distance`.

- **Fix security issues** [`e5e8e21`](https://github.com/acgetchell/delaunay/commit/e5e8e21)

## [v0.3.0](https://github.com/acgetchell/delaunay/compare/v0.2.0...v0.3.0) - 2025-06-16

### Merged Pull Requests

- Introduces `Coordinate` trait for coordinate abstraction [`#32`](https://github.com/acgetchell/delaunay/pull/32)

- Refactor/predicates [`#30`](https://github.com/acgetchell/delaunay/pull/30)

- Refactor/traits [`#27`](https://github.com/acgetchell/delaunay/pull/27)

- New/predicates [`#26`](https://github.com/acgetchell/delaunay/pull/26)

- Refactor/carefully [`#25`](https://github.com/acgetchell/delaunay/pull/25)

- Refactor/tds [`#21`](https://github.com/acgetchell/delaunay/pull/21)

- Tests/improve coverage and lints [`#20`](https://github.com/acgetchell/delaunay/pull/20)

- Refactors float trait implementations with macros [`#19`](https://github.com/acgetchell/delaunay/pull/19)

- Refactors Point comparisons, Vertex and updates examples [`#17`](https://github.com/acgetchell/delaunay/pull/17)

- Core/consistency [`#15`](https://github.com/acgetchell/delaunay/pull/15)

- Fix/core data types [`#13`](https://github.com/acgetchell/delaunay/pull/13)

- Fix/bowyer watson [`#6`](https://github.com/acgetchell/delaunay/pull/6)

### Added

- **Implements implicit conversion from \`Vertex\` and \`Point\` to coordinate arrays using the \`From\` trait, which simplifies coordinate access.**
  [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)
  - API
    - Introduces \`Coordinate\` trait for coordinate abstraction
    - Implements \`default\_tolerance\` for \`CoordinateScalar\` trait to provide type-specific tolerance values.
    - Adds Coordinate trait to example usages
  - Tests
    - Adds a comprehensive CI workflow with build, test, and formatting checks across multiple platforms
  - Other
    - Enables auto-apply labels and improves Tds
    - Introduces a dependency audit workflow for vulnerability detection
    - Implements a code coverage workflow using tarpaulin and Codecov
    - Creates a security analysis workflow utilizing Clippy and SARIF for advanced linting
    - Enables serialization/deserialization for Point

- **Configures Coderabbit and adds linter tools** [`2a57833`](https://github.com/acgetchell/delaunay/commit/2a57833)

  Adds a `.coderabbit.yml` file to configure code review settings.

  Enables various linters (clippy, shellcheck, markdownlint, etc.) for improved code quality and consistency.

  Configures spellcheck and adds new words to cspell.json.

  Implements implicit conversion from `Vertex` reference to `Point` and updates the `test_circumsphere.rs` example to use the implicit conversion. This improves
  readability and reduces code duplication.

- **Adding more test cases for edge cases, specifically numerical precision cases.** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)
  - Tests
    - Adds 4D simplex circumsphere and orientation tests
    - Creating helper functions to streamline the 3D matrix analysis test,
  - Other
    - Adds circumsphere containment benchmarks

- **Introduces \`TriangulationValidationError\` enum for detailed error reporting** [`ec9a9b2`](https://github.com/acgetchell/delaunay/commit/ec9a9b2)
  - Other
    - Implements duplicate cell detection and removal with proper error handling
    - Adds cell uniqueness validation to prevent issues caused by duplicate cells.
    - Enables automatic triangulation during Tds creation

- **Adds \`approx\` crate and uses \`assert\_relative\_eq!\` for floating-point comparisons in \`cell.rs\`, \`facet.rs\`, \`point.rs\`, and \`utilities.rs\`**
  [`cd13fe4`](https://github.com/acgetchell/delaunay/commit/cd13fe4)
  - Tests
    - Improves test coverage and adds precision assertions
    - Adds cell validity checks and improves point tests
  - Other
    - Adds rand crate and improves point validation
    - Adds triangulation data structure (TDS)

- **Adds \`inline(always)\` attribute to \`FiniteCheck\` methods** [`1712043`](https://github.com/acgetchell/delaunay/commit/1712043)
  - API
    - Adds getter methods for Cell and Facet structs
  - Other
    - Implements Cell validity check
    - Improves code readability and adds \`must\_use\`

- **Adds examples to documentation** [`fe44e1a`](https://github.com/acgetchell/delaunay/commit/fe44e1a)

  Enhances the documentation by providing usage examples for various functions and methods. These examples illustrate how to use the functions and help users
  understand their behavior.

- **Enables NaN-aware point comparison and hashing** [`fe44e1a`](https://github.com/acgetchell/delaunay/commit/fe44e1a)

  Addresses issues with NaN handling in Point comparisons and hashing.

  Implements a custom equality check for `Point` that treats NaN values as equal to each other,
  ensuring consistency when using Points as keys in `HashMap` and `HashSet`.

  Adds comprehensive examples and tests to demonstrate the NaN-aware comparison,
  hashing, and overall behavior of the Point struct with special values like NaN and infinity.

  This change ensures that points with identical coordinates, including NaN,
  produce the same hash value, enabling reliable use in data structures.

- **Implements Vertex validation logic** [`fe44e1a`](https://github.com/acgetchell/delaunay/commit/fe44e1a)

  Adds a `is_valid` method to the `Vertex` struct to check for validity. It ensures that the point coordinates are finite and the UUID is not nil. Includes
  comprehensive unit tests covering
  various scenarios, including NaN, infinity, and different data types.

- **Uses the solution point directly instead of creating a new point from its coordinates.** [`928f42d`](https://github.com/acgetchell/delaunay/commit/928f42d)

- **Introduces local variable for vertex coordinates to prevent multiple access.** [`928f42d`](https://github.com/acgetchell/delaunay/commit/928f42d)

- **Enables implicit conversion for points and vertices** [`928f42d`](https://github.com/acgetchell/delaunay/commit/928f42d)

  Refactors the codebase to allow implicit conversion of vertices and points to coordinate arrays, improving ergonomics.

  This change adds `From` trait implementations for `Point` and `Vertex`, allowing them to be implicitly converted to coordinate arrays. It also refactors
  existing code to take advantage of this new feature,
  replacing explicit `.coordinates()` calls with implicit conversions.

  This enhances code readability and reduces verbosity while maintaining backward compatibility and type safety. It addresses previous issues
  with nalgebra compatibility.

- **Enables \`Eq\` and \`Hash\` implementations for core types** [`2826ccf`](https://github.com/acgetchell/delaunay/commit/2826ccf)
  - API
    - Implements Hash trait for Facet struct
  - Tests
    - Adds hash function test for all primitives
  - Other
    - Adds CodeRabbit badge and generic Hash impl

- **feat: Add new function cell.circumsphere\_contains\_vertex** [`bd2a079`](https://github.com/acgetchell/delaunay/commit/bd2a079)

  Supposed to be more stable, but seems to also be inaccurate in some cases.

- **Updates dependencies and adds \`ordered-float\`** [`bd2a079`](https://github.com/acgetchell/delaunay/commit/bd2a079)

  Updates project dependencies to their newer versions and introduces the `ordered-float` crate. This addition enables the use of ordered floating-point
  numbers, which are essential for data structures requiring ordering, such as those used in geometric algorithms.

  The `rand` crate is also updated with the older 0.8.5 version included as well, possibly for compatibility reasons with other dependencies.

- **Adds permissions to Codecov workflow** [`bd2a079`](https://github.com/acgetchell/delaunay/commit/bd2a079)

  Specifies read and write permissions for contents, checks, and pull requests within the Codecov workflow.
  This enhances security by granting only the necessary privileges to the workflow.

- **Create codeql.yml** [`dbba414`](https://github.com/acgetchell/delaunay/commit/dbba414)

- **Adds triangulation data structure validation.** [`8e34949`](https://github.com/acgetchell/delaunay/commit/8e34949)

  Implements validation of neighbor relationships within the triangulation data structure, ensuring that cells correctly reference each other and share
  appropriate facets.

  This addresses potential issues with triangulation integrity and provides a means to verify
  the correctness of the data structure.

- **Adds 5D Bowyer-Watson triangulation test** [`7555648`](https://github.com/acgetchell/delaunay/commit/7555648)

  Adds a new test case to verify the Bowyer-Watson algorithm's functionality in 5-dimensional space.

  This test constructs a complex triangulation using 7 points to ensure the algorithm can handle multiple cells and neighbor relationships correctly.

- **Improves simplex creation and adds 4D triangulation test** [`40b8209`](https://github.com/acgetchell/delaunay/commit/40b8209)

  Refactors the simplex creation algorithm for higher dimensions, generating a regular simplex by arranging vertices on hypercube corners.

  Includes a new test case for 4D Bowyer-Watson triangulation with multiple cells, validating the algorithm's functionality and neighbor relationships in higher
  dimensions.

- **Adds comprehensive facet tests** [`8f8e0ae`](https://github.com/acgetchell/delaunay/commit/8f8e0ae)

  Adds extensive unit tests for the Facet struct, covering various scenarios, including cloning, default values, debug output, handling typed data, different
  dimension simplices (1D, 2D, 4D), error conditions, vertex ordering, serialization, and equality comparisons.

- **Adds comprehensive tests for Vertex struct** [`210063c`](https://github.com/acgetchell/delaunay/commit/210063c)

  Adds tests to verify various functionalities of the
  `Vertex` struct, including hashing, cloning,
  serialization, and handling of different data types,
  dimensions, and coordinate values. These tests ensure the robustness and correctness of the `Vertex` implementation.

- **Adds Eq trait implementation for Point struct** [`497d5f5`](https://github.com/acgetchell/delaunay/commit/497d5f5)

  Adds an explicit implementation of the Eq trait for the Point struct, ensuring that points can be reliably compared for equality.

  Additionally, adds comprehensive unit tests for the Point struct, covering various aspects such as:
  - Hashing
  - Partial equality
  - Partial ordering
  - Cloning
  - Different dimensions (1D, 2D, 3D, 5D)
  - Different data types (integers, floats)
  - Debug formatting
  - Serialization
  - Edge cases in ordering
  - Conversion from different integer types

- **Adds comprehensive tests for triangulation data structure** [`a3934d4`](https://github.com/acgetchell/delaunay/commit/a3934d4)

  Introduces extensive unit tests for the `Tds` struct, covering various scenarios:

  - Initialization with empty, single, and multiple vertices.
  - Handling duplicate vertices.
  - Verification of cell count and dimension calculation.
  - Functionality of clone, default, partial equality, debug traits.
  - Edge cases for dimension calculation.
  - Correctness of supercell construction.
  - Finds bad cells and boundary facets for an empty structure.
  - Verifies vertices and cells HashMap access.

  These tests ensure the robustness and correctness of the triangulation data structure.

- **Updates Codecov action and adds words to cspell** [`2593c7e`](https://github.com/acgetchell/delaunay/commit/2593c7e)

  Updates the Codecov action to use the `with` syntax for providing the token, which is the recommended approach.

  Adds several words to the cspell dictionary to prevent false positives. These words are related to dependencies and common terms in the codebase.

- **Adds dependabot configuration file** [`110048c`](https://github.com/acgetchell/delaunay/commit/110048c)

  Sets up dependabot to automatically update dependencies.

  Configures dependabot to check for updates to both GitHub Actions and Rust (Cargo) dependencies on a weekly basis.
  It also groups Rust dependencies together and limits open pull requests.

### Changed

- **Improves coordinate handling with Coordinate trait** [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

  Consolidates coordinate-related trait bounds into a single `Coordinate` trait,
  enhancing abstraction and simplifying geometry structures.

  This change introduces a unified interface for various coordinate storage
  mechanisms (arrays, vectors, hash maps), promoting code flexibility and
  future extensibility.

  Includes improved documentation, validation error details, and ensures consistent origin handling.

- **Enhances Cell and Facet with trait bounds** [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

  Refactors Cell and Facet structs by adding `Serialize` and `DeserializeOwned` trait bounds where necessary.
  This allows Cell and Facet to be serialized/deserialized to/from JSON.

  The `Deserialize` derive macro was removed to allow explicit trait bounds.
  Some example data was changed so that all data types for testing implement the `Serialize` and `DeserializeOwned` traits.

- **Refactors coordinate handling with traits** [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

  Introduces a `Coordinate` trait to unify coordinate
  functionality across geometric structures. This change abstracts the underlying storage mechanism (arrays, vectors, etc.) and consolidates trait bounds for
  floating-point operations, hashing, equality, and
  validation.

  The `Coordinate` trait enhances code maintainability, readability, and allows for easier extension with new coordinate storage types.

- **Refactors Point coordinate access for ergonomics** [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

  Refactors the `Point` struct and related code to improve the ergonomics of accessing point coordinates.

- **Replaces the \`coordinates()\` method with \`to\_array()\` on the \`Point\` struct and related traits.**
  [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

- **Updates examples and benchmarks to utilize the new \`to\_array()\` and implicit conversion features.**
  [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

- **Increases the timeout for GitHub Actions linter to prevent timeout issues.** [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

- **Generalizes coordinate types to generic \`T\`** [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

  Extends the library to support various floating-point types (f32, f64, etc.) by introducing a generic type `T` for coordinate representation.

  This change allows for greater flexibility in precision levels and memory usage, enabling the library to be adapted to a wider range of applications.
  The new `CoordinateScalar` trait alias captures all required trait bounds for coordinate scalar types. Examples and tests have been updated to demonstrate
  usage with both f32 and f64 coordinate types.

- **Enhances CI/CD workflows for Rust projects.** [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

  Modernizes and improves CI/CD pipelines by introducing dedicated workflows for auditing dependencies, core CI tasks, code coverage reporting, and security
  analysis using Clippy.

  Replaces the previous monolithic CI configuration with modular workflows, improving maintainability and clarity.

  Specifically:

- **Updates cargo-audit workflow to correctly upload artifacts.** [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

- **Updates benchmark documentation for clarity.** [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

- **Simplifies trait bounds for geometric predicates.** [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

- **Improves default tolerance tests** [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

  Uses `assert_relative_eq!` for more accurate floating-point comparisons in default tolerance tests.

  This ensures that the tests account for potential floating-point inaccuracies
  when comparing tolerance values. Also, converts the f32 tolerance value to f64
  before comparison to avoid possible type related issues.

- **Reformats assertions for readability.** [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

  Reformats assertions in coordinate tests for improved readability and clarity.

- **Improves serialization and data handling** [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

  Introduces a `DataType` trait alias to streamline data type constraints for vertices and cells.
  This simplifies trait bounds and enhances code readability by grouping common trait requirements.

  Provides manual implementations of `Deserialize` for `Cell` and `Facet` to handle deserialization correctly with the new `DataType` trait.

  Updates audit workflow to use ref name in cache key and removes the continue-on-error setting.

  Enables the `document-start` rule in yamllint.

- **Improves cell tests with setup and teardown** [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

  Refactors cell tests to use helper functions for creating test vertices and cells.  This reduces code duplication and improves the readability and
  maintainability of the tests. It also re-enables the serde deserialization test by ensuring proper trait bounds.

- **Refactors Point construction for array inputs** [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

  Updates Point construction from array inputs to use `Point::new` instead of `Point::from`. This allows for explicit type conversion using `map` when the input
  and Point types differ, ensuring correct
  handling of conversions like f32 to f64.
  Also, fixes a typo in a test predicate.

- **Uses black\_box from std for consistency** [`2a57833`](https://github.com/acgetchell/delaunay/commit/2a57833)

  Updates the benchmark to use `std::hint::black_box` instead of `criterion::black_box` for consistency with other parts of the codebase.

- **Refactors circumsphere predicates to use Points** [`2a57833`](https://github.com/acgetchell/delaunay/commit/2a57833)

  Updates circumcenter, circumradius, insphere, and simplex_orientation functions to accept slices of Point instead of Vertex.

  This change simplifies the API and removes unnecessary Vertex dependencies from the geometry predicates.
  Benchmarks are added to evaluate and compare the performance of insphere algorithms (insphere, insphere_distance, insphere_lifted), covering basic, random
  query, dimensional, and edge case scenarios.
  A numerical consistency test verifies the agreement between the different insphere methods.

- **Refactors utilities for triangulation** [`2a57833`](https://github.com/acgetchell/delaunay/commit/2a57833)

  Moves `find_extreme_coordinates` from `predicates.rs` to a new `utilities.rs` file in the `delaunay_core` module.
  This change improves code organization and promotes reusability of utility functions within the core triangulation logic.

- **Enhances CI and code analysis workflows** [`2a57833`](https://github.com/acgetchell/delaunay/commit/2a57833)

  Refactors CI workflows for improved maintainability.

  Adds Codacy for security scanning and integrates the results
  with GitHub Advanced Security.

  Updates code coverage configuration and adds yamllint.

  Removes unnecessary linter level configuration.

- **Improves code analysis and CI workflows** [`2a57833`](https://github.com/acgetchell/delaunay/commit/2a57833)

  Enhances the Codacy workflow by addressing file handling and API interactions, ensuring robust SARIF file uploads.

  Adds workspace flag to rust-clippy to analyze all crates in the workspace.

  Updates the spellcheck dictionary and fixes an issue in the extreme coordinates function.

  Addresses a problem where the Codecov workflow was not triggered on push events to the main branch.

- **Refactors and improves code quality** [`3532ff6`](https://github.com/acgetchell/delaunay/commit/3532ff6)

  Refactors the code for better readability and maintainability.

  Specifically:

- **Moves the \`FiniteCheck\` trait to a dedicated module for better organization.** [`3532ff6`](https://github.com/acgetchell/delaunay/commit/3532ff6)

- **Moves HashCoordinate trait to geometry traits module** [`3532ff6`](https://github.com/acgetchell/delaunay/commit/3532ff6)

  Relocates the `HashCoordinate` trait from the point module to the geometry traits module.

  This change improves code organization and promotes better separation of concerns by grouping traits together.

  This also includes adding tests for trait implementations.

- **Refactors geometry traits and improves data structures** [`3532ff6`](https://github.com/acgetchell/delaunay/commit/3532ff6)

  This commit refactors the geometry traits by extracting the `OrderedEq` trait into its own module for better organization and reusability.

  It also modifies data structures to use `const fn` where applicable, potentially improving performance and enabling compile-time evaluation in certain
  contexts.

  Additionally, it adds missing words to the spellcheck dictionary.

- **Optimizes in-sphere check by reusing slice** [`3532ff6`](https://github.com/acgetchell/delaunay/commit/3532ff6)

  Avoids unnecessary vector allocation in the in-sphere check by directly using the cell's vertex slice, improving performance.

  Also, cleans up example imports by removing the "traits" namespace.

- **Refactors cell circumsphere calculations** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

  Delegates circumcenter, circumradius, and circumsphere containment calculations to a new geometry predicates module for improved code organization and
  reusability.

  This change replaces distance-based circumsphere containment checks with a determinant-based method for improved numerical stability. A new example is added
  to demonstrate and compare both methods.

- **Moves utilities to geometry module** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

  Refactors the `find_extreme_coordinates` function and general utilities from the `delaunay_core` module to the more appropriate `geometry` module.

  This change improves code organization and clarifies module responsibilities. It also removes the dedicated utilities.rs file from delaunay_core since its
  functions are now in the geometry module.

- **Comparison of determinant-based and distance-based methods for point-in-circumsphere checks.**
  [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

- **Simplex orientation testing across 2D, 3D, and 4D, demonstrating how the determinant-based method automatically handles orientation differences for**

  **consistent results.**

- **Test cases covering inside, outside, boundary, and vertex points.** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

  Also, adds 'hypertetrahedron' to the cspell dictionary.

- **Refactors circumradius calculation to return Result** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

  Updates the `circumradius_with_center` function to return a `Result` to handle potential errors during circumradius calculation, such as degenerate simplices
  or distance calculation failures. This improves error handling and robustness. Also adjusts calling functions to handle the new `Result` return type, ensuring
  proper error propagation and code correctness.

- **Improves circumradius and circumsphere calculations** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

  Refactors the circumradius and circumsphere containment logic for better accuracy and efficiency.

  Moves matrix inversion utilities to the geometry module.
  Adds a script to run all examples and ensures they are working correctly.

- **Basic performance** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

- **Random queries** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

- **Different dimensions (2D, 3D, 4D)** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

- **Edge cases (boundary, distant vertices)** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

- **Improves circumsphere and orientation predicates** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

  Refactors the circumsphere containment and simplex orientation logic to use an enum to represent the results (InSphere, Orientation) instead of booleans,
  improving clarity and robustness.

  This change enhances the accuracy and reliability of geometric predicates, and handles degenerate cases more effectively.

  Adds tests for orientation predicate

- **Refactors circumsphere containment benchmarks** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

  Improves benchmark suite by including a distance-based method and renaming existing methods for clarity.

  Adds the `insphere_distance` method to benchmark the performance of explicit circumcenter calculation. Renames the original `circumsphere_contains_vertex` and
  `circumsphere_contains_vertex_matrix` methods to `insphere` and `insphere_lifted` respectively for better consistency.

  Updates benchmark tests to incorporate all three methods across various dimensions and edge cases, including numerical consistency validation.

  Adds README to document benchmark results and recommendations.

- **Extends circumsphere test with 2D/3D support** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

  Expands the circumsphere containment test suite to include 2D and 3D simplexes, offering a more comprehensive evaluation of the `insphere` methods across
  different dimensions.

  This change introduces dimension-specific vertex creation functions and test routines,
  allowing for systematic testing of points inside, outside, and on the boundary of triangles and tetrahedra.
  This provides better insights into the behavior and accuracy of the circumsphere algorithms.
  A command-line argument parser is added to select specific test dimensions (2D, 3D, 4D, or all).

- **Generalizes vertex creation and improves tolerance** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

  Refactors vertex creation to be dimension-agnostic, reducing code duplication.

  Uses a default tolerance for geometric predicates and degeneracy detection.

  Updates tests to use a consistent tolerance for distance comparisons.

- **Refactors and improves circumsphere tests** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

  Simplifies vertex creation with a generic function, reducing code duplication in the circumsphere tests.

  Removes an obsolete debug test and corresponding menu entry.

  Adds performance benchmarks for circumsphere containment algorithms, demonstrating the relative speed of different methods. Updates README with
  benchmark results.

  Improves numerical stability by adjusting tolerance values for distance comparisons.

- **Refactors circumsphere test example for clarity** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

  Streamlines the circumsphere test example by introducing macros for vertex creation, test point definition, and test execution, significantly reducing
  boilerplate code.

  Adds a test registry for easier test selection and execution from command line arguments.

  Improves test structure and output formatting.

- **Refactors and enhances example execution** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

  Updates the example runner script to run examples more comprehensively with categories.

  Updates test_circumsphere example to accept optional user data. This makes vertex construction more flexible by allowing vertices without associated data.

- **Refactors and improves circumsphere tests** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

  Improves the circumsphere tests by introducing generic testing functions and cleaning up the code.
  The changes involve:

- **Replacing the separate test functions for 2D, 3D and 4D with a generic version.** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

- **Using nalgebra for distance calculations to simplify code and improve accuracy.** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

- **Moves point module to geometry crate** [`0825508`](https://github.com/acgetchell/delaunay/commit/0825508)

  This commit reorganizes the project structure by moving the
  point module from `delaunay_core` to a new `geometry` crate.

  This change promotes a cleaner separation of concerns, as the
  `geometry` crate can now house fundamental geometric primitives
  and operations, while `delaunay_core` focuses specifically on
  Delaunay triangulation logic.

  This refactoring improves code organization and maintainability.

- **Refactors to use Float trait for numeric types** [`0825508`](https://github.com/acgetchell/delaunay/commit/0825508)

  Updates the code to use the `Float` trait from the `num-traits` crate instead of specific numeric types like `i32` and `f64`.

  This change enables the library to support a wider range of numeric types, including `f32` and `f64`, by generalizing the type constraints for Cell, Facet,
  Point, Tds, and Vertex. It removes the unnecessary distinction between integer and float types, using Float.
  This provides more flexibility and simplifies the code.

- **Refactors code for improved maintainability** [`0825508`](https://github.com/acgetchell/delaunay/commit/0825508)

  Modernizes the codebase by updating the Rust edition to 2024.

  Simplifies code by removing unnecessary tests and reordering imports for consistency.

  Also updates an example to show how to run it and clarifies some error messages.

- **Updates Codacy analysis workflow** [`0825508`](https://github.com/acgetchell/delaunay/commit/0825508)

  Updates the Codacy analysis workflow to use specific versions of the checkout and upload-sarif actions for improved stability and reliability.

  Also, modifies the Codacy Analysis CLI action to use a specific commit hash and configures the project token as an input, rather than an environment variable,
  for better security and clarity.

- **Improves Point hashing for special float values** [`0825508`](https://github.com/acgetchell/delaunay/commit/0825508)

  Ensures consistent hashing for floating-point special values like NaN, Infinity, and -0.0 within the Point struct.

  This change addresses potential issues where Points with these special values were not being hashed correctly, leading to unexpected behavior in data
  structures like HashMaps and HashSets.

  It also adds new tests to ensure correct behavior of hashing function for special values.

- **Simplifies \`Point\` trait bounds** [`0825508`](https://github.com/acgetchell/delaunay/commit/0825508)

  Removes redundant trait bounds from the `Point` struct definition.

  The `Float` trait already includes `PartialEq`, `PartialOrd`, `Copy`, and `Clone`. This change removes these redundant bounds, leading to cleaner and more
  concise code. Also imports `Zero` directly instead of through `num_traits`.

  An example is added to demonstrate which traits are included in the `Float` trait.

- **Upgrades d-delaunay crate to version 0.2.0** [`0825508`](https://github.com/acgetchell/delaunay/commit/0825508)

  Updates the d-delaunay crate to version 0.2.0.

  This change replaces `From` with `NumCast::from` for float conversions to handle potential conversion failures explicitly. Removes unnecessary trait bounds
  and adds `expect` messages for `NumCast` results for better error reporting.

- **Refactors Tds to use a builder pattern** [`ec9a9b2`](https://github.com/acgetchell/delaunay/commit/ec9a9b2)

  Refactors the Triangulation Data Structure (Tds) to use the builder pattern for more flexible and controlled initialization.

  This change replaces the direct initialization with a `TdsBuilder`, allowing for optional parameters and validation. The `new` method now leverages the
  builder.  The `vertices` field is now mandatory via builder validation.
  Updates examples to reflect the change in API.

- **Revert "Refactors Tds to use a builder pattern"** [`ec9a9b2`](https://github.com/acgetchell/delaunay/commit/ec9a9b2)

  This reverts commit 30c9958d721546263fcf384c7836fc4853883750.

- **Changes Tds::new() to accept vertices instead of points** [`ec9a9b2`](https://github.com/acgetchell/delaunay/commit/ec9a9b2)

  Updates the `Tds::new()` function to accept a vector of `Vertex` objects instead of `Point` objects.

  This change aligns with the updated data structure requirements and ensures consistency throughout the codebase.

  The change requires updating the doc tests in the rust file, as well as adding "circumspheres" to the dictionary.

- **Makes Tds::new return a Result** [`ec9a9b2`](https://github.com/acgetchell/delaunay/commit/ec9a9b2)

  Updates the Tds::new function to return a `Result` to handle potential triangulation errors during the Bowyer-Watson algorithm, cell creation, neighbor
  assignment, or duplicate cell removal.

  This change ensures that errors during triangulation are properly propagated and handled by the caller. Includes documentation updates. Updates examples to
  use the `.unwrap()` method for brevity since examples will fail if triangulation fails.

- **Refactors triangulation initialization** [`ec9a9b2`](https://github.com/acgetchell/delaunay/commit/ec9a9b2)

  Improves the robustness of triangulation initialization by removing the `if let` and directly handling the result of `bowyer_watson_logic`.

  Adds example code to verify cell structure and triangulation validity after creation.

- **Increases the Point module test suite by 13 tests covering trait implementations, high-dimensional points, boundary values, memory layout, copy semantics,**

  **ordering, serialization, and type conversions.**

- **Improves neighbor validation performance** [`cd13fe4`](https://github.com/acgetchell/delaunay/commit/cd13fe4)

  Optimizes the triangulation neighbor validation process for performance.

  This is achieved by pre-computing vertex UUIDs, employing early termination checks for common validation failures, reusing `HashSet`s to avoid repeated memory
  allocations, and counting shared vertices efficiently using intersection iterators.

- **Improves test assertions and readability** [`cd13fe4`](https://github.com/acgetchell/delaunay/commit/cd13fe4)

  Updates test assertions to provide more informative error messages when tests fail.

  Replaces `{:?}` with `{other_error:?}` for better debug output in panic messages within test cases.
  Also simplifies the `Ok(_)` match arm to `Ok(())` where the result is discarded, improving readability.
  Finally adds an assert to the point copy test.

- **Suppresses clippy warnings in tests** [`cd13fe4`](https://github.com/acgetchell/delaunay/commit/cd13fe4)

  Adds `allow` attributes to suppress `cast_precision_loss` and `redundant_clone` clippy warnings in test functions.

  These warnings were triggered by the test code and do not indicate actual issues.

- **Refactors float trait implementations with macros** [`1712043`](https://github.com/acgetchell/delaunay/commit/1712043)

  Uses macros to reduce code duplication in the implementation of `FiniteCheck`, `HashCoordinate`, and `OrderedEq` traits for floating-point types.

  Improves code readability and maintainability. Also clarifies the conversions from Point to array.

- **Optimizes Point struct and trait implementations** [`1712043`](https://github.com/acgetchell/delaunay/commit/1712043)

  Introduces inline annotations to improve performance of Point struct methods.

  Unifies macro implementations for FiniteCheck, HashCoordinate and OrderedEq traits.
  This reduces code duplication and improves maintainability.

  These changes enhance the efficiency and organization of the point struct and its associated trait implementations.

- **Optimizes vertex operations and traits** [`1712043`](https://github.com/acgetchell/delaunay/commit/1712043)

  Adds #[inline] annotations to frequently used vertex methods for improved performance.

  Groups trait implementations with identical bounds for better code organization and readability.

  Implements implicit conversions from Vertex and &Vertex to coordinate arrays, enabling simpler coordinate access.

- **Standardizes example formatting in documentation** [`1712043`](https://github.com/acgetchell/delaunay/commit/1712043)

  Ensures consistent formatting of example code blocks throughout the codebase's documentation.
  Replaces the heading '# Example' with '# Example:' across multiple files.
  This change improves readability and maintainability of the documentation.

- **Valid (finite) vertex coordinates.** [`1712043`](https://github.com/acgetchell/delaunay/commit/1712043)

- **Distinct vertices (no duplicates).** [`1712043`](https://github.com/acgetchell/delaunay/commit/1712043)

- **A non-nil UUID.** [`1712043`](https://github.com/acgetchell/delaunay/commit/1712043)

  The commit also includes unit tests to ensure the validity check functions as intended.

- **Improves \`Cell\` struct and updates dependencies** [`1712043`](https://github.com/acgetchell/delaunay/commit/1712043)

  Refactors the `Cell` struct for clarity and performance, separating methods based on trait bounds. It also includes minor optimizations such as adding
  `inline` annotations and using iterators to collect facets.

  Updates the `peroxide` dependency and enables the `dead_code` lint to catch unused code, promoting better code quality.

  Fixes a potential clippy warning by explicitly allowing `zero_divided_by_zero` where intended.

  Enhances vertex sorting within cells for consistent hashing and comparison, regardless of vertex insertion order.

- **Handles potential \`NaN\` values in sorting** [`1712043`](https://github.com/acgetchell/delaunay/commit/1712043)

  Ensures stable sorting behavior by handling potential `NaN` values when comparing floating-point numbers.
  Replaces `unwrap()` with `unwrap_or(std::cmp::Ordering::Equal)` to provide a default ordering when `partial_cmp` returns `None`, indicating a `NaN` value.

- **Clarifies HashMap usage in documentation** [`1712043`](https://github.com/acgetchell/delaunay/commit/1712043)

  Ensures consistent formatting of `HashMap` references in documentation by using backticks.
  This improves readability and clarity, especially when referring to it in explanations and property descriptions.

- **Improves code quality and documentation** [`1712043`](https://github.com/acgetchell/delaunay/commit/1712043)

  Adds pedantic lints and resolves existing clippy warnings to improve code quality.

  Updates example and core documentation to clearly articulate the functionality and usage of public methods and data structures.

  Fixes minor bugs in example code for numeric type comparisons.

- **Refactors Vertex and updates examples** [`fe44e1a`](https://github.com/acgetchell/delaunay/commit/fe44e1a)

  Refactors the Vertex struct to encapsulate `point` and `uuid` fields, providing getter methods for accessing them.

  This change improves encapsulation and provides a more controlled interface for accessing vertex properties.

  Updates examples to reflect the new API for accessing vertex coordinates.
  Updates code to call the point method rather than directly accessing the public point field.
  Updates tests that were directly accessing the vertex's UUID to use the accessor method.
  Also improves documentation for Cell::circumcenter.

- **Improves documentation and code clarity** [`fe44e1a`](https://github.com/acgetchell/delaunay/commit/fe44e1a)

  Updates documentation for the circumcenter calculation to improve clarity.

  Also, rewords the vertex `point` field documentation for better understanding.

  Finally, uses `sort_by_key` for vertex sorting, enhancing readability.

- **Improves point validity checks and hashing** [`fe44e1a`](https://github.com/acgetchell/delaunay/commit/fe44e1a)

  Adds a method to check for finite coordinates in points, enhancing data validation.

  Refactors point hashing to accommodate floating-point types using OrderedFloat.

  Includes `From` implementation example in docstrings.

- **Updates examples README for clarity** [`fe44e1a`](https://github.com/acgetchell/delaunay/commit/fe44e1a)

  Refines the examples README to improve readability and clarify the purpose and key features of each example.

  Enhances descriptions for better understanding of the point comparison and implicit conversion examples.

- **Improves README formatting and clarity** [`fe44e1a`](https://github.com/acgetchell/delaunay/commit/fe44e1a)

  Refines the README for better readability and understanding.

  Specifically, improves formatting in the NaN-aware equality description and updates a comment for clarity in the example code.

- **Improves test coverage and performance** [`fe44e1a`](https://github.com/acgetchell/delaunay/commit/fe44e1a)

  Adds example tests and makes the coordinates and uuid functions inline, improving overall performance.

  It also clarifies NaN handling in the example.

- **Improves documentation and code formatting** [`fe44e1a`](https://github.com/acgetchell/delaunay/commit/fe44e1a)

  Updates documentation to use hyphens for list properties, enhances readability.

  Configures markdownlint to allow longer lines, improving developer workflow.

  Addresses inconsistencies in argument descriptions and code formatting, resulting in a more consistent and maintainable codebase.

- **Generalizes Point::from array conversion** [`928f42d`](https://github.com/acgetchell/delaunay/commit/928f42d)

  Allows conversion from arrays of any type `T` to Points of type `U`, where `T` can be converted into `U`. This makes the `Point` struct more flexible and
  avoids unnecessary type restrictions.

  Adds comprehensive tests to cover various conversion scenarios including integer to integer, float to float, integer to float, and same type conversions,
  ensuring type safety.

  Also adds `cobertura.xml` to gitignore.

- **Encapsulates Point coords field** [`928f42d`](https://github.com/acgetchell/delaunay/commit/928f42d)

  Makes the `coords` field of the `Point` struct private and provides a public `coordinates()` method for accessing a copy of the coordinate array. This change
  enhances data encapsulation, preventing unintended direct modification of the point's coordinates after instantiation, thereby promoting immutability and data
  integrity.

- **Optimizes point calculations for efficiency** [`928f42d`](https://github.com/acgetchell/delaunay/commit/928f42d)

  Simplifies and optimizes point calculations within the Delaunay triangulation code.

- **Stores the circumcenter to avoid redundant calculations, improving performance.** [`928f42d`](https://github.com/acgetchell/delaunay/commit/928f42d)

- **Improves floating-point value comparisons** [`928f42d`](https://github.com/acgetchell/delaunay/commit/928f42d)

  Uses the `approx` crate for more robust and readable floating-point comparisons in tests.
  This enhances the accuracy and clarity of tests involving floating-point values by using relative comparisons with configurable tolerance.

- **Renames and updates refactoring summary to README** [`928f42d`](https://github.com/acgetchell/delaunay/commit/928f42d)

  Renames `REFACTORING_SUMMARY.md` to `README.md` in the examples directory.

  This change also updates the content of the file to serve as an introduction and overview of the implicit conversion refactoring. The updated document
  summarizes the changes made to enable implicit conversion of `vertex.point.coordinates` to coordinate arrays using Rust's `From` trait,
  improving code ergonomics while maintaining backward compatibility.

- **Updates example README title.** [`928f42d`](https://github.com/acgetchell/delaunay/commit/928f42d)

  Renames the README title to "Implicit Conversion Example" to reflect the document's content accurately.

- **Update src/delaunay\_core/cell.rs** [`928f42d`](https://github.com/acgetchell/delaunay/commit/928f42d)

- **Refactors vertex coordinate conversion for nalgebra** [`928f42d`](https://github.com/acgetchell/delaunay/commit/928f42d)

  Simplifies vertex coordinate conversion to f64 for nalgebra operations.

  This change leverages implicit conversion from `Vertex` to coordinates before converting to `f64`, improving code readability and conciseness by removing the
  explicit coordinate extraction function.

  Also introduces `circumradius_with_center` to avoid recalculating circumcenter.

- **Improves cell circumsphere and facet calculations** [`928f42d`](https://github.com/acgetchell/delaunay/commit/928f42d)

  Improves efficiency of loop for circumcenter().

  Adds comprehensive tests for cell circumsphere containment, circumcenter calculation, circumradius calculation, and facet generation.

  Improves robustness and correctness of cell-related geometric calculations and data structure construction.

  Covers edge cases, different numeric types, and higher dimensions to ensure broad applicability.

- **Optimizes distance calculation in circumsphere test** [`928f42d`](https://github.com/acgetchell/delaunay/commit/928f42d)

  Avoids redundant calculation of the first vertex's coordinates during the circumsphere test, improving performance.

  ---------

- **Simplifies Point Hash implementations with macro** [`2826ccf`](https://github.com/acgetchell/delaunay/commit/2826ccf)

  Consolidates the Hash implementations for various integer types of Point coordinates using a macro.  This eliminates redundant code and avoids potential
  overlap issues.

- **Improves Hash implementation for Point struct** [`2826ccf`](https://github.com/acgetchell/delaunay/commit/2826ccf)

  Uses a macro to reduce code duplication when implementing the `Hash` trait for `Point` structs with `f64` and `f32` coordinate types.

  This improves maintainability and reduces the risk of inconsistencies.

- **Improves Cell hashing for correctness** [`2826ccf`](https://github.com/acgetchell/delaunay/commit/2826ccf)

  Refactors the Cell's Hash implementation to ensure consistent and correct hashing.

  The previous implementation used a runtime type check and unsafe downcasting for handling coordinate hashing, which was error-prone and inefficient.

  The new implementation removes the need for runtime type checks and unsafe operations by requiring that the `Point` type implement the `Hash` trait.
  Vertices are sorted before hashing to avoid order-dependent hash values.

  This change ensures that Cells with the same data hash to the same value, regardless of the order of vertices, leading to more reliable behavior in hash-based
  data structures.

- **Update src/delaunay\_core/cell.rs** [`2826ccf`](https://github.com/acgetchell/delaunay/commit/2826ccf)

- **Ignores target directories and subdirectories.** [`2826ccf`](https://github.com/acgetchell/delaunay/commit/2826ccf)

  Updates .gitignore to exclude all directories starting with "target", including nested target directories.

  This prevents compiled output and temporary files from being included in the repository.

  ---------

- **chore: update dependencies** [`bd2a079`](https://github.com/acgetchell/delaunay/commit/bd2a079)

- **chore: update dependencies** [`bd2a079`](https://github.com/acgetchell/delaunay/commit/bd2a079)

- **Improves boundary facet identification** [`bd2a079`](https://github.com/acgetchell/delaunay/commit/bd2a079)

  Simplifies the check for identifying boundary facets by using `is_some_and`
  instead of `map_or` for better readability and conciseness. This clarifies
  the condition for determining if a cell exists and contains a given facet.

- **Updates to version 0.3.0 with performance improvements** [`0be386d`](https://github.com/acgetchell/delaunay/commit/0be386d)

  Increments the crate version to 0.3.0.

  Includes performance enhancements observed in benchmark results, showing slight performance gains across `insphere` implementations and
  various dimensions.

  Also refactors point implementation for improved code style.

- **Improves Delaunay triangulation core logic** [`331e856`](https://github.com/acgetchell/delaunay/commit/331e856)

  Refactors cell hashing for better performance and reliability.
  Adds validation for Tds neighbor relationships and unique cell sets,
  improving triangulation data structure integrity.
  Updates README to clarify testing dimensions.

- **Improves triangulation for small vertex sets** [`9420c14`](https://github.com/acgetchell/delaunay/commit/9420c14)

  Addresses instability issues with the Bowyer-Watson algorithm when dealing with very small numbers of vertices.

  For vertex counts between D+1 and D+5, uses a combinatorial approach to generate all possible simplices. This ensures robustness and correctness in these edge
  cases.

  Adds a function to remove duplicate cells, ensuring only unique simplices exist.

  Updates neighbor and incident cell assignment to reflect new cell generation logic.

- **Marks Delaunay triangulation as implemented** [`41a59cd`](https://github.com/acgetchell/delaunay/commit/41a59cd)

  Updates the README to reflect the implementation and testing of d-dimensional Delaunay triangulations for dimensions 3, 4, and 5.

- **Revert "Copies vertex instead of cloning"** [`09d35d8`](https://github.com/acgetchell/delaunay/commit/09d35d8)

  This reverts commit ad0c3b7f74efd7d787553e97010cba7dfce364ee.

- **Copies vertex instead of cloning** [`ad0c3b7`](https://github.com/acgetchell/delaunay/commit/ad0c3b7)

  Uses a copy of the vertex instead of cloning it when updating incident cell information.

  This change avoids unnecessary allocation and improves performance by using the stack-allocated copy instead of heap-allocating a clone.

- **Improves supercell coordinate calculation** [`bbbaa6f`](https://github.com/acgetchell/delaunay/commit/bbbaa6f)

  Calculates min/max coordinates correctly for supercell creation.

  Uses the correct extreme coordinates when creating the supercell
  around a point cloud. This ensures the supercell encloses all points
  and avoids potential issues during triangulation. Adds utility functions
  for finding coordinate extrema.

- **Refactors Cell struct for clarity and efficiency** [`bc44769`](https://github.com/acgetchell/delaunay/commit/bc44769)

  Improves the structure of the `Cell` struct by splitting its implementation into two blocks based on trait requirements.

  This change enhances code organization and reduces unnecessary trait bounds on basic methods, improving performance and usability.
  The `Eq` and `Hash` traits are now implemented for `Cell`, enabling usage in hash-based data structures.

- **Improves CI workflow caching** [`e63557e`](https://github.com/acgetchell/delaunay/commit/e63557e)

  Updates the CI workflow to more effectively cache cargo dependencies.

  This change ensures that cargo registry, git dependencies, and the target directory are cached between builds, speeding up the CI process.

- **Updates Codecov action to v5** [`c82f152`](https://github.com/acgetchell/delaunay/commit/c82f152)

  Updates the Codecov action from v3 to v5.

  This upgrade likely includes bug fixes, performance improvements, and new features offered by the latest version of the action. It also changes the method of
  passing the token from a `with` parameter to an environment variable.

- **Improves CI workflow and code analysis** [`f326699`](https://github.com/acgetchell/delaunay/commit/f326699)

  Enhances the CI workflow by adding caching for Rust dependencies,
  which speeds up the build process.

  Updates the Codacy workflow to streamline the analysis by directly
  passing the project token as an environment variable.

  Adds "sarif" to the cspell dictionary to prevent false positives.

- **Updates dependencies and caches Rust dependencies** [`e1e99f4`](https://github.com/acgetchell/delaunay/commit/e1e99f4)

  Updates several dependencies in Cargo.lock and Cargo.toml, including anyhow, derive_builder, nalgebra, peroxide, serde, serde_json, thiserror, and uuid.
  Adds a GitHub Actions cache for Rust dependencies to improve build times.

- **Updates upload-artifact action to v4** [`abed62d`](https://github.com/acgetchell/delaunay/commit/abed62d)

  Updates the `actions/upload-artifact` action in the code coverage workflow from v3 to v4.
  This ensures the workflow benefits from the latest features, improvements, and security updates offered by the newer version of the action.

### Removed

- **Removes trailing whitespace** [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

  Removes a trailing whitespace at the end of a line in `src/geometry/predicates.rs`.
  This contributes to code cleanliness and consistency.

- **Streamlines imports and removes unused code.** [`3532ff6`](https://github.com/acgetchell/delaunay/commit/3532ff6)

- **Remove redundant trait bounds on generic parameters** [`0825508`](https://github.com/acgetchell/delaunay/commit/0825508)

  Removes the `Clone + Copy + PartialEq + PartialOrd` trait bounds from the generic type `T` in `Cell`, `Facet`, `Tds`, `Vertex` and utility functions as these
  are all included in `Float`.

- **Removes markdownlint configuration** [`928f42d`](https://github.com/acgetchell/delaunay/commit/928f42d)

  Removes specific markdownlint configuration.

  Simplifies the example README by removing the introduction heading, focusing directly on the document's purpose.

- **Removes branch filter for push events** [`2826ccf`](https://github.com/acgetchell/delaunay/commit/2826ccf)

  Removes the branch filter for push events in the CI workflow.

  This ensures that the CI pipeline runs for all push events, not just those on the main branch.

- **Revert "Removes branch filter for push events"** [`2826ccf`](https://github.com/acgetchell/delaunay/commit/2826ccf)

  This reverts commit ef92790297a58f8aa76458c7178be0f1d0e03b26.

- **Removes CodeRabbit badge from README [ci skip]** [`c2da1ce`](https://github.com/acgetchell/delaunay/commit/c2da1ce)

  Removes the CodeRabbit badge from the README file.
  The badge is no longer needed.

### Fixed

- **Corrects typo in citation URL** [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

  Fixes a typo in the URL for the Lévy, Bruno, and Yang Liu citation.

  Uses the `+=` operator for accumulating squared distances, improving code conciseness and readability.

- **Improves code quality and fixes minor issues** [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

  Addresses several minor issues and improves overall code quality:

- **Fixes typo in codecov workflow.** [`798e5dc`](https://github.com/acgetchell/delaunay/commit/798e5dc)

- **Fixes minor issues and improves Codacy workflow** [`2a57833`](https://github.com/acgetchell/delaunay/commit/2a57833)

  Corrects minor syntax errors in workflow configurations.

  Reduces the timeout for GitHub Actions linter to prevent unnecessary delays.

  Improves the Codacy workflow by adding `set -euo pipefail` for better error handling and surfaces errors clearly during SARIF processing.

  Refactors the Codacy workflow to use `gh api` instead of environment variables for uploading SARIF files, simplifying the process.

- **Improves code consistency and reduces redundancy.** [`3532ff6`](https://github.com/acgetchell/delaunay/commit/3532ff6)

  These changes enhance the overall code quality and make it easier to understand and contribute to the project.

- **Corrects simplex orientation tests** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

  Fixes the simplex orientation tests by using the correct vertex order to produce positive and negative determinants, ensuring the tests accurately validate
  the orientation logic.

- **Numerical consistency validation** [`a50c978`](https://github.com/acgetchell/delaunay/commit/a50c978)

  This allows for detailed performance analysis and optimization of circumsphere containment checks.

- **Improves triangulation robustness and validation** [`ec9a9b2`](https://github.com/acgetchell/delaunay/commit/ec9a9b2)

  Adds more comprehensive error handling and validation to the triangulation data structure, improving its overall robustness.

  Specifically:

- **Enhances error handling during cell creation and neighbor assignment, converting \`anyhow::Error\` to \`TriangulationValidationError\`**
  [`ec9a9b2`](https://github.com/acgetchell/delaunay/commit/ec9a9b2)

- **Improves triangulation validation error messages** [`ec9a9b2`](https://github.com/acgetchell/delaunay/commit/ec9a9b2)

  Updates triangulation validation to provide more informative error messages. Replaces generic error types with more specific variants where possible,
  clarifying the nature of the validation failure. This enhances debugging and troubleshooting efforts.

- **Improves NaN handling and hashing consistency** [`fe44e1a`](https://github.com/acgetchell/delaunay/commit/fe44e1a)

  Refines NaN comparison and hashing logic for improved consistency and adherence to mathematical properties.

  This change replaces direct equality comparisons with `is_nan()` checks to align with IEEE 754 standards and ensures that NaN values are
  handled correctly in comparisons. It also standardizes the creation of NaN values using `f64::NAN` and uses `contains_key` instead of
  `get().is_some()` for hashmap lookups, enhancing clarity and reliability.

- **Fixes potential type conversion issue** [`928f42d`](https://github.com/acgetchell/delaunay/commit/928f42d)

  Addresses a potential issue where unnecessary `.into()` calls could lead to unexpected type conversions when calculating squared distances.

  Also, disables markdownlint rule MD043 to allow for more flexible list formatting.

- **Fixes implicit conversion in example** [`928f42d`](https://github.com/acgetchell/delaunay/commit/928f42d)

  Updates the example README to accurately reflect the implicit conversion of vertex coordinates.

  Corrects a type constraint in the coordinate conversion to ensure the correct `Vertex` type is used.
  This enables the smooth conversion of vertex coordinates to f64 arrays.

- **fix: update algorithm** [`bd2a079`](https://github.com/acgetchell/delaunay/commit/bd2a079)

- **fix: CodeRabbit suggestions** [`bd2a079`](https://github.com/acgetchell/delaunay/commit/bd2a079)

- **fix: removed buggy contains function** [`bd2a079`](https://github.com/acgetchell/delaunay/commit/bd2a079)

- **fix: slight algorithmic improvements** [`bd2a079`](https://github.com/acgetchell/delaunay/commit/bd2a079)

- **Fixes hashing and comparison of floating-point points** [`bd2a079`](https://github.com/acgetchell/delaunay/commit/bd2a079)

  Updates the `Point` and `Vertex` structs to use `OrderedFloat` for hashing.
  This ensures that points with the same coordinates are always
  hashed to the same value, regardless of their original representation.
  The `Eq` derive was also removed from Vertex because it was implemented manually,
  but the derive will generate a conflicting implementation.

- **Fix deprecated functions** [`408d8bd`](https://github.com/acgetchell/delaunay/commit/408d8bd)

- **Improves Delaunay triangulation robustness** [`6fe769b`](https://github.com/acgetchell/delaunay/commit/6fe769b)

  Addresses edge cases and improves the robustness of the Delaunay triangulation process. This includes:

  - Handles cases with D+1 vertices more efficiently.
  - Prevents infinite loops during Bowyer-Watson insertion by skipping vertices already part of the supercell.
  - Removes redundant cloning operations in tests.
  - Fixes a cloning issue that copies the `point` rather than creating a new instance.

- **Improves Delaunay triangulation robustness** [`ad716dd`](https://github.com/acgetchell/delaunay/commit/ad716dd)

  Enhances the Bowyer-Watson algorithm to handle empty input, improve supercell creation, and properly manage cell removal and neighbor assignment. This results
  in a more robust and
  reliable triangulation process, particularly for edge cases and various input geometries. It includes:

  - Handling empty vertex sets to create default triangulations.
  - Improving supercell generation using bounding box calculations and simplex-based creation.
  - Refining cell removal to eliminate supercell artifacts and duplicate cells.
  - Implementing neighbor assignment based on shared facets.
  - Assigning incident cells to vertices for better topological information.

## v0.2.0 - 2023-12-10

### Merged Pull Requests

- Feature/peroxide [`#5`](https://github.com/acgetchell/delaunay/pull/5)

- Update GitHub actions [`#2`](https://github.com/acgetchell/delaunay/pull/2)

### Added

- **feat: Add functions to refactor Bowyer-Watson** [`e603652`](https://github.com/acgetchell/delaunay/commit/e603652)

- **Add equality and order implementations for Cell, Facet, and Vertex** [`0e16c16`](https://github.com/acgetchell/delaunay/commit/0e16c16)

  - Implement equality for cells based on the sorted vector of vertices
  - Implement order for cells based on the lexicographic order of sorted vector of vertices
  - Implement equality for vertices based on the elements in the vector of coordinates
  - Implement order for vertices based on the lexicographic order of elements in the vector of coordinates
  - Test equality for facets, which is based on equality of cells and vertices
  - Test order for facets, which is based on order of cells and vertices

  Crate updates.

- **Implement PartialEq, Eq, and PartialOrd on Vertex** [`1430ce1`](https://github.com/acgetchell/delaunay/commit/1430ce1)

  Following:

  <https://www.philipdaniels.com/blog/2019/rust-equality-and-ordering/>

  Implemented my own based strictly on the point contained in the vertex. Two vertices should be equal if their points are equal, even if their Uuids are
  different (this should be an error).

  Because I have f64, I cannot implement Hash or Ord without further work.

  All this because I'm getting extra Facets which should be filtered out but I suspect are not because default Eq is allowing dupes.

- **Add Codacy security scan workflow** [`c6a4742`](https://github.com/acgetchell/delaunay/commit/c6a4742)

  This commit adds a new workflow file `codacy.yml` that performs a Codacy security scan on the code.

  The README.md file also includes updates regarding features and future plans for this library.

- **Added Facet vertices method** [`5651810`](https://github.com/acgetchell/delaunay/commit/5651810)

  - Added a new method, `vertices`, to the Facet struct that returns a vector of vertices in the facet.
  - Added tests for creating facets with 1-simplex cells and retrieving vertices from facets.

  To make this work, I had to update some trait bounds:

  - Added `U: Clone` and `V: Clone` as trait bounds to the `Cell`, `Facet`, and `Tds` structs.
  - Updated the code in the affected files to implement the Clone trait for types U and V.

  Cell is now cloneable but Vertex isn't, fix that next time.

- **feat: Add Facet struct and related functionality** [`204a70f`](https://github.com/acgetchell/delaunay/commit/204a70f)

  - Added a new file `facet.rs` with the implementation of the `Facet` struct.
  - The `Facet` struct represents a facet of a d-dimensional simplex.
  - It is defined in terms of a cell and the vertex in the cell opposite to it.
  - Provides convenience methods used in the Bowyer-Watson algorithm.
  - Facets are not stored directly in the Triangulation Data Structure (TDS), but created on-the-fly when needed.

- **Added Deserialization via serde** [`fe3a704`](https://github.com/acgetchell/delaunay/commit/fe3a704)

  Also normalized traits across data structures (point, vertex, cell, tds).

  Might think of hiding this behind a feature flag, but as far as I can tell there's no way to put trait bounds behind a #[cfg_attr(feature = ...)].

  Also, saving data structures is very important for my research code (and was a difficult problem in C++ with HDF5), so I'd have this feature on always
  anyways.

- **Added Serialization via serde** [`a89ff48`](https://github.com/acgetchell/delaunay/commit/a89ff48)

- **Implement Copy and Default traits** [`650f484`](https://github.com/acgetchell/delaunay/commit/650f484)

  Implement Default trait for Point, Vertex, Cell, and Triangulation Data Structure.

  Implement Copy trait for Point, Vertex, and Cell.

  In general, we'd like to implement Debug, Clone, Default, and PartialEq for all the public structs. However, due to Uuids, PartialEq and Copy will take some
  more doing.

- **feat: Add conversion from `coords` array to `[f64; D]`** [`4524fb5`](https://github.com/acgetchell/delaunay/commit/4524fb5)

  - Added a new implementation for the `from` function in the `Point` struct that converts the `coords` array to `[f64; D]`.
  - Updated the comments to reflect this change.

  refactor: Add utility function to find minimum coordinates

  - Created a new utility function called `find_min_coordinate` that takes a hashmap of vertices and returns an array containing the minimum coordinate for each
  dimension.
  - Used this function in the `bowyer_watson` method of the `Tds` struct to find the minimum coordinates of all vertices.
  - Added test cases for this utility function.

- **Added more tests** [`fd7c05d`](https://github.com/acgetchell/delaunay/commit/fd7c05d)

  docs: Update README.md

  refactor: Improve code readability in cell.rs

  - Added example code snippets with explanations for the `number_of_vertices()` and `dim()` functions in cell.rs.

  fix: Correct function description in cell.rs

  - Fixed the function description for `circumradius()` in cell.rs to indicate that it returns a Result type, either containing the circumradius or an error
  message.

  test: Rename test functions in cell.rs, point.rs, and vertex.rs

  - Renamed test functions in cell.rs, point.rs, and vertex.rs to follow a consistent naming convention.

- **Added circumsphere_contains method** [`51f40cd`](https://github.com/acgetchell/delaunay/commit/51f40cd)

  - Implemented the circumsphere_contains method in the Cell struct to calculate the circumradius and check if a given vertex is contained within the
  circumsphere.
  - Added two new tests to verify that the cell correctly determines whether a vertex is contained within its circumsphere or not.

- **feat: Add circumradius calculation to Cell struct** [`e9a0142`](https://github.com/acgetchell/delaunay/commit/e9a0142)

  This commit adds a new method `circumradius` to the `Cell` struct in the `delaunay_core` module. The `circumradius` method calculates the distance from the
  circumcenter of the cell to any vertex. It uses the existing `circumcenter` method and the distance formula from the nalgebra library.

  The commit also includes some minor code cleanup, removing unnecessary imports and debug print statements.

  Unit tests have been added for both successful and failed cases of calculating the circumradius.

  Circumradius calculation has been verified with human-readable output during testing.

- **Add circumcenter** [`c6c5e0d`](https://github.com/acgetchell/delaunay/commit/c6c5e0d)

  The first step to calculating a Delaunay triangulation is calculating the circumcenter of a simplex.

  This formula seems to be correct but currently fails in all cases, so a careful check is needed

- **feat: Add dim and contains_vertex functions to Cell** [`4169560`](https://github.com/acgetchell/delaunay/commit/4169560)

  - Added a new function `dim` that calculates the dimension of the cell by subtracting 1 from the number of vertices.
  - Added a new function `contains_vertex` that checks if a given vertex is present in the cell.

  Example usage:
      let vertex1 = Vertex::new_with_data(Point::new([0.0, 0.0, 1.0]), 1);
      let vertex2 = Vertex::new_with_data(Point::new([0.0, 1.0, 0.0]), 1);
      let vertex3 = Vertex::new_with_data(Point::new([1.0, 0.0, 0.0]), 1);
      let vertex4 = Vertex::new_with_data(Point::new([1.0, 1.0, 1.0]), 2);
      let cell = Cell::new_with_data(vec![vertex1, vertex2, vertex3, vertex4], "three-one cell").unwrap();
      assert!(cell.contains_vertex(vertex1));

- **Add license [skip ci]** [`24f6d0c`](https://github.com/acgetchell/delaunay/commit/24f6d0c)

- **Add documentation** [`bc3cf2a`](https://github.com/acgetchell/delaunay/commit/bc3cf2a)

  Rustdoc is amazing!

- **Refactor Tds struct and add new methods for counting vertices and cells** [`e701d62`](https://github.com/acgetchell/delaunay/commit/e701d62)

  - Refactored the `Tds` struct in `triangulation_data_structure.rs` to include two new methods: `number_of_vertices()` and `number_of_cells()`.
  - Updated the existing tests in the module to use these new methods instead of directly accessing the `vertices` and `cells` fields.
  - Added assertions to verify that the counts returned by these methods are correct.

  This commit improves code readability and encapsulation by providing dedicated methods for counting vertices and cells in the triangulation data structure.

- **Tds add function and dimensionality constraints** [`7645f34`](https://github.com/acgetchell/delaunay/commit/7645f34)

  Tds::add to add one vertex to the triangulation data structure.

  Set the dimensionality of the Tds using CGAL conventions:

  -1 if no vertices are present
  0 for a single vertex
  1 for two vertices (edge)
  2 for three vertices (face)
  Up to D for D+1 vertices or greater

  Where D is the extrinsic dimensionality (i.e. number of coordinates of a point).

- **Add incident_cell to Vertex and neighbors to Cells** [`0b137ab`](https://github.com/acgetchell/delaunay/commit/0b137ab)

  Cells and vertices are identified by their universally unique identifiers (UUIDs) generated by the uuid crate.

  Following CGAL's convention:

  - A Vertex stores the UUID of an incident cell
  - A cell stores a container of the UUIDs of it's neighboring cells

  These are Options because they are not known when an individual cell or vertex is created. They are planned to be later inserted by the Triangulation when it
  is constructed.

- **Add clippy to cspell.json and update README.md with CI and rust-clippy badges** [`10cc4bd`](https://github.com/acgetchell/delaunay/commit/10cc4bd)

  - Add "clippy" to the "words" list in cspell.json
  - Update README.md with CI and rust-clippy badges

- **Add Codecov and Clippy** [`5b6d76b`](https://github.com/acgetchell/delaunay/commit/5b6d76b)

- **Add CODEOWNERS file, audit-check workflow, and rename CI workflow** [`3ee6c99`](https://github.com/acgetchell/delaunay/commit/3ee6c99)

  - Added a new CODEOWNERS file to specify default owners for the repository.
  - Added an audit-check workflow that runs security audits on files with Cargo.toml and Cargo.lock extensions.
  - Renamed the rust.yml workflow to ci.yml to better reflect its purpose as a general CI workflow.
  - Updated the ci.yml workflow to run on multiple operating systems (ubuntu-latest, macos-latest, windows-latest).
  - Added "acgetchell" to the cspell.json dictionary.
  - Added a test case for creating a Point in point.rs.

- **Create rust.yml** [`885f1d4`](https://github.com/acgetchell/delaunay/commit/885f1d4)

- **feat: Add Cell and Vertex structs to delaunay_core** [`301611a`](https://github.com/acgetchell/delaunay/commit/301611a)

  - Added `Cell` struct with `new` method and associated tests
  - Added `Vertex` struct with `new` method and associated tests
  - Created new files for `cell.rs` and `vertex.rs`
  - Updated imports in other files

### Changed

- **feature: Peroxide** [`196beeb`](https://github.com/acgetchell/delaunay/commit/196beeb)

  Initial review of Peroxide for matrix operations

- **refactor: Rewrite circumcenter using peroxide** [`196beeb`](https://github.com/acgetchell/delaunay/commit/196beeb)

  Also add convenience functions and error enums and handling via thiserror and anyhow.

- **refactor: Make improvements suggested by CodeRabbit** [`196beeb`](https://github.com/acgetchell/delaunay/commit/196beeb)

- **build: update crates** [`e44ce9f`](https://github.com/acgetchell/delaunay/commit/e44ce9f)

- **ci: Update actions** [`e44ce9f`](https://github.com/acgetchell/delaunay/commit/e44ce9f)

  Switch from actions-rs/audit-check@v1, which hasn't been updated in four years and has been archived, to actions-rust-lang/audit@v1, which was updated last
  week.

- **ci: Update codecov action** [`e44ce9f`](https://github.com/acgetchell/delaunay/commit/e44ce9f)

  Switch to using actions-rust-lang/setup-rust-toolchain, which is current instead of the deprecated actions-rs/toolchain. This also does rust caching using
  Swatinem/rust-cache for free.

- **ci: Revert changes to codecov.yml** [`e44ce9f`](https://github.com/acgetchell/delaunay/commit/e44ce9f)

  actions-rust-lang does not support installation of cargo tarpauline.

- **ci: Update rust clippy check** [`e44ce9f`](https://github.com/acgetchell/delaunay/commit/e44ce9f)

- **ci: Update codacy** [`e44ce9f`](https://github.com/acgetchell/delaunay/commit/e44ce9f)

- **ci: Run Github actions on merged pull requests** [`e44ce9f`](https://github.com/acgetchell/delaunay/commit/e44ce9f)

- **test: Better tests, error messages** [`6738259`](https://github.com/acgetchell/delaunay/commit/6738259)

- **Merge remote-tracking branch 'origin/main'** [`a51a6ef`](https://github.com/acgetchell/delaunay/commit/a51a6ef)

- **refactor: Entirely replace Cell:new with CellBuilder** [`6d75728`](https://github.com/acgetchell/delaunay/commit/6d75728)

  CellBuilder validator is nice.

- **feat: Use derive_builder** [`1d6adc8`](https://github.com/acgetchell/delaunay/commit/1d6adc8)

- **Refactor Bowyer-Watson** [`e122aa9`](https://github.com/acgetchell/delaunay/commit/e122aa9)

- **Tests for cell facets** [`f46f2f6`](https://github.com/acgetchell/delaunay/commit/f46f2f6)

- **ci: Reduce CodeCov expectations** [`0f7a2c0`](https://github.com/acgetchell/delaunay/commit/0f7a2c0)

- **ci: Update dependencies** [`581949f`](https://github.com/acgetchell/delaunay/commit/581949f)

  Resolve Rustsec Advisory for bytemuck 1.16.1, update Codacy.

- **ci: Update Codecov and dependencies** [`9538214`](https://github.com/acgetchell/delaunay/commit/9538214)

- **Update package versions in Cargo.lock and Cargo.toml,** [`ed7206d`](https://github.com/acgetchell/delaunay/commit/ed7206d)

- **Interlink documentation** [`8834e5c`](https://github.com/acgetchell/delaunay/commit/8834e5c)

  Link to items by name.

  <https://doc.rust-lang.org/rustdoc/write-documentation/linking-to-items-by-name.html>

- **Update Codacy Analysis CLI version and dependencies** [`7d6b6c6`](https://github.com/acgetchell/delaunay/commit/7d6b6c6)

  The commit updates the version of Codacy Analysis CLI to v4.3.0 in the `.github/workflows/codacy.yml` file. Additionally, it updates several dependencies in
  the `Cargo.lock` and `Cargo.toml` files, including `bytemuck`, `libc`, `serde`, `serde_derive`, and `serde_json`.

- **Rationalize traits** [`2102809`](https://github.com/acgetchell/delaunay/commit/2102809)

  Remove unneeded traits from functions and make them consistent across data structures.

- **PartialEq, Eq, and PartialOrd on Cells** [`530cd68`](https://github.com/acgetchell/delaunay/commit/530cd68)

- **Debugging Bowyer-Watson** [`9e7ba59`](https://github.com/acgetchell/delaunay/commit/9e7ba59)

  Singular matrices oh my!

- **Update Codacy** [`dc1f5b9`](https://github.com/acgetchell/delaunay/commit/dc1f5b9)

- **Cargo fmt** [`f6ab29f`](https://github.com/acgetchell/delaunay/commit/f6ab29f)

- **Update README** [`73a4c0f`](https://github.com/acgetchell/delaunay/commit/73a4c0f)

  Update README.md with new features

  - Updated the Features section in README.md to include:
  - d-dimensional Delaunay triangulations
  - Arbitrary data types associated with vertices and cells
  - Serialization/Deserialization with serde

  refactor: Comment out unused code in triangulation_data_structure.rs

  - Commented out unused code related to finding the boundary of a polygonal hole in triangulation_data_structure.rs.

  test: Update Tds type and serialized values in tds_to_and_from_json test

  - Updated the Tds type and serialized values in the tds_to_and_from_json test function in order to match changes made elsewhere.

  docs: Update lib.rs documentation with serde feature

  - Updated the documentation in lib.rs to mention that serialization/deserialization is supported using serde.

- **Test for auto traits** [`ba20c84`](https://github.com/acgetchell/delaunay/commit/ba20c84)

  Along with the desired traits Debug, Clone, Default, PartialEq, test for Send/Sync which are auto traits.

  Got this idea from "5 traits your Rust types must implement":

  <https://youtu.be/Nzclc6MswaI?si=UMJKQTOBFYIOviiR>

- **Partial Bowyer-Watson algorithm implementation** [`287f368`](https://github.com/acgetchell/delaunay/commit/287f368)

  First part of Bowyer-Watson algorithm: setting up supercell, starting loop over all vertices, and associated Rust traits to copy/clone data.

  Also hopefully fix CodeCov errors when coverage changes from baseline by miniscule amounts, or when code is subtracted but not otherwise changed.

- **feat: supercell** [`37ff603`](https://github.com/acgetchell/delaunay/commit/37ff603)

  Added function that creates a dynamically sized supercell based on the vertices in the triangulation data structure.

- **feat: find_extreme_coordinate** [`1c5444e`](https://github.com/acgetchell/delaunay/commit/1c5444e)

  - In the `cell.rs` file, changed the type of vertex to match the circumcenter.
  - In the `triangulation_data_structure.rs` file, updated the function call to use `find_extreme_coordinate` instead of `find_min_coordinate`.
  - In the `utilities.rs` file, added a new function called `find_extreme_coordinate` that takes a hashmap of vertices and returns either the minimum or maximum
  coordinates based on the specified ordering.

  This commit makes changes related to changing vertex types and updating utility functions for finding extreme coordinates in different dimensions.

- **Layout structure and future work** [`366dbad`](https://github.com/acgetchell/delaunay/commit/366dbad)

- **So Codecov doesn't count Rustdoc tests** [`20227be`](https://github.com/acgetchell/delaunay/commit/20227be)

- **More documentation** [`94bbbcb`](https://github.com/acgetchell/delaunay/commit/94bbbcb)

  With runnable tests!

- **Constrain cell dimensionality** [`693a1df`](https://github.com/acgetchell/delaunay/commit/693a1df)

  The intrinsic dimension of the cells cannot exceed the extrinsic dimension of the vertices.

- **Refactor `dim` method to calculate the dimension based on the number of vertices. Update tests accordingly.**
  [`0a080de`](https://github.com/acgetchell/delaunay/commit/0a080de)

  - Calculate the dimension based on the number of vertices in `dim` method
  - Update tests for `make_cell_with_data`, `make_cell_without_data`, and `make_vertex_with_data`
  - Add assertions for vertex dimensions in updated tests

- **3D -> d-D** [`62359b5`](https://github.com/acgetchell/delaunay/commit/62359b5)

  Generalized to d-D, per the name.

- **Construct hashmap of vertices in tds** [`2559b06`](https://github.com/acgetchell/delaunay/commit/2559b06)

- **Tell codecov to ignore lib.rs** [`7e8ae59`](https://github.com/acgetchell/delaunay/commit/7e8ae59)

- **Bare-bones Tds ctor, make data optional** [`218cfc3`](https://github.com/acgetchell/delaunay/commit/218cfc3)

  - Basic (not yet correct) new function for triangulation data structures.
  - Data fields for vertices and cells are now optional

  It's expected that data will be inserted later, after calculations done on the triangulation.

- **Use uuid to identify cells and vertices** [`ebc1c61`](https://github.com/acgetchell/delaunay/commit/ebc1c61)

  - Added the `uuid` crate as a dependency in `Cargo.toml`
  - Updated the `Cell` struct in `cell.rs` to include a `uuid` field of type `Uuid`
  - Modified the constructor of `Cell` in `cell.rs` to generate a unique UUID for each cell
  - Added a new module called `point.rs` in the `delaunay_core` module, which defines a generic point struct
  - Added a new module called `utilities.rs` in the `delaunay_core` module, which includes a function to generate UUIDs
  - Updated the constructor of `Vertex` in `vertex.rs` to generate a unique UUID for each vertex
  - Added tests for the new code changes

- **Refactor README.md to include links and clarify project goals** [`b75bd35`](https://github.com/acgetchell/delaunay/commit/b75bd35)

  The commit message summarizes the changes made to the README.md file. The changes include adding links to CGAL and Spade libraries, clarifying the goal of the
  project, and fixing formatting issues with the links.

- **Rename README.md file** [`3d58871`](https://github.com/acgetchell/delaunay/commit/3d58871)

  The README.md file has been renamed from src/README.md to README.md. This change ensures consistency and simplifies the file structure.

- **Initial commit** [`c6dc73a`](https://github.com/acgetchell/delaunay/commit/c6dc73a)

### Deprecated

- **refactor: Deprecate Cell::new and Cell::new_with_data** [`fa9f4d5`](https://github.com/acgetchell/delaunay/commit/fa9f4d5)

- **refactor: Deprecate Vector::new and Vector::new_with_data** [`c1fc858`](https://github.com/acgetchell/delaunay/commit/c1fc858)

### Removed

- **refactor: remove commented out code** [`196beeb`](https://github.com/acgetchell/delaunay/commit/196beeb)

- **refactor: remove Vertex::new and Vertex::new_with_data** [`3d01927`](https://github.com/acgetchell/delaunay/commit/3d01927)

### Fixed

- **ci: Fix codecov** [`e44ce9f`](https://github.com/acgetchell/delaunay/commit/e44ce9f)

  Add tarpaulin

- **ci: Fix ci workflows** [`04f680d`](https://github.com/acgetchell/delaunay/commit/04f680d)

  Don't need to double-submit jobs for merged PRs.

- **doc: Documentation fixes and dependency updates** [`3ca481d`](https://github.com/acgetchell/delaunay/commit/3ca481d)

- **Build: fix libc** [`c36bc97`](https://github.com/acgetchell/delaunay/commit/c36bc97)

  And a few other trivial changes.

- **docs: Fix audit badge** [`4a1ef9c`](https://github.com/acgetchell/delaunay/commit/4a1ef9c)

- **Fix traits to be consistent across Vertex, Cell, Facet, Tds** [`d55df6f`](https://github.com/acgetchell/delaunay/commit/d55df6f)

  Also debug Bowyer-Watson. Still getting Singular matrices.

- **Documentation fixes** [`bb8a8a3`](https://github.com/acgetchell/delaunay/commit/bb8a8a3)

- **Update dependencies in Cargo.toml and fix test assertions** [`d2aff26`](https://github.com/acgetchell/delaunay/commit/d2aff26)

  - Update the version of "proc-macro2" to "1.0.75" and its checksum.
  - Update the version of "serde_json" to "1.0.111" and its checksum.
  - Update the version of "syn" to "2.0.48" and its checksum.
  - Change the clippy lint `extra_unused_type_parameters` from "allow" to "warn".
  - Fix test assertions in `cell.rs`, `point.rs`, and `vertex.rs`.

- **Fix trait bounds and clippy lint** [`701e326`](https://github.com/acgetchell/delaunay/commit/701e326)

  This commit adds a new clippy lint to warn about extra unused type parameters in the code. The `Cargo.toml` file was modified to include the new lint
  configuration.

  Some changes were made to the function signatures and trait bounds of `Cell`, but no functionality was affected.

  Changes:
  - Added `[lints.clippy]` section with `extra_unused_type_parameters = "warn"` to `Cargo.toml`
  - Updated trait bounds and function signatures in cell, facet, point, tds, utilities, and vertex.
  - Added new function: `Cell::into_hashmap()`

- **Fix issues identified by CodeQL** [`ec1dc54`](https://github.com/acgetchell/delaunay/commit/ec1dc54)

  Use of a fallible conversion when an infallible one could be used.

  Refactor code in cell.rs file:

  - Replace `try_from` with `from` when converting solution_array and self.vertices[0].point.coords to Point<f64, D>
  - Simplify conversion of vertex.point.coords to Point<f64, D>

  - Update .codecov.yml target from 90% to 70%
  - Update proc-macro2 crate version from 1.0.71 to 1.0.73
  - Update quote crate version from 1.0.33 to 1.0.34
  - Update syn crate version from 2.0.43 to 2.0.45

- **Fix circumsphere function -- it works!** [`9fac2c1`](https://github.com/acgetchell/delaunay/commit/9fac2c1)

  - Updated the version of the "syn" package from 2.0.42 to 2.0.43 in Cargo.lock.
  - Modified the Cell struct in cell.rs to implement the Div trait for T and Sub trait for &'a T, where T is a generic type parameter.
  - Added a conversion implementation From<[T; D]> for Point<f64, D> in point.rs to convert an array of type [T; D] to [f64; D].
  - Fixed the calculation of b vector in cell.rs by using na::distance_squared instead of manually calculating the sum of squared coordinates.
  - Adjusted the solution array by dividing each element by 2.0 before assigning it to solution_point in cell.rs.
  - Updated the expected value for circumcenter test case in tests module of cell.rs.

  Note: Removed commented out code and debug print statements.

- **Fixing circumcircle** [`e7204f0`](https://github.com/acgetchell/delaunay/commit/e7204f0)

  The commit fixes the calculation of the circumcenter for a d-dimensional cell. It updates the code to use the approach described in Lévy and Liu's paper "Lp
  Centroidal Voronoi Tessellation and Its Applications". The previous implementation was incorrect.

  The commit also updates some dependencies, including `nalgebra`, to ensure compatibility with the new code changes.

- **Update README.md formatting and fix hyperlinks** [`0620071`](https://github.com/acgetchell/delaunay/commit/0620071)

  The commit updates the formatting of the README.md file and fixes the hyperlinks to [CGAL] and [Spade]. The changes ensure that the hyperlinks are correctly
  displayed in the document.

- **Update README.md formatting and fix hyperlink syntax** [`2143a89`](https://github.com/acgetchell/delaunay/commit/2143a89)

  The commit updates the formatting of the README.md file and fixes the syntax for hyperlinks. The changes ensure that the hyperlinks to CGAL and Spade are
  displayed correctly in the document.
